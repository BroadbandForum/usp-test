<!DOCTYPE html>
<!-- BBF GitHub Pages pandoc template; modified from default.html template -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8"/>
  <meta name="generator" content="pandoc"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
  <meta name="description" content="USP – The User Services Platform:
Conformance Test Plan for USP Agents"/>
  <meta name="theme-color" content="#157878"/>
  <title>BBF – USP – The User Services Platform</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="github.css"/>
  <link rel="stylesheet" href="extra.css"/>
  <link rel="stylesheet" href="release.css"/>
  <link rel="stylesheet" href="toc.css"/>
  <!-- Automatic hover links scripts -->
  <script>
  window.addEventListener('DOMContentLoaded', function() {
    var hoverlink = null;

    var elems = document.querySelectorAll('.auto-hoverlink:not(section)');
      for (var i = 0; i < elems.length; i++) {
        var elem = elems[i];

        elem.addEventListener('mouseenter', event => {
          var target = event.target;
          var info_attr = target.attributes.getNamedItem('data-info');
          var anchor_attr = target.attributes.getNamedItem('data-anchor');
          var thing = info_attr ? info_attr.value : target.localName
          /* we check the parent to cover the case where pandoc has moved the
             id from a header to its parent section */
          var anchor = target.id || target.parentElement.id ||
                                    (anchor_attr ? anchor_attr.value : null);

          if (hoverlink) {
            hoverlink.remove();
            hoverlink = null;
          }

          if (!anchor) {
              console.warn('%s %s has no id or data-anchor',
                           thing, target.textContent);
          } else {
            hoverlink = document.createElement('a');
            hoverlink.href = '#' + anchor;
            hoverlink.className = 'hoverlink';
            hoverlink.title = 'Permalink to this ' + thing;
            target.appendChild(hoverlink);
          }
        });

        elem.addEventListener('mouseleave', () => {
          if (hoverlink) {
            setTimeout(function(href) {
              if (hoverlink && hoverlink.href == href) {
                hoverlink.remove();
                hoverlink = null;
              }
            }, 1000, hoverlink.href);
          }
        });
      }
  });
  </script>
  <!-- Automatic hover links styles -->
  <style>
  :root {
      --hoverlink-gap: 0.2em;
      --hoverlink-size: 0.9em;
  }

  .hoverlink {
      text-decoration: none;
  }

  .hoverlink::after {
      position: absolute;
      display: inline-block;
      content: "";
      margin-left: var(--hoverlink-gap);
      width: var(--hoverlink-size);
      height: var(--hoverlink-size);
      background-size: var(--hoverlink-size) var(--hoverlink-size);
      /* https://icon-library.com/images/permalink-icon/permalink-icon-17.jpg
         (resized from 512x512 to 64x64) */
      background-image: url(permalink.png);
  }
  </style>
  <!-- Automatic sections scripts -->
  <script>
  /* 1. Find all sections, i.e., elements with class "new-section"
     2. If a section has no id (shouldn't happen), auto-assign one
     3. For each element with an id, set "data-section" to its section id
     4. For each internal link, similarly set "data-section" to its section id
   */
  window.addEventListener('DOMContentLoaded', () => {
      var target_sections = new Map();
      var sections = document.getElementsByClassName('new-section');
      for (var i = 0; i < sections.length; i++) {
          var section = sections[i];
          if (!section.id) {
              section.id = 'section-' + i;
          }
          target_sections.set(section.id, section.id);
          section.setAttribute('data-section', section.id)
          var targets = section.querySelectorAll('[id]');
          for (var j = 0; j < targets.length; j++) {
              var target = targets[j];
              target_sections.set(target.id, section.id);
              target.setAttribute('data-section', section.id)
          }
      }

      var doc_url = new URL(document.URL);
      var links = document.querySelectorAll('a[href]');
      var warned = new Map()
      for (var i = 0; i < links.length; i++) {
          var link = links[i];
          var url = new URL(link.href, document.URL);
          if (url.hostname == doc_url.hostname &&
              url.pathname == doc_url.pathname && url.hash) {
              var href = url.hash.substring(1);
              var section_id = target_sections.get(href)
              if (!section_id) {
                  if (!warned.get(href)) {
                      console.warn("href %s undefined or not within a section",
                                   href);
                      warned.set(href, true);
                  }
              } else {
                  link.setAttribute('data-section', section_id);
              }
          }
      }
  });

  /* Create a new scope to avoid using a global variable */
  (function() {

      /* Show the section with the given id, which is assumed to be valid */
      function show_section(section_id) {
          var section = document.getElementById(section_id);

          /* The "cover-only" class indicates elements that should only be
             shown when the cover page section is shown */
          var cover_onlys = document.getElementsByClassName('cover-only');
          if (section) {
              for (var i = 0; i < cover_onlys.length; i++) {
                  var cover_only = cover_onlys[i];
                  if (section_id != 'sec:cover-page') {
                      cover_only.classList.add('hidden')
                  } else {
                      cover_only.classList.remove('hidden')
                  }
              }
          }

          /* Hide all sections, then un-hide this one */
          var sections = document.getElementsByClassName('new-section');
          for (var i = 0; i < sections.length; i++) {
              sections[i].classList.add('hidden');
          }
          section.classList.remove('hidden')
      }

      /* Add click events to all links, using the "data-section" attribute
         (set earlier) to show the associated section */
      window.addEventListener('DOMContentLoaded', () => {
          var links = document.querySelectorAll('a[data-section]');
          for (var i = 0; i < links.length; i++) {
              links[i].addEventListener('click', event => {
                  var link = event.currentTarget;
                  var section_id = link.attributes['data-section'].value;
                  show_section(section_id);
              });
          }
      });

      /* Ensure that loading the page with a URL fragment (hash) will show the
         associated section */
      window.addEventListener('DOMContentLoaded', () => {
          var url = new URL(document.URL);
          if (url.hash.length > 1) {
              var href = url.hash.substring(1);
              var target = document.getElementById(href);
              if (!target) {
                  var fallback = 'sec:executive-summary';
                  console.warn("target %s undefined; falling back on %s",
                               href, fallback);
                  href = fallback;
                  target = document.getElementById(href);
                  if (!target) {
                      var fallback = 'sec:cover-page';
                      console.warn("target %s undefined; falling back on %s",
                                   href, fallback);
                      href = fallback;
                      target = document.getElementById(href);
                  }
              }
              if (!target) {
                  console.warn("target %s undefined", href);
              } else {
                  var section_id = target.attributes['data-section'].value;
                  if (!section_id) {
                      console.warn("target %s not within a section", href);
                  } else {
                      show_section(section_id);
                  }
              }
          }
      });

  /* End of new scope */
  })();
  </script>
  <!-- Automatic sections styles -->
  <style>
  h1.cover-page, .hidden, aside.footnotes-end-of-document {
      display: none;
  }
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>

<body>
  <section class="page-header">
    <h1 class="project-name">
      <a href="index.html" style="text-decoration: none; color: white;">
        <img src="bbflogo-reverse-dark.png"/><br>
        The User Services Platform
      </a>
    </h1>
    <h2 class="project-tagline">Conformance Test Plan for USP
Agents</h2>
    <p></p>
    <p></p>
    <div class="project-buttons">
      <a class="btn" href="index.htm" title="TP-469 Single-file
HTML">HTML</a>
      <a class="btn" href="index.pdf" title="TP-469 PDF">PDF</a>
      <a class="btn" href="https://usp.technology" title="usp.technology">Home</a>
    </div>
  </section>

  <section class="main-content">
    <header id="title-block-header" class="cover-only">
      <h1 class="title auto-hoverlink" id="title">TP-469 – Conformance
Test Plan for USP Agents</h1>
      <p class="subtitle">Issue: 1 Amendment 3 Corrigendum 2 <span
class="release"></span></p>
      <p class="date">Issue Date: May 2025</p>
    </header>
    <nav id="NAVTOP" role="doc-toc">
<p><a href="#sec:cover-page">Cover Page</a> | <a
href="#sec:test-setup">Test Setup</a> | <a
href="#sec:messages-and-path-names">1 Messages and Path Names</a> | <a
href="#sec:authentication-and-access-control-test-cases">2
Authentication and Access Control Test Cases</a> | <a
href="#sec:usp-record-test-cases">3 USP Record Test Cases</a> | <a
href="#sec:general-mtp-test-cases">4 General MTP Test Cases</a> | <a
href="#sec:coap-test-cases-deprecated">5 CoAP Test Cases
(DEPRECATED)</a> | <a href="#sec:stomp-test-cases">6 STOMP Test
Cases</a> | <a href="#sec:websocket-test-cases">7 WebSocket Test
Cases</a> | <a href="#sec:discovery-test-cases">8 Discovery Test
Cases</a> | <a href="#sec:functionality-test-cases">9 Functionality Test
Cases</a> | <a href="#sec:bulk-data-collection-test-cases">10 Bulk Data
Collection Test Cases</a> | <a href="#sec:mqtt-test-cases">11 MQTT Test
Cases</a></p>
    </nav>
    <nav id="TOC" class="cover-only" role="doc-toc">
      <h2 id="toc-title">Table of Contents</h2>
<ul>
<li><a href="#sec:cover-page">Cover Page</a>
<ul>
<li><a href="#sec:executive-summary">Executive Summary</a></li>
<li><a href="#sec:purpose">Purpose</a></li>
<li><a href="#sec:scope">Scope</a></li>
</ul></li>
<li><a href="#sec:test-setup">Test Setup</a>
<ul>
<li><a href="#sec:test-equipment">Test Equipment</a></li>
<li><a href="#sec:test-setup-and-execution">Test Setup and
Execution</a></li>
<li><a href="#sec:universal-test-metrics">Universal Test
Metrics</a></li>
<li><a href="#sec:notes-about-test-case-descriptions">Notes about test
case descriptions</a></li>
</ul></li>
<li><a href="#sec:messages-and-path-names">1 Messages and Path Names</a>
<ul>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-succeed">1.1
Add message with allow partial false, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-single-object-required-parameters-succeed">1.2
Add message with allow partial true, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-fail">1.3
Add message with allow partial false, single object, required parameters
fail</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-invalid-object">1.4
Add message with allow partial false, single invalid object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects">1.5
Add message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-with-an-invalid-object">1.6
Add message with allow partial false, multiple objects with an invalid
object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.7
Add message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-invalid-type-single-object">1.8
Add message with allow partial true, required parameters fail, invalid
type, single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-multiple-objects">1.9
Add message with allow partial true, required parameters fail, multiple
objects</a></li>
<li><a href="#sec:add-message-with-unique-key-addressing-in-path">1.10
Add message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-pass">1.11
Set message with allow partial false, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameters-pass">1.12
Set message with allow partial true, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects">1.13
Set message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-fail">1.14
Set message with allow partial false, required parameters fail</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.15
Set message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameter-fails-multiple-objects">1.16
Set message with allow partial true, required parameter fails, multiple
objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-non-required-parameter-fails-multiple-parameters">1.17
Set message with allow partial true, non-required parameter fails,
multiple parameters</a></li>
<li><a href="#sec:set-message-with-unique-key-addressing-in-path">1.18
Set message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-pass">1.19
Set message with wildcard search path, allow partial false, required
parameters pass</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-fail">1.20
Set message with wildcard search path, allow partial false, required
parameters fail</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-true-required-parameters-fail">1.21
Set message with wildcard search path, allow partial true, required
parameters fail</a></li>
<li><a href="#sec:set-message-with-search-expression-search-path">1.22
Set message with search expression search path</a></li>
<li><a href="#sec:set-message-with-path-that-matches-no-objects">1.23
Set message with path that matches no objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-valid-object-instance">1.24
Delete message with allow partial false, valid object instance</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-object-instance-doesnt-exist">1.25
Delete message with allow partial false, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-invalid-object">1.26
Delete message with allow partial false, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects">1.27
Delete message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects-invalid-object">1.28
Delete message with allow partial false, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-object-instance-doesnt-exist">1.29
Delete message with allow partial true, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-invalid-object">1.30
Delete message with allow partial true, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-invalid-object">1.31
Delete message with allow partial true, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-object-doesnt-exist">1.32
Delete message with allow partial true, multiple objects, object doesn’t
exist</a></li>
<li><a href="#sec:delete-message-with-unique-key-addressing">1.33 Delete
message with unique key addressing</a></li>
<li><a
href="#sec:delete-message-with-wildcard-search-path-valid-objects">1.34
Delete message with wildcard search path, valid objects</a></li>
<li><a
href="#sec:delete-message-with-search-expression-search-path">1.35
Delete message with search expression search path</a></li>
<li><a href="#sec:get-message-with-full-parameter-path">1.36 Get message
with full parameter path</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-same-object">1.37
Get message with multiple full parameter paths, same object</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-different-objects">1.38
Get message with multiple full parameter paths, different
objects</a></li>
<li><a href="#sec:get-message-with-object-path">1.39 Get message with
object path</a></li>
<li><a href="#sec:get-message-with-object-instance-path">1.40 Get
message with object instance path</a></li>
<li><a href="#sec:get-message-with-invalid-parameter">1.41 Get message
with invalid parameter</a></li>
<li><a
href="#sec:get-message-with-invalid-parameter-and-valid-parameter">1.42
Get message with invalid parameter and valid parameter</a></li>
<li><a href="#sec:get-message-using-unique-key-addressing">1.43 Get
message using unique key addressing</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-full-parameter">1.44
Get message using wildcard search path on full parameter</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-object-path">1.45
Get message using wildcard search path on object path</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-equivalence">1.46
Get message using search expression search path (equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-non-equivalence">1.47
Get message using search expression search path
(non-equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-greater-comparison">1.48
Get message using search expression search path (exclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-lesser-comparison">1.49
Get message using search expression search path (exclusive lesser
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-greater-comparison">1.50
Get message using search expression search path (inclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-lesser-comparison">1.51
Get message using search expression search path (inclusive lesser
comparison)</a></li>
<li><a
href="#sec:notify---subscription-creation-using-value-change">1.52
Notify - Subscription creation using Value Change</a></li>
<li><a
href="#sec:notify---subscription-deletion-using-value-change">1.53
Notify - Subscription Deletion Using Value Change</a></li>
<li><a href="#sec:notification-retry-using-value-change">1.54
Notification Retry using Value Change</a></li>
<li><a href="#sec:subscription-expiration-using-value-change">1.55
Subscription Expiration using Value Change</a></li>
<li><a href="#sec:notification-retry-expiration-using-value-change">1.56
Notification Retry Expiration using Value Change</a></li>
<li><a href="#sec:objectcreation-notification">1.57 ObjectCreation
Notification</a></li>
<li><a href="#sec:objectdeletion-notification">1.58 ObjectDeletion
Notification</a></li>
<li><a href="#sec:event-notification-using-periodic">1.59 Event
Notification using Periodic!</a></li>
<li><a href="#sec:onboardrequest-notification">1.60 OnBoardRequest
Notification</a></li>
<li><a href="#sec:operate-message-using-reboot-with-send_resp-true">1.61
Operate message using Reboot() with send_resp true</a></li>
<li><a
href="#sec:operate-message-using-reboot-with-send_resp-false">1.62
Operate message using Reboot() with send_resp false</a></li>
<li><a
href="#sec:operate-message-using-input-arguments-deprecated-by-1.79">1.63
Operate message using input arguments (DEPRECATED by 1.79)</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-true">1.64
Asynchronous operation with send_resp true</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-false">1.65
Asynchronous operation with send_resp false</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-true">1.66
GetInstances using a single object, first_level_only true</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-false">1.67
GetInstances using a single object, first_level_only false</a></li>
<li><a href="#sec:getinstances-with-multiple-objects">1.68 GetInstances
with multiple objects</a></li>
<li><a href="#sec:deleted"><em>1.69 DELETED</em></a></li>
<li><a href="#sec:getinstances-with-wildcard-search-path">1.70
GetInstances with wildcard search path</a></li>
<li><a href="#sec:getinstances-with-search-expression-search-path">1.71
GetInstances with search expression search path</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-false-all-options">1.72
GetSupportedDM using a single object, first_level_only false, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-all-options">1.73
GetSupportedDM using a single object, first_level_only true, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-no-options">1.74
GetSupportedDM using a single object, first_level_only true, no
options</a></li>
<li><a
href="#sec:getsupporteddm-using-multiple-objects-first_level_only-true-all-options">1.75
GetSupportedDM using multiple objects, first_level_only true, all
options</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-all-options">1.76
GetSupportedDM on root object, all options</a></li>
<li><a href="#sec:getsupporteddm-on-unsupported-object">1.77
GetSupportedDM on unsupported object</a></li>
<li><a
href="#sec:removal-of-subscriptions-that-have-no-associated-controller">1.78
Removal of subscriptions that have no associated controller</a></li>
<li><a href="#sec:operate-message-using-input-arguments">1.79 Operate
message using input arguments</a></li>
<li><a href="#sec:getsupportedprotocol">1.80
GetSupportedProtocol</a></li>
<li><a href="#sec:automatic-unique-key-generation">1.81 Automatic unique
key generation</a></li>
<li><a href="#sec:get-message-with-unmatched-search-expression">1.82 Get
message with unmatched search expression</a></li>
<li><a
href="#sec:getinstances-message-with-unmatched-search-expression">1.83
GetInstances message with unmatched search expression</a></li>
<li><a href="#sec:notification---subscription-using-search-paths">1.84
Notification - Subscription using search paths</a></li>
<li><a
href="#sec:for-future-work-get-message-with-unresolved-instances---addressing-by-instance-number">1.85
(For future work) Get message with unresolved instances - addressing by
instance number</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-a-search-path">1.86
Get message with unresolved instances - using a search path</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-an-object-path">1.87
Get message with unresolved instances - using an object path</a></li>
<li><a href="#sec:add-message-fails-when-unique-key-is-invalid">1.88 Add
message fails when unique key is invalid</a></li>
<li><a href="#sec:get-message-using-max_depth">1.89 Get message using
max_depth</a></li>
<li><a
href="#sec:delete-message-with-search-expression-that-matches-no-objects">1.90
Delete message with search expression that matches no objects</a></li>
<li><a href="#sec:unknown-arguments-in-an-operate-message">1.91 Unknown
arguments in an Operate message</a></li>
<li><a href="#sec:agent-uses-default-values-for-operate-arguments">1.92
Agent uses default values for Operate arguments</a></li>
<li><a href="#sec:subscription-using-triggeraction-config">1.93
Subscription using TriggerAction Config</a></li>
<li><a href="#sec:subscription-using-triggeraction-notifyandconfig">1.94
Subscription using TriggerAction NotifyAndConfig</a></li>
<li><a href="#sec:add-message-with-search-expression">1.95 Add message
with search expression</a></li>
<li><a href="#sec:non-functional-unique-key-immutability">1.96
Non-functional Unique Key Immutability</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-commands">1.97
GetSupportedDM on root object, commands</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-events">1.98
GetSupportedDM on root object, events</a></li>
</ul></li>
<li><a href="#sec:authentication-and-access-control-test-cases">2
Authentication and Access Control Test Cases</a>
<ul>
<li><a
href="#sec:agent-does-not-accept-messages-from-its-own-endpoint-id">2.1
Agent does not accept messages from its own Endpoint ID</a></li>
<li><a
href="#sec:agent-rejects-messages-that-do-not-contain-its-to_id-in-the-usp-record">2.2
Agent rejects messages that do not contain its to_id in the USP
Record</a></li>
<li><a
href="#sec:agent-does-not-process-messages-without-s-certificate-information---deprecated">2.3
Agent does not process messages without ’s certificate information -
DEPRECATED</a></li>
<li><a
href="#sec:agent-rejects-messages-from-endpoint-ids-that-are-not-in-subjectaltname---deprecated">2.4
Agent rejects messages from Endpoint IDs that are not in subjectAltName
- DEPRECATED</a></li>
<li><a
href="#sec:agent-use-of-self-signed-certificates---deprecated">2.5 Agent
use of self-signed certificates - DEPRECATED</a></li>
<li><a href="#sec:connecting-without-absolute-time">2.6 Connecting
without absolute time</a></li>
<li><a
href="#sec:agent-ignores-unsigned-or-invalid-record-signatures">2.7
Agent ignores unsigned or invalid Record signatures</a></li>
<li><a href="#sec:agent-ignores-invalid-tls-certificate">2.8 Agent
ignores invalid TLS certificate</a></li>
<li><a href="#sec:use-of-the-untrusted-role">2.9 Use of the Untrusted
role</a></li>
<li><a href="#sec:adding-a-role">2.10 Adding a Role</a></li>
<li><a href="#sec:permissions---object-creation-allowed">2.11
Permissions - Object Creation Allowed</a></li>
<li><a href="#sec:permissions---object-creation-not-allowed">2.12
Permissions - Object Creation Not Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-allowed">2.13
Permissions - Object Deletion Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-not-allowed">2.14
Permissions - Object Deletion Not Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-allowed">2.15
Permissions - Parameter Update Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-not-allowed">2.16
Permissions - Parameter Update Not Allowed</a></li>
<li><a href="#sec:permissions---operation-allowed">2.17 Permissions -
Operation Allowed</a></li>
<li><a href="#sec:permissions---operation-not-allowed">2.18 Permissions
- Operation Not Allowed</a></li>
<li><a
href="#sec:permissions---value-change-notification-allowed-on-parameter">2.19
Permissions - Value Change Notification Allowed on Parameter</a></li>
<li><a
href="#sec:permissions---value-change-notification-not-allowed-on-parameter">2.20
Permissions - Value Change Notification Not Allowed on
Parameter</a></li>
<li><a href="#sec:permissions---overlapping-permissions">2.21
Permissions - Overlapping Permissions</a></li>
<li><a
href="#sec:using-get-when-no-read-permissions-are-available-on-some-parameters">2.22
Using Get when no read permissions are available on some
parameters</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-true-required-parameters-fail">2.23
Permissions - Add message with search path, allow partial true, required
parameters fail</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-false-required-parameters-fail">2.24
Permissions - Add message with search path, allow partial false,
required parameters fail</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-omitted">2.25
Permissions - Parameter within added object not allowed,
omitted</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-included">2.26
Permissions - Parameter within added object not allowed,
included</a></li>
<li><a href="#sec:use-of-securedrole">2.27 Use of SecuredRole</a></li>
</ul></li>
<li><a href="#sec:usp-record-test-cases">3 USP Record Test Cases</a>
<ul>
<li><a href="#sec:bad-request-outside-a-session-context">3.1 Bad request
outside a session context</a></li>
<li><a href="#sec:agent-verifies-non-payload-field-integrity">3.2 Agent
Verifies Non-Payload Field Integrity</a></li>
<li><a
href="#sec:agent-rejects-invalid-signature-starting-a-session-context">3.3
Agent rejects invalid signature starting a session context</a></li>
<li><a href="#sec:using-tls-for-usp-record-integrity">3.4 Using TLS for
USP Record Integrity</a></li>
<li><a href="#sec:failure-to-establish-tls">3.5 Failure to Establish
TLS</a></li>
<li><a
href="#sec:agent-does-not-accept-tls-renegotiation-for-e2e-message-exchange">3.6
Agent does not accept TLS renegotiation for E2E message
exchange</a></li>
<li><a href="#sec:use-of-x.509-certificates">3.7 Use of X.509
Certificates</a></li>
<li><a href="#sec:establishing-a-session-context">3.8 Establishing a
Session Context</a></li>
<li><a href="#sec:receipt-of-a-record-out-of-a-session-context">3.9
Receipt of a Record out of a Session Context</a></li>
<li><a href="#sec:session-context-expiration">3.10 Session Context
Expiration</a></li>
<li><a href="#sec:use-of-sequence-id-and-expected-id">3.11 Use of
Sequence ID and Expected ID</a></li>
<li><a href="#sec:preservation-of-usp-records">3.12 Preservation of USP
Records</a></li>
<li><a
href="#sec:agent-rejects-records-with-different-payload-security-than-the-established-context">3.13
Agent Rejects Records with Different Payload Security than the
Established Context</a></li>
<li><a href="#sec:use-of-retransmit_id">3.14 Use of
retransmit_id</a></li>
<li><a href="#sec:handling-duplicate-records">3.15 Handling Duplicate
Records</a></li>
</ul></li>
<li><a href="#sec:general-mtp-test-cases">4 General MTP Test Cases</a>
<ul>
<li><a href="#sec:use-of-x.509-certificates-at-the-mtp-layer">4.1 Use of
X.509 certificates at the MTP layer</a></li>
</ul></li>
<li><a href="#sec:coap-test-cases-deprecated">5 CoAP Test Cases
(DEPRECATED)</a>
<ul>
<li><a href="#sec:mapping-a-usp-record-to-a-coap-message-deprecated">5.1
Mapping a USP Record to a CoAP message (DEPRECATED)</a></li>
<li><a
href="#sec:usp-records-that-exceed-coap-message-size-deprecated">5.2 USP
Records that exceed CoAP message size (DEPRECATED)</a></li>
<li><a href="#sec:successful-coap-exchange-deprecated">5.3 Successful
CoAP exchange (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---timeout-deprecated">5.4 Failed
CoAP exchange - timeout (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---invalid-method-deprecated">5.5
Failed CoAP Exchange - Invalid Method (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-content-format-deprecated">5.6
Failed CoAP Exchange - Invalid Content-Format (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-usp-record-deprecated">5.7
Failed CoAP Exchange - Invalid USP Record (DEPRECATED)</a></li>
<li><a href="#sec:use-of-dtls-deprecated">5.8 Use of DTLS
(DEPRECATED)</a></li>
</ul></li>
<li><a href="#sec:stomp-test-cases">6 STOMP Test Cases</a>
<ul>
<li><a href="#sec:support-of-required-profiles">6.1 Support of Required
Profiles</a></li>
<li><a href="#sec:stomp-session-establishment">6.2 STOMP session
establishment</a></li>
<li><a href="#sec:stomp-connection-retry">6.3 STOMP Connection
Retry</a></li>
<li><a
href="#sec:successful-usp-message-over-stomp-with-required-headers">6.4
Successful USP message over STOMP with required headers</a></li>
<li><a href="#sec:stomp-destination---provided-in-subscribe-dest">6.5
STOMP destination - provided in subscribe-dest</a></li>
<li><a href="#sec:stomp-destination---configured-in-usp-data-model">6.6
STOMP destination - configured in USP data model</a></li>
<li><a
href="#sec:stomp-destination---terminates-unconfigured-session">6.7
STOMP Destination - terminates unconfigured session</a></li>
<li><a href="#sec:use-of-stomp-heartbeat-mechanism">6.8 Use of STOMP
heartbeat mechanism</a></li>
<li><a href="#sec:error-handling---unprocessed-record">6.9 Error
Handling - Unprocessed Record</a></li>
<li><a href="#sec:agents-stomp-destination-is-changed">6.10 Agent’s
STOMP destination is changed</a></li>
<li><a href="#sec:stomp---use-of-tls">6.11 STOMP - Use of TLS</a></li>
<li><a href="#sec:stomp---use-of-connect-record">6.12 STOMP - Use of
Connect Record</a></li>
</ul></li>
<li><a href="#sec:websocket-test-cases">7 WebSocket Test Cases</a>
<ul>
<li><a href="#sec:session-establishment">7.1 Session
Establishment</a></li>
<li><a href="#sec:use-of-only-one-session">7.2 Use of only one
session</a></li>
<li><a href="#sec:agent-session-acceptance-from-controller">7.3 Agent
session acceptance from Controller</a></li>
<li><a href="#sec:closing-a-websocket-connection">7.4 Closing a
WebSocket Connection</a></li>
<li><a href="#sec:rejection-of-session-establishment---deprecated">7.5
Rejection of Session Establishment - DEPRECATED</a></li>
<li><a href="#sec:error-handling---unprocessed-records">7.6 Error
Handling - Unprocessed Records</a></li>
<li><a href="#sec:use-of-ping-and-pong-frames">7.7 Use of Ping and Pong
frames</a></li>
<li><a href="#sec:websocket-session-retry">7.8 WebSocket Session
Retry</a></li>
<li><a href="#sec:use-of-tls">7.9 Use of TLS</a></li>
<li><a href="#sec:websocket---use-of-connect-record">7.10 WebSocket -
Use of Connect Record</a></li>
<li><a
href="#sec:websocket-response-does-not-include-bbf-usp-protocol">7.11
Websocket response does not include bbf-usp-protocol</a></li>
</ul></li>
<li><a href="#sec:discovery-test-cases">8 Discovery Test Cases</a>
<ul>
<li><a href="#sec:dhcp-discovery---agent-request-requirements">8.1 DHCP
Discovery - Agent Request Requirements</a></li>
<li><a
href="#sec:dhcp-discovery---agent-handling-of-received-options">8.2 DHCP
Discovery - Agent handling of received options</a></li>
<li><a href="#sec:dhcp-discovery---fqdn-leads-to-dns-query">8.3 DHCP
Discovery - FQDN Leads to DNS Query</a></li>
<li><a href="#sec:mdns">8.4 mDNS</a></li>
<li><a href="#sec:mdns-and-message-transfer-protocols">8.5 mDNS and
Message Transfer Protocols</a></li>
<li><a href="#sec:dns---dns-record-requirements">8.6 DNS - DNS Record
Requirements</a></li>
<li><a href="#sec:mdns-request-response">8.7 mDNS request
response</a></li>
</ul></li>
<li><a href="#sec:functionality-test-cases">9 Functionality Test
Cases</a>
<ul>
<li><a href="#sec:use-of-the-timer-event-deprecated-by-9.11">9.1 Use of
the Timer! Event (DEPRECATED by 9.11)</a></li>
<li><a href="#sec:use-of-device.localagent.addcertificate">9.2 Use of
Device.LocalAgent.AddCertificate()</a></li>
<li><a
href="#sec:upgraded-the-agents-firmware---autoactivate-enabled">9.3
Upgraded the Agent’s Firmware - Autoactivate enabled</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-immediate">9.4
Upgrading the Agent’s Firmware - Using TimeWindow, Immediate</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-anytime">9.5
Upgrading the Agent’s Firmware - Using TimeWindow, AnyTime</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---validated-firmware">9.6
Upgrading the Agent’s Firmware - Validated Firmware</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---download-to-active-bank">9.7
Upgrading the Agent’s Firmware - Download to Active Bank</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---cancelling-a-request-using-the-cancel-command">9.8
Upgrading the Agent’s Firmware - Cancelling a request using the Cancel()
command</a></li>
<li><a href="#sec:adding-a-new-controller---onboardrequest">9.9 Adding a
New Controller - OnBoardRequest</a></li>
<li><a href="#sec:use-of-the-boot-event-and-bootparameters">9.10 Use of
the Boot! event and BootParameters</a></li>
<li><a href="#sec:use-of-the-timer-event">9.11 Use of the Timer!
Event</a></li>
</ul></li>
<li><a href="#sec:bulk-data-collection-test-cases">10 Bulk Data
Collection Test Cases</a>
<ul>
<li><a href="#sec:use-bulkdata-collection-using-http-and-json">10.1 Use
BulkData collection using HTTP and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-json">10.2 Use
BulkData collection using HTTPS and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-http-and-csv">10.3 Use
BulkData collection using HTTP and CSV</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-csv">10.4 Use
BulkData collection using HTTPS and CSV</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-uri-parameters">10.5
Use BulkData collection using HTTP with URI Parameters</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-https-with-uri-parameters">10.6
Use BulkData collection using HTTPS with URI Parameters</a></li>
<li><a href="#sec:bulkdata-collection-retry-mechanism-over-http">10.7
BulkData collection retry mechanism over HTTP</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-wildcard-parameter">10.8
Use BulkData collection using HTTP with wildcard parameter</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-object-path">10.9 Use
BulkData collection using HTTP with Object Path</a></li>
<li><a href="#sec:use-bulkdata-collection-push-event">10.10 Use BulkData
collection Push event</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-wildcard-path">10.11
Use BulkData collection Push event with Wildcard path</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-object-path">10.12
Use BulkData collection Push event with Object path</a></li>
<li><a href="#sec:use-bulkdata-collection-over-mqtt">10.13 Use BulkData
collection over MQTT</a></li>
</ul></li>
<li><a href="#sec:mqtt-test-cases">11 MQTT Test Cases</a>
<ul>
<li><a href="#sec:support-of-required-mqtt-profiles">11.1 Support of
Required MQTT Profiles</a></li>
<li><a
href="#sec:mqtt-session-establishment-using-a-connect-packet">11.2 MQTT
session establishment using a CONNECT packet</a></li>
<li><a href="#sec:mqtt-use-of-tls">11.3 MQTT Use of TLS</a></li>
<li><a href="#sec:mqtt-5.0-clientid">11.4 MQTT 5.0 ClientID</a></li>
<li><a href="#sec:mqtt-clientid-persistence">11.5 MQTT ClientID
Persistence</a></li>
<li><a href="#sec:mqtt-message-retry">11.6 MQTT Message Retry</a></li>
<li><a href="#sec:mqtt-keep-alive">11.7 MQTT Keep Alive</a></li>
<li><a href="#sec:mqtt-subscribe-packet">11.8 MQTT SUBSCRIBE
Packet</a></li>
<li><a href="#sec:mqtt-new-subscription">11.9 MQTT New
Subscription</a></li>
<li><a href="#sec:mqtt-no-topic-in-connack">11.10 MQTT No Topic in
CONNACK</a></li>
<li><a href="#sec:mqtt-failure-to-subscribe">11.11 MQTT Failure to
Subscribe</a></li>
<li><a href="#sec:mqtt-publish-packet">11.12 MQTT PUBLISH
Packet</a></li>
<li><a href="#sec:mqtt-qos">11.13 MQTT QoS</a></li>
<li><a href="#sec:mqtt-reply-to-topic">11.14 MQTT Reply to
Topic</a></li>
<li><a href="#sec:mqtt-5.0-content-type">11.15 MQTT 5.0 Content
Type</a></li>
<li><a href="#sec:mqtt-connection-retry">11.16 MQTT Connection
Retry</a></li>
<li><a href="#sec:mqtt---use-of-connect-record">11.17 MQTT - Use of
Connect Record</a></li>
</ul></li>
</ul>
    </nav>
    <nav id="SIDEBAR" role="doc-toc">
<ul>
<li><a href="#sec:cover-page">Cover Page</a>
<ul>
<li><a href="#sec:executive-summary">Executive Summary</a></li>
<li><a href="#sec:purpose">Purpose</a></li>
<li><a href="#sec:scope">Scope</a></li>
</ul></li>
<li><a href="#sec:test-setup">Test Setup</a>
<ul>
<li><a href="#sec:test-equipment">Test Equipment</a></li>
<li><a href="#sec:test-setup-and-execution">Test Setup and
Execution</a></li>
<li><a href="#sec:universal-test-metrics">Universal Test
Metrics</a></li>
<li><a href="#sec:notes-about-test-case-descriptions">Notes about test
case descriptions</a></li>
</ul></li>
<li><a href="#sec:messages-and-path-names">1 Messages and Path Names</a>
<ul>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-succeed">1.1
Add message with allow partial false, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-single-object-required-parameters-succeed">1.2
Add message with allow partial true, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-fail">1.3
Add message with allow partial false, single object, required parameters
fail</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-invalid-object">1.4
Add message with allow partial false, single invalid object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects">1.5
Add message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-with-an-invalid-object">1.6
Add message with allow partial false, multiple objects with an invalid
object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.7
Add message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-invalid-type-single-object">1.8
Add message with allow partial true, required parameters fail, invalid
type, single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-multiple-objects">1.9
Add message with allow partial true, required parameters fail, multiple
objects</a></li>
<li><a href="#sec:add-message-with-unique-key-addressing-in-path">1.10
Add message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-pass">1.11
Set message with allow partial false, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameters-pass">1.12
Set message with allow partial true, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects">1.13
Set message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-fail">1.14
Set message with allow partial false, required parameters fail</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.15
Set message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameter-fails-multiple-objects">1.16
Set message with allow partial true, required parameter fails, multiple
objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-non-required-parameter-fails-multiple-parameters">1.17
Set message with allow partial true, non-required parameter fails,
multiple parameters</a></li>
<li><a href="#sec:set-message-with-unique-key-addressing-in-path">1.18
Set message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-pass">1.19
Set message with wildcard search path, allow partial false, required
parameters pass</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-fail">1.20
Set message with wildcard search path, allow partial false, required
parameters fail</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-true-required-parameters-fail">1.21
Set message with wildcard search path, allow partial true, required
parameters fail</a></li>
<li><a href="#sec:set-message-with-search-expression-search-path">1.22
Set message with search expression search path</a></li>
<li><a href="#sec:set-message-with-path-that-matches-no-objects">1.23
Set message with path that matches no objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-valid-object-instance">1.24
Delete message with allow partial false, valid object instance</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-object-instance-doesnt-exist">1.25
Delete message with allow partial false, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-invalid-object">1.26
Delete message with allow partial false, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects">1.27
Delete message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects-invalid-object">1.28
Delete message with allow partial false, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-object-instance-doesnt-exist">1.29
Delete message with allow partial true, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-invalid-object">1.30
Delete message with allow partial true, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-invalid-object">1.31
Delete message with allow partial true, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-object-doesnt-exist">1.32
Delete message with allow partial true, multiple objects, object doesn’t
exist</a></li>
<li><a href="#sec:delete-message-with-unique-key-addressing">1.33 Delete
message with unique key addressing</a></li>
<li><a
href="#sec:delete-message-with-wildcard-search-path-valid-objects">1.34
Delete message with wildcard search path, valid objects</a></li>
<li><a
href="#sec:delete-message-with-search-expression-search-path">1.35
Delete message with search expression search path</a></li>
<li><a href="#sec:get-message-with-full-parameter-path">1.36 Get message
with full parameter path</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-same-object">1.37
Get message with multiple full parameter paths, same object</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-different-objects">1.38
Get message with multiple full parameter paths, different
objects</a></li>
<li><a href="#sec:get-message-with-object-path">1.39 Get message with
object path</a></li>
<li><a href="#sec:get-message-with-object-instance-path">1.40 Get
message with object instance path</a></li>
<li><a href="#sec:get-message-with-invalid-parameter">1.41 Get message
with invalid parameter</a></li>
<li><a
href="#sec:get-message-with-invalid-parameter-and-valid-parameter">1.42
Get message with invalid parameter and valid parameter</a></li>
<li><a href="#sec:get-message-using-unique-key-addressing">1.43 Get
message using unique key addressing</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-full-parameter">1.44
Get message using wildcard search path on full parameter</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-object-path">1.45
Get message using wildcard search path on object path</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-equivalence">1.46
Get message using search expression search path (equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-non-equivalence">1.47
Get message using search expression search path
(non-equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-greater-comparison">1.48
Get message using search expression search path (exclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-lesser-comparison">1.49
Get message using search expression search path (exclusive lesser
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-greater-comparison">1.50
Get message using search expression search path (inclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-lesser-comparison">1.51
Get message using search expression search path (inclusive lesser
comparison)</a></li>
<li><a
href="#sec:notify---subscription-creation-using-value-change">1.52
Notify - Subscription creation using Value Change</a></li>
<li><a
href="#sec:notify---subscription-deletion-using-value-change">1.53
Notify - Subscription Deletion Using Value Change</a></li>
<li><a href="#sec:notification-retry-using-value-change">1.54
Notification Retry using Value Change</a></li>
<li><a href="#sec:subscription-expiration-using-value-change">1.55
Subscription Expiration using Value Change</a></li>
<li><a href="#sec:notification-retry-expiration-using-value-change">1.56
Notification Retry Expiration using Value Change</a></li>
<li><a href="#sec:objectcreation-notification">1.57 ObjectCreation
Notification</a></li>
<li><a href="#sec:objectdeletion-notification">1.58 ObjectDeletion
Notification</a></li>
<li><a href="#sec:event-notification-using-periodic">1.59 Event
Notification using Periodic!</a></li>
<li><a href="#sec:onboardrequest-notification">1.60 OnBoardRequest
Notification</a></li>
<li><a href="#sec:operate-message-using-reboot-with-send_resp-true">1.61
Operate message using Reboot() with send_resp true</a></li>
<li><a
href="#sec:operate-message-using-reboot-with-send_resp-false">1.62
Operate message using Reboot() with send_resp false</a></li>
<li><a
href="#sec:operate-message-using-input-arguments-deprecated-by-1.79">1.63
Operate message using input arguments (DEPRECATED by 1.79)</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-true">1.64
Asynchronous operation with send_resp true</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-false">1.65
Asynchronous operation with send_resp false</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-true">1.66
GetInstances using a single object, first_level_only true</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-false">1.67
GetInstances using a single object, first_level_only false</a></li>
<li><a href="#sec:getinstances-with-multiple-objects">1.68 GetInstances
with multiple objects</a></li>
<li><a href="#sec:deleted"><em>1.69 DELETED</em></a></li>
<li><a href="#sec:getinstances-with-wildcard-search-path">1.70
GetInstances with wildcard search path</a></li>
<li><a href="#sec:getinstances-with-search-expression-search-path">1.71
GetInstances with search expression search path</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-false-all-options">1.72
GetSupportedDM using a single object, first_level_only false, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-all-options">1.73
GetSupportedDM using a single object, first_level_only true, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-no-options">1.74
GetSupportedDM using a single object, first_level_only true, no
options</a></li>
<li><a
href="#sec:getsupporteddm-using-multiple-objects-first_level_only-true-all-options">1.75
GetSupportedDM using multiple objects, first_level_only true, all
options</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-all-options">1.76
GetSupportedDM on root object, all options</a></li>
<li><a href="#sec:getsupporteddm-on-unsupported-object">1.77
GetSupportedDM on unsupported object</a></li>
<li><a
href="#sec:removal-of-subscriptions-that-have-no-associated-controller">1.78
Removal of subscriptions that have no associated controller</a></li>
<li><a href="#sec:operate-message-using-input-arguments">1.79 Operate
message using input arguments</a></li>
<li><a href="#sec:getsupportedprotocol">1.80
GetSupportedProtocol</a></li>
<li><a href="#sec:automatic-unique-key-generation">1.81 Automatic unique
key generation</a></li>
<li><a href="#sec:get-message-with-unmatched-search-expression">1.82 Get
message with unmatched search expression</a></li>
<li><a
href="#sec:getinstances-message-with-unmatched-search-expression">1.83
GetInstances message with unmatched search expression</a></li>
<li><a href="#sec:notification---subscription-using-search-paths">1.84
Notification - Subscription using search paths</a></li>
<li><a
href="#sec:for-future-work-get-message-with-unresolved-instances---addressing-by-instance-number">1.85
(For future work) Get message with unresolved instances - addressing by
instance number</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-a-search-path">1.86
Get message with unresolved instances - using a search path</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-an-object-path">1.87
Get message with unresolved instances - using an object path</a></li>
<li><a href="#sec:add-message-fails-when-unique-key-is-invalid">1.88 Add
message fails when unique key is invalid</a></li>
<li><a href="#sec:get-message-using-max_depth">1.89 Get message using
max_depth</a></li>
<li><a
href="#sec:delete-message-with-search-expression-that-matches-no-objects">1.90
Delete message with search expression that matches no objects</a></li>
<li><a href="#sec:unknown-arguments-in-an-operate-message">1.91 Unknown
arguments in an Operate message</a></li>
<li><a href="#sec:agent-uses-default-values-for-operate-arguments">1.92
Agent uses default values for Operate arguments</a></li>
<li><a href="#sec:subscription-using-triggeraction-config">1.93
Subscription using TriggerAction Config</a></li>
<li><a href="#sec:subscription-using-triggeraction-notifyandconfig">1.94
Subscription using TriggerAction NotifyAndConfig</a></li>
<li><a href="#sec:add-message-with-search-expression">1.95 Add message
with search expression</a></li>
<li><a href="#sec:non-functional-unique-key-immutability">1.96
Non-functional Unique Key Immutability</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-commands">1.97
GetSupportedDM on root object, commands</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-events">1.98
GetSupportedDM on root object, events</a></li>
</ul></li>
<li><a href="#sec:authentication-and-access-control-test-cases">2
Authentication and Access Control Test Cases</a>
<ul>
<li><a
href="#sec:agent-does-not-accept-messages-from-its-own-endpoint-id">2.1
Agent does not accept messages from its own Endpoint ID</a></li>
<li><a
href="#sec:agent-rejects-messages-that-do-not-contain-its-to_id-in-the-usp-record">2.2
Agent rejects messages that do not contain its to_id in the USP
Record</a></li>
<li><a
href="#sec:agent-does-not-process-messages-without-s-certificate-information---deprecated">2.3
Agent does not process messages without ’s certificate information -
DEPRECATED</a></li>
<li><a
href="#sec:agent-rejects-messages-from-endpoint-ids-that-are-not-in-subjectaltname---deprecated">2.4
Agent rejects messages from Endpoint IDs that are not in subjectAltName
- DEPRECATED</a></li>
<li><a
href="#sec:agent-use-of-self-signed-certificates---deprecated">2.5 Agent
use of self-signed certificates - DEPRECATED</a></li>
<li><a href="#sec:connecting-without-absolute-time">2.6 Connecting
without absolute time</a></li>
<li><a
href="#sec:agent-ignores-unsigned-or-invalid-record-signatures">2.7
Agent ignores unsigned or invalid Record signatures</a></li>
<li><a href="#sec:agent-ignores-invalid-tls-certificate">2.8 Agent
ignores invalid TLS certificate</a></li>
<li><a href="#sec:use-of-the-untrusted-role">2.9 Use of the Untrusted
role</a></li>
<li><a href="#sec:adding-a-role">2.10 Adding a Role</a></li>
<li><a href="#sec:permissions---object-creation-allowed">2.11
Permissions - Object Creation Allowed</a></li>
<li><a href="#sec:permissions---object-creation-not-allowed">2.12
Permissions - Object Creation Not Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-allowed">2.13
Permissions - Object Deletion Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-not-allowed">2.14
Permissions - Object Deletion Not Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-allowed">2.15
Permissions - Parameter Update Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-not-allowed">2.16
Permissions - Parameter Update Not Allowed</a></li>
<li><a href="#sec:permissions---operation-allowed">2.17 Permissions -
Operation Allowed</a></li>
<li><a href="#sec:permissions---operation-not-allowed">2.18 Permissions
- Operation Not Allowed</a></li>
<li><a
href="#sec:permissions---value-change-notification-allowed-on-parameter">2.19
Permissions - Value Change Notification Allowed on Parameter</a></li>
<li><a
href="#sec:permissions---value-change-notification-not-allowed-on-parameter">2.20
Permissions - Value Change Notification Not Allowed on
Parameter</a></li>
<li><a href="#sec:permissions---overlapping-permissions">2.21
Permissions - Overlapping Permissions</a></li>
<li><a
href="#sec:using-get-when-no-read-permissions-are-available-on-some-parameters">2.22
Using Get when no read permissions are available on some
parameters</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-true-required-parameters-fail">2.23
Permissions - Add message with search path, allow partial true, required
parameters fail</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-false-required-parameters-fail">2.24
Permissions - Add message with search path, allow partial false,
required parameters fail</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-omitted">2.25
Permissions - Parameter within added object not allowed,
omitted</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-included">2.26
Permissions - Parameter within added object not allowed,
included</a></li>
<li><a href="#sec:use-of-securedrole">2.27 Use of SecuredRole</a></li>
</ul></li>
<li><a href="#sec:usp-record-test-cases">3 USP Record Test Cases</a>
<ul>
<li><a href="#sec:bad-request-outside-a-session-context">3.1 Bad request
outside a session context</a></li>
<li><a href="#sec:agent-verifies-non-payload-field-integrity">3.2 Agent
Verifies Non-Payload Field Integrity</a></li>
<li><a
href="#sec:agent-rejects-invalid-signature-starting-a-session-context">3.3
Agent rejects invalid signature starting a session context</a></li>
<li><a href="#sec:using-tls-for-usp-record-integrity">3.4 Using TLS for
USP Record Integrity</a></li>
<li><a href="#sec:failure-to-establish-tls">3.5 Failure to Establish
TLS</a></li>
<li><a
href="#sec:agent-does-not-accept-tls-renegotiation-for-e2e-message-exchange">3.6
Agent does not accept TLS renegotiation for E2E message
exchange</a></li>
<li><a href="#sec:use-of-x.509-certificates">3.7 Use of X.509
Certificates</a></li>
<li><a href="#sec:establishing-a-session-context">3.8 Establishing a
Session Context</a></li>
<li><a href="#sec:receipt-of-a-record-out-of-a-session-context">3.9
Receipt of a Record out of a Session Context</a></li>
<li><a href="#sec:session-context-expiration">3.10 Session Context
Expiration</a></li>
<li><a href="#sec:use-of-sequence-id-and-expected-id">3.11 Use of
Sequence ID and Expected ID</a></li>
<li><a href="#sec:preservation-of-usp-records">3.12 Preservation of USP
Records</a></li>
<li><a
href="#sec:agent-rejects-records-with-different-payload-security-than-the-established-context">3.13
Agent Rejects Records with Different Payload Security than the
Established Context</a></li>
<li><a href="#sec:use-of-retransmit_id">3.14 Use of
retransmit_id</a></li>
<li><a href="#sec:handling-duplicate-records">3.15 Handling Duplicate
Records</a></li>
</ul></li>
<li><a href="#sec:general-mtp-test-cases">4 General MTP Test Cases</a>
<ul>
<li><a href="#sec:use-of-x.509-certificates-at-the-mtp-layer">4.1 Use of
X.509 certificates at the MTP layer</a></li>
</ul></li>
<li><a href="#sec:coap-test-cases-deprecated">5 CoAP Test Cases
(DEPRECATED)</a>
<ul>
<li><a href="#sec:mapping-a-usp-record-to-a-coap-message-deprecated">5.1
Mapping a USP Record to a CoAP message (DEPRECATED)</a></li>
<li><a
href="#sec:usp-records-that-exceed-coap-message-size-deprecated">5.2 USP
Records that exceed CoAP message size (DEPRECATED)</a></li>
<li><a href="#sec:successful-coap-exchange-deprecated">5.3 Successful
CoAP exchange (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---timeout-deprecated">5.4 Failed
CoAP exchange - timeout (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---invalid-method-deprecated">5.5
Failed CoAP Exchange - Invalid Method (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-content-format-deprecated">5.6
Failed CoAP Exchange - Invalid Content-Format (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-usp-record-deprecated">5.7
Failed CoAP Exchange - Invalid USP Record (DEPRECATED)</a></li>
<li><a href="#sec:use-of-dtls-deprecated">5.8 Use of DTLS
(DEPRECATED)</a></li>
</ul></li>
<li><a href="#sec:stomp-test-cases">6 STOMP Test Cases</a>
<ul>
<li><a href="#sec:support-of-required-profiles">6.1 Support of Required
Profiles</a></li>
<li><a href="#sec:stomp-session-establishment">6.2 STOMP session
establishment</a></li>
<li><a href="#sec:stomp-connection-retry">6.3 STOMP Connection
Retry</a></li>
<li><a
href="#sec:successful-usp-message-over-stomp-with-required-headers">6.4
Successful USP message over STOMP with required headers</a></li>
<li><a href="#sec:stomp-destination---provided-in-subscribe-dest">6.5
STOMP destination - provided in subscribe-dest</a></li>
<li><a href="#sec:stomp-destination---configured-in-usp-data-model">6.6
STOMP destination - configured in USP data model</a></li>
<li><a
href="#sec:stomp-destination---terminates-unconfigured-session">6.7
STOMP Destination - terminates unconfigured session</a></li>
<li><a href="#sec:use-of-stomp-heartbeat-mechanism">6.8 Use of STOMP
heartbeat mechanism</a></li>
<li><a href="#sec:error-handling---unprocessed-record">6.9 Error
Handling - Unprocessed Record</a></li>
<li><a href="#sec:agents-stomp-destination-is-changed">6.10 Agent’s
STOMP destination is changed</a></li>
<li><a href="#sec:stomp---use-of-tls">6.11 STOMP - Use of TLS</a></li>
<li><a href="#sec:stomp---use-of-connect-record">6.12 STOMP - Use of
Connect Record</a></li>
</ul></li>
<li><a href="#sec:websocket-test-cases">7 WebSocket Test Cases</a>
<ul>
<li><a href="#sec:session-establishment">7.1 Session
Establishment</a></li>
<li><a href="#sec:use-of-only-one-session">7.2 Use of only one
session</a></li>
<li><a href="#sec:agent-session-acceptance-from-controller">7.3 Agent
session acceptance from Controller</a></li>
<li><a href="#sec:closing-a-websocket-connection">7.4 Closing a
WebSocket Connection</a></li>
<li><a href="#sec:rejection-of-session-establishment---deprecated">7.5
Rejection of Session Establishment - DEPRECATED</a></li>
<li><a href="#sec:error-handling---unprocessed-records">7.6 Error
Handling - Unprocessed Records</a></li>
<li><a href="#sec:use-of-ping-and-pong-frames">7.7 Use of Ping and Pong
frames</a></li>
<li><a href="#sec:websocket-session-retry">7.8 WebSocket Session
Retry</a></li>
<li><a href="#sec:use-of-tls">7.9 Use of TLS</a></li>
<li><a href="#sec:websocket---use-of-connect-record">7.10 WebSocket -
Use of Connect Record</a></li>
<li><a
href="#sec:websocket-response-does-not-include-bbf-usp-protocol">7.11
Websocket response does not include bbf-usp-protocol</a></li>
</ul></li>
<li><a href="#sec:discovery-test-cases">8 Discovery Test Cases</a>
<ul>
<li><a href="#sec:dhcp-discovery---agent-request-requirements">8.1 DHCP
Discovery - Agent Request Requirements</a></li>
<li><a
href="#sec:dhcp-discovery---agent-handling-of-received-options">8.2 DHCP
Discovery - Agent handling of received options</a></li>
<li><a href="#sec:dhcp-discovery---fqdn-leads-to-dns-query">8.3 DHCP
Discovery - FQDN Leads to DNS Query</a></li>
<li><a href="#sec:mdns">8.4 mDNS</a></li>
<li><a href="#sec:mdns-and-message-transfer-protocols">8.5 mDNS and
Message Transfer Protocols</a></li>
<li><a href="#sec:dns---dns-record-requirements">8.6 DNS - DNS Record
Requirements</a></li>
<li><a href="#sec:mdns-request-response">8.7 mDNS request
response</a></li>
</ul></li>
<li><a href="#sec:functionality-test-cases">9 Functionality Test
Cases</a>
<ul>
<li><a href="#sec:use-of-the-timer-event-deprecated-by-9.11">9.1 Use of
the Timer! Event (DEPRECATED by 9.11)</a></li>
<li><a href="#sec:use-of-device.localagent.addcertificate">9.2 Use of
Device.LocalAgent.AddCertificate()</a></li>
<li><a
href="#sec:upgraded-the-agents-firmware---autoactivate-enabled">9.3
Upgraded the Agent’s Firmware - Autoactivate enabled</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-immediate">9.4
Upgrading the Agent’s Firmware - Using TimeWindow, Immediate</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-anytime">9.5
Upgrading the Agent’s Firmware - Using TimeWindow, AnyTime</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---validated-firmware">9.6
Upgrading the Agent’s Firmware - Validated Firmware</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---download-to-active-bank">9.7
Upgrading the Agent’s Firmware - Download to Active Bank</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---cancelling-a-request-using-the-cancel-command">9.8
Upgrading the Agent’s Firmware - Cancelling a request using the Cancel()
command</a></li>
<li><a href="#sec:adding-a-new-controller---onboardrequest">9.9 Adding a
New Controller - OnBoardRequest</a></li>
<li><a href="#sec:use-of-the-boot-event-and-bootparameters">9.10 Use of
the Boot! event and BootParameters</a></li>
<li><a href="#sec:use-of-the-timer-event">9.11 Use of the Timer!
Event</a></li>
</ul></li>
<li><a href="#sec:bulk-data-collection-test-cases">10 Bulk Data
Collection Test Cases</a>
<ul>
<li><a href="#sec:use-bulkdata-collection-using-http-and-json">10.1 Use
BulkData collection using HTTP and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-json">10.2 Use
BulkData collection using HTTPS and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-http-and-csv">10.3 Use
BulkData collection using HTTP and CSV</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-csv">10.4 Use
BulkData collection using HTTPS and CSV</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-uri-parameters">10.5
Use BulkData collection using HTTP with URI Parameters</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-https-with-uri-parameters">10.6
Use BulkData collection using HTTPS with URI Parameters</a></li>
<li><a href="#sec:bulkdata-collection-retry-mechanism-over-http">10.7
BulkData collection retry mechanism over HTTP</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-wildcard-parameter">10.8
Use BulkData collection using HTTP with wildcard parameter</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-object-path">10.9 Use
BulkData collection using HTTP with Object Path</a></li>
<li><a href="#sec:use-bulkdata-collection-push-event">10.10 Use BulkData
collection Push event</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-wildcard-path">10.11
Use BulkData collection Push event with Wildcard path</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-object-path">10.12
Use BulkData collection Push event with Object path</a></li>
<li><a href="#sec:use-bulkdata-collection-over-mqtt">10.13 Use BulkData
collection over MQTT</a></li>
</ul></li>
<li><a href="#sec:mqtt-test-cases">11 MQTT Test Cases</a>
<ul>
<li><a href="#sec:support-of-required-mqtt-profiles">11.1 Support of
Required MQTT Profiles</a></li>
<li><a
href="#sec:mqtt-session-establishment-using-a-connect-packet">11.2 MQTT
session establishment using a CONNECT packet</a></li>
<li><a href="#sec:mqtt-use-of-tls">11.3 MQTT Use of TLS</a></li>
<li><a href="#sec:mqtt-5.0-clientid">11.4 MQTT 5.0 ClientID</a></li>
<li><a href="#sec:mqtt-clientid-persistence">11.5 MQTT ClientID
Persistence</a></li>
<li><a href="#sec:mqtt-message-retry">11.6 MQTT Message Retry</a></li>
<li><a href="#sec:mqtt-keep-alive">11.7 MQTT Keep Alive</a></li>
<li><a href="#sec:mqtt-subscribe-packet">11.8 MQTT SUBSCRIBE
Packet</a></li>
<li><a href="#sec:mqtt-new-subscription">11.9 MQTT New
Subscription</a></li>
<li><a href="#sec:mqtt-no-topic-in-connack">11.10 MQTT No Topic in
CONNACK</a></li>
<li><a href="#sec:mqtt-failure-to-subscribe">11.11 MQTT Failure to
Subscribe</a></li>
<li><a href="#sec:mqtt-publish-packet">11.12 MQTT PUBLISH
Packet</a></li>
<li><a href="#sec:mqtt-qos">11.13 MQTT QoS</a></li>
<li><a href="#sec:mqtt-reply-to-topic">11.14 MQTT Reply to
Topic</a></li>
<li><a href="#sec:mqtt-5.0-content-type">11.15 MQTT 5.0 Content
Type</a></li>
<li><a href="#sec:mqtt-connection-retry">11.16 MQTT Connection
Retry</a></li>
<li><a href="#sec:mqtt---use-of-connect-record">11.17 MQTT - Use of
Connect Record</a></li>
</ul></li>
</ul>
    </nav>
<section id="sec:cover-page" class="cover-page unnumbered new-section">
<h1 class="cover-page unnumbered">Cover Page</h1>
<ul class="task-list">
</ul>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="list-of-figures">List of Figures</h3>
<ol>
<li><a href="#fig:basic-test-setup">Basic Test Setup</a></li>
</ol>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="list-of-tables">List of Tables</h3>
<ol>
</ol>
<h3 class="unnumbered unlisted new-page auto-hoverlink"
data-info="header" id="sec:notice">Notice</h3>
<p>The Broadband Forum is a non-profit corporation organized to create
guidelines for broadband network system development and deployment. This
Test Plan is owned and copyrighted by the Broadband Forum, and portions
of this Test Plan may be owned and/or copyrighted by Broadband Forum
members.</p>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="sec:intellectual-property">Intellectual Property</h3>
<p>Recipients of this document are requested to submit, with their
comments, notification of any relevant patent claims or other
intellectual property rights of which they may be aware that might be
infringed by any implementation of this Test Plan, and to provide
supporting documentation.</p>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="sec:terms-of-use">Terms of Use</h3>
<p>Recipients of this document may use it (a) for internal review and
study purposes, (b) to provide to the Broadband Forum the comments and
notification requested in the preceding paragraph, and (c) if the
Recipient is a Broadband Forum member, to implement the Test Plan in a
product or service made commercially available. Any other use of this
Test Plan is expressly prohibited without the prior written consent of
the Broadband Forum.</p>
<p>THIS TEST PLAN IS BEING OFFERED WITHOUT ANY WARRANTY WHATSOEVER, AND
IN PARTICULAR, ANY WARRANTY OF NONINFRINGEMENT AND ANY IMPLIED
WARRANTIES ARE EXPRESSLY DISCLAIMED. ANY USE OF THIS TEST PLAN SHALL BE
MADE ENTIRELY AT THE USER’S OR IMPLEMENTER’S OWN RISK, AND NEITHER THE
FORUM, NOR ANY OF ITS MEMBERS OR SUBMITTERS, SHALL HAVE ANY LIABILITY
WHATSOEVER TO ANY USER, IMPLEMENTER OR THIRD PARTY FOR ANY DAMAGES OF
ANY NATURE WHATSOEVER, DIRECTLY OR INDIRECTLY, ARISING FROM THE USE OF
THIS TEST PLAN, INCLUDING BUT NOT LIMITED TO, ANY CONSEQUENTIAL,
SPECIAL, PUNITIVE, INCIDENTAL AND INDIRECT DAMAGES.</p>
<p>All copies of this Test Plan (or any portion hereof) must include the
notices, legends and other provisions set forth on this page.</p>
<div class="note">
<p>© 2025, The Broadband Forum. All rights reserved. This Broadband
Forum document (TP-469) specifies the Test Plan on which is based the
<strong>&lt;BBF.NNN&gt;</strong> Certification Program for
<strong>&lt;type of product&gt;</strong> products. Through an open
selection process, the Broadband Forum entered into an agreement with
one or more independent Test Agencies to offer commercial testing
services against this Test Plan and to confirm results to the Broadband
Forum in connection with the Forum’s delivery of
<strong>&lt;BBF.NNN&gt;</strong> Certification. Offering Certification
testing services against this Test Plan is reserved to the Test Agencies
duly authorized by the Broadband Forum. Broadband Forum members can
independently test against TP-469, but may only produce limited reports
which only detail where a given product has failed a test case.</p>
<p>NOTE: The right to display a Broadband Forum Certification Logo may
only be granted by the Broadband Forum, and that right is available only
to Broadband Forum members that have successfully passed certification
testing by a duly authorized Test Agency. Further details on the
Broadband Forum Certification Programs can be found at <a
href="http://www.broadband-forum.org">http://www.broadband-forum.org</a>.</p>
</div>
<!-- do not edit! this file was created from PROJECT.yaml by project-parser.py -->
<div class="new-page">

</div>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="sec:issue-history">Issue History</h3>
<table class="issue-history">
<colgroup>
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 69%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Issue Number</th>
<th style="text-align: left;">Approval Date</th>
<th style="text-align: left;">Changes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469.pdf">Release
1.0</a></td>
<td style="text-align: left;">October 2019</td>
<td style="text-align: left;"><ul>
<li>First release of this test plan, containing test cases for basic
compliance with TR-369/USP</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;">Release 1.0.1</td>
<td style="text-align: left;">April 2020</td>
<td style="text-align: left;"><ul>
<li>Deprecated test 7.3</li>
<li>Added flag to the features list to indicate which features are
“not-in-force” and not yet available for certification</li>
<li>Various procedure and metric fixes</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Corrigendum-2.pdf">Release
1.0.2</a></td>
<td style="text-align: left;">June 2020</td>
<td style="text-align: left;"><ul>
<li>Both mandatory and conditional mandatory tests can use alternate
objects or parameters if available</li>
<li>Updated features and requirements</li>
<li>Altered test setup of 1.50 to include three objects</li>
<li>Fixed metrics of 1.25 to use new DeleteResp logic</li>
<li>Fixed tests 1.16 and 1.21 to use the correct error codes</li>
<li>Fixed test 1.20 to only check for at least one error</li>
<li>Fixed test 4.1 to include “OnBoardRequest()” as a conditional
requirement</li>
<li>Fixed test 1.32 to use new DeleteResp logic</li>
<li>Fixed tests 1.73, 1.74, 1.75 to use new GetSupportedDM
first_level_only logic</li>
<li>Fixed error code metric of test 1.8</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;">Release 1.0.3</td>
<td style="text-align: left;">October 2020</td>
<td style="text-align: left;"><ul>
<li>The metrics of test 1.9 now do not imply order</li>
<li>Test 1.22 metric now requires “at least one” element rather than a
“single” element</li>
<li>Renamed test 1.23</li>
<li>Fixed the metric of test 1.38 to include the instance identifier of
the path</li>
<li>Reworded the purpose of test 1.41</li>
<li>Clarified the test setup of tests 1.66 and 1.67</li>
<li>Fixed a typo in test 6.1 metrics (ServerRetryInitialMultiplier to
ServerRetryIntervalMultiplier)</li>
<li>Fixes other typographical errors</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Amendment-1.pdf">Release
1.1</a></td>
<td style="text-align: left;">January 2022</td>
<td style="text-align: left;"><ul>
<li>Adds test 1.78 Removal of subscriptions that have no associated
controller</li>
<li>Adds test 1.80 GetSupportedProtocol</li>
<li>Adds language reinforcing required tests based on supported
features</li>
<li>Adds test case 1.81 to test automatic unique key generation by the
Agent</li>
<li>Adds negative test metrics to several Set and Delete tests to
validate that operations did not occur upon error (1.7, 1.8, 1.14, 1.15,
1.20, 1.24, 1.27, 1.28, 1.31, 1.32, 1.33, 1.34, 1.35)</li>
<li>Adds section 10 for bulk data collection tests</li>
<li>Adds tests 1.82 and 1.83 to validate Get and GetInstances using
expressions that match zero objects</li>
<li>Adds test 1.84 to exercise the use of search paths in
Subscriptions</li>
<li>Defines deprecation for tests</li>
<li>Deprecates test 1.63 in favor of test 1.79</li>
<li>Deprecates test 9.1 in favor of test 9.11</li>
<li>Deprecates tests 2.3, 2.4, and 2.5</li>
<li>Completely deletes test 1.69</li>
<li>Updates functionality tag on test 1.71 to “supports at least one
multi-instance object”</li>
<li>Clarifies the definition of an empty oper_success element in test
1.32</li>
<li>Rewrites test 2.20 to accomplish its original intent</li>
<li>Changes test 3.6 to check that an Agent does not accept TLS
renegotiation</li>
<li>Changes test 2.15 and 2.16 to use “Enable” rather than “Alias” as a
test parameter</li>
<li>Simplifies test 4.1</li>
<li>Various typographical fixes, some in test procedure path names</li>
<li>Normalizes all protobuf examples in test procedures</li>
<li>Fixes test 2.20 to use the correct permissions</li>
<li>Fixes test 1.47 to use the correct operator</li>
<li>Eases the requirements of test 9.7 for implementation
flexibility</li>
<li>Removes the concept of “not-in-force” test cases and features</li>
<li>Updates tests 1.59, 1.84 to use allow_partial false”</li>
<li>Allows tests 1.3, 1.7, 1.8, 1.21 to use only an invalid parameter
value (not an invalid parameter) and accept 7012 as an acceptable error
code</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Amendment-2.pdf">Release
1.2</a></td>
<td style="text-align: left;">November 2022</td>
<td style="text-align: left;"><ul>
<li>Deprecates COAP tests</li>
<li>Adds MQTT test cases</li>
<li>Adds tests 1.86, 1.87 to test Get with unmatched search path</li>
<li>Adds new Connect Record test cases to STOMP and WebSocket
sections</li>
<li>Adds MQTT bulk data collection test cases</li>
<li>Adds test 1.88 to check that unique keys are always treated as
required</li>
<li>Adds test 1.89 to exercise max_depth feature in Get</li>
<li>Adds test 1.90 to check Delete with unmatched search path</li>
<li>Adds test 1.91 to very an Agent ignores unknown arguments in a
command</li>
<li>Adds test 1.92 to test that operate uses default values when
absent</li>
<li>Updates test 1.23 metrics to require the return of an empty
oper_success</li>
<li>Updates GetSupportedDM test cases to check for new USP 1.2
fields</li>
<li>Updates tests 1.3, 1.4, 1.6, 1.21 to include additional test
metrics</li>
<li>Updates tests 1.64 and 1.65 to check for correct command_key
value</li>
<li>Updates tests to account for requirement R-MTP.5 in USP 1.2</li>
<li>Fixes metric in test 1.20 and 1.21 to allow for single failure</li>
<li>Fixes test setup in 9.4, 9.5, 9.6</li>
<li>Fixes test 8.5 to remove MTP specific language and require mDNS
info</li>
<li>Reverts metric in test 6.7</li>
<li>Fixes test 1.47 test metrics for correct equivalence</li>
<li>Set send_resp to true for several Operate tests where needed</li>
<li>Various typographical fixes</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Amendment-3.pdf">Release
1.3</a></td>
<td style="text-align: left;">July 2024</td>
<td style="text-align: left;"><ul>
<li>Deprecates tests 6.9 and 7.6</li>
<li>Error code requirements in the test metrics of several tests have
been clarified or loosened. This change applies to tests 1.3, 1.4, 1.6,
1.7, 1.8, 1.9, 1.14, 1.15, 1.16, 1.17, 1.26, 1.28, 1.30, 1.31, 1.41,
1.42, and 1.77.</li>
<li>Updates 11.11 to check that no additional USP records are sent</li>
<li>Updates 1.20 to require SetResponse containing an error rather than
a USP Error message</li>
<li>Updates 2.18 to allow for OperateResponse with an error or a USP
Error message</li>
<li>Fixes test 9.3 test setup to require the proper subscriptions</li>
<li>Updates 2.21 and 2.22 with proper role setup and behavior</li>
<li>Adds new tests 1.93 and 1.94 for TriggerAction</li>
<li>Adds new tests 1.95, 2.23 and 2.24 for Add message with Search
Expression</li>
<li>Adds new tests 2.25 and 2.26 for Add message when some parameters
aren’t writable</li>
<li>Adds new test 1.96 for non-functional unique key immutability</li>
<li>Adds new test 2.27 for the use of SecuredRole</li>
<li>Adds new tests 1.97 and 1.98 to verify GetSupportedDMResponse
fields</li>
<li>Adds new test 7.11 for WebSocket response with no
bbf-usp-protocol</li>
<li>TraceRoute no longer specifically required to run Asyc operation
tests 1.64 and 1.65</li>
<li>Updates 1.88 to use a unique key that starts with a number as an
invalid value, rather than an empty unique key. Updates test parameter
to Alias.</li>
<li>Updates tests 11.9 and 11.13 to be compatible with MQTT 3.1.1</li>
<li>Various other typographical and procedure fixes</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Amendment-3_Corrigendum-1.pdf">Release
1.3.1</a></td>
<td style="text-align: left;">February 2025</td>
<td style="text-align: left;"><ul>
<li>Corrections to the Feature ID Table</li>
<li>Fixed typo in test 1.86</li>
<li>Fixed tests 2.23 - 2.26 to use ‘Param’ instead of invalid ‘Obj’
permissions</li>
</ul></td>
</tr>
<tr>
<td style="text-align: left;"><a
href="https://www.broadband-forum.org/download/TP-469_Amendment-3_Corrigendum-2.pdf">Release
1.3.2</a></td>
<td style="text-align: left;">May 2025</td>
<td style="text-align: left;"><ul>
<li>Updates build version</li>
<li>Reverts test 1.20 to version 1.2 of test plan</li>
</ul></td>
</tr>
</tbody>
</table>
<p>Comments or questions about this Broadband Forum should be directed
to <a href="mailto:info@broadband-forum.org"
class="email">info@broadband-forum.org</a>.</p>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="sec:bbfworkarea-work-area-directors"> Work Area Directors</h3>
<table class="wads">
<colgroup>
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Company</th>
<th style="text-align: left;">Email</th>
<th style="text-align: left;">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Jason Walls</td>
<td style="text-align: left;">QA Cafe, LLC</td>
<td style="text-align: left;">jason@qacafe.com</td>
<td style="text-align: left;">Broadband User Services Work Area
Director</td>
</tr>
<tr>
<td style="text-align: left;">John Blackford</td>
<td style="text-align: left;">Vantiva</td>
<td style="text-align: left;">john.blackford@vantiva.com</td>
<td style="text-align: left;">Broadband User Services Work Area
Director</td>
</tr>
</tbody>
</table>
<h3 class="unnumbered unlisted auto-hoverlink" data-info="header"
id="sec:editors">Editors</h3>
<table class="editors">
<colgroup>
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 25%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Name</th>
<th style="text-align: left;">Company</th>
<th style="text-align: left;">Email</th>
<th style="text-align: left;">Role</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">Jason Walls</td>
<td style="text-align: left;">QA Cafe, LLC</td>
<td style="text-align: left;">jason@qacafe.com</td>
<td style="text-align: left;">Editor</td>
</tr>
</tbody>
</table>
<h2 class="auto-hoverlink" data-info="header"
id="sec:executive-summary">Executive Summary</h2>
<p>Testing is crucial to promoting the interoperability and adoption of
standards. To meet this, the Broadband Forum regularly produces test
suites that validate the conformance of implementations of their
standards. This specification defines the test setup, test procedures,
and test metrics to validate Agent and implementations of the <a
href="https://usp.technology">User Services Platform (USP)</a>,
published as BBF TR-369.</p>
<p>This test plan is used to validate USP Agent implementations for the
<a
href="https://www.broadband-forum.org/testing-and-certification-programs/bbf-369-usp-certification">BBF.369
USP Agent Certification Program</a>. Companies looking to certify their
products, or to acquire certified products, can find full details on the
program, approved test tools and labs, and the list of certified
products <a
href="https://www.broadband-forum.org/testing-and-certification-programs/bbf-369-usp-certification">here</a>.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:purpose">Purpose</h2>
<p>This purpose of this document is to provide a definitive guide for
validating the compliance of USP Agents in accordance with the
specification.</p>
<h2 class="auto-hoverlink" data-info="header" id="sec:scope">Scope</h2>
<p>The tests defined below are intended to validate the specific
requirements outlined in the USP specification, as well as those
requirements defined in the Device:2 Data Model for USP Agents for
objects, parameters, commands, and events necessary for the operation of
USP.</p>
</section>
<section id="sec:test-setup" class="auto-hoverlink new-section hidden"
data-info="header">
<h1 class="auto-hoverlink" data-info="header">Test Setup</h1>
<ul>
<li><a href="#sec:test-equipment">Test Equipment</a></li>
<li><a href="#sec:test-setup-and-execution">Test Setup and
Execution</a></li>
<li><a href="#sec:universal-test-metrics">Universal Test
Metrics</a></li>
<li><a href="#sec:notes-about-test-case-descriptions">Notes about test
case descriptions</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:test-equipment">Test Equipment</h2>
<p>There are a number of components necessary to the implementation of
this test suite.</p>
<p><strong>Traffic Generator</strong> - One or more traffic generators
are necessary in order to transmit the required traffic to execute the
test procedures. Traffic generation can be done with script-able, real
implementations of DHCP servers, mDNS endpoints, and USP endpoints (for
example), or can be simulated through other means. For tests that
exercise the presence of multiple Controllers or agents, the traffic
generators can each represent a single endpoint, or multiple endpoints,
depending on its capabilities, as long as the traffic can be
differentiated by the Endpoint Under Test.</p>
<p><strong>Analyzer</strong> - One or more traffic analyzers are
necessary to confirm the receipt of messages and evaluate the test
metrics outlined in the tests below. This analyzer may exist at the
traffic generator source, in-line, or accessed through a replicated
interface that will push traffic to the analyzer.</p>
<p><strong>Test Network</strong> - The tests below require IP layer
connectivity between the Traffic Generator and the Endpoint Under Test
(EUT). Steps SHOULD be taken to unsure that the underlying network does
not interfere with the test procedures or test metrics.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:test-setup-and-execution">Test Setup and Execution</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:basic-test-setup">Basic Test Setup</h3>
<figure id="fig:basic-test-setup">
<img src="././figure-1.png" id="img:basic-test-setup"
alt="Basic Test Setup" />
<figcaption><div class="auto-hoverlink"
data-anchor="fig:basic-test-setup">
Figure 1 – Basic Test Setup
</div></figcaption>
</figure>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags">Functionality Tags</h3>
<p>USP contains both required and optional functionality. To ensure that
all different classes of device can exercise this test suite, tests are
marked as “Mandatory”, “Conditional Mandatory”, or “Deprecated”. This is
indicated in each individual test case under the “Functionality
Tag”.</p>
<p>Tests that are “Deprecated” represent tests that were removed or
replaced with newer tests.</p>
<h4 class="auto-hoverlink" data-info="header"
id="sec:alternate-parameters-objects-commands-and-events-in-test-procedures">Alternate
parameters, objects, commands, and events in test procedures</h4>
<p>For tests that make use of particular parameter, object, command,
event to validate the test metrics, a different subject can be
substituted that meets the needs of the test. For example, if an EUT
does not support the Reboot:1 profile, another synchronous operation can
be substituted for tests 1.61 and 1.62.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:endpoint-requirements-and-metadata-collection">Endpoint
Requirements and Metadata Collection</h3>
<h4 class="auto-hoverlink" data-info="header"
id="sec:required-profiles">Required Profiles</h4>
<p>The Device:2 Data Model for USP Agents outlines several profiles that
contain data model objects, parameters, commands, and events necessary
to the operation of USP. In order to be able to perform the tests below,
a USP Agent MUST implement, at minimum, the following profiles:</p>
<ul>
<li><p>LocalAgent:1</p></li>
<li><p>Subscriptions:1</p></li>
</ul>
<p>Conditional mandatory tests may require the implementation of
additional profiles.</p>
<h4 class="auto-hoverlink" data-info="header"
id="sec:test-cases-required-by-profile-and-option-support">Test Cases
Required by Profile and Option Support</h4>
<p>Those seeking to utilize this test plan can use the following feature
IDs to specify their support for conditional mandatory test cases. Since
the types of endpoints under test may vary widely in use cases and
complexity, this list is meant to act as a guide to ensure that many
kinds of products can achieve compliance. However, when determining
which tests must be passed to achieve compliance, testers must know
that:</p>
<p><strong>An Endpoint Under Test (EUT) MUST complete all Mandatory test
cases, and MUST complete all Conditional Mandatory test cases for ALL
features supported by the EUT (see table below).</strong></p>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 38%" />
<col style="width: 25%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">Feature ID</th>
<th style="text-align: left;">Feature name</th>
<th style="text-align: left;">Test Cases</th>
<th style="text-align: left;">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">1</td>
<td style="text-align: left;">At least one command</td>
<td style="text-align: left;">1.61, 1.62</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">2</td>
<td style="text-align: left;">At least one command with input
arguments</td>
<td style="text-align: left;">1.79</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">3</td>
<td style="text-align: left;">At least one asynchronous command</td>
<td style="text-align: left;">1.64, 1.65</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">4</td>
<td style="text-align: left;">Subscription.{i}.NotifExpiration
parameter</td>
<td style="text-align: left;">1.56</td>
<td style="text-align: left;">An extension to the Subscription:1
profile</td>
</tr>
<tr>
<td style="text-align: left;">5</td>
<td style="text-align: left;">Controller:1 profile</td>
<td style="text-align: left;">1.59</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">6</td>
<td
style="text-align: left;">Device.LocalAgent.Subscription.{i}.TimeToLive</td>
<td style="text-align: left;">1.55</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">7</td>
<td style="text-align: left;">Controller:1 profile (writeable)</td>
<td style="text-align: left;">1.78, 9.9</td>
<td style="text-align: left;">EUT allows the creation of
Device.LocalAgent.Controller.{i}. objects</td>
</tr>
<tr>
<td style="text-align: left;">8</td>
<td
style="text-align: left;">Device.LocalAgent.Controller.{i}.SendOnBoardRequest()</td>
<td style="text-align: left;">1.60, 9.9</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">9</td>
<td style="text-align: left;">Device.ScheduleTimer()</td>
<td style="text-align: left;">1.79</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">10</td>
<td style="text-align: left;">Reboot:1 profile</td>
<td style="text-align: left;">1.61, 1.62, 9.10</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">11</td>
<td style="text-align: left;">(Removed)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">12</td>
<td style="text-align: left;">ControllerTrust:1 profile</td>
<td style="text-align: left;">2.9, 2.10</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">13</td>
<td style="text-align: left;">ControllerTrust:1 profile (writeable)</td>
<td style="text-align: left;">2.11, 2.12, 2.13, 2.14, 2.15, 2.16, 2.17,
2.18, 2.19, 2.20, 2.21, 2.22, 2.23, 2.24, 2.25, 2.26</td>
<td style="text-align: left;">Additionally supports at least one role
that allows object creation, or supports writable parameters in
Device.LocalAgent.ControllerTrust.{i}.Role.{i}.</td>
</tr>
<tr>
<td style="text-align: left;">14</td>
<td style="text-align: left;">(Removed)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">15</td>
<td style="text-align: left;">TLS at the MTP Layer</td>
<td style="text-align: left;">4.1</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">16</td>
<td style="text-align: left;">CoAP MTP (DEPRECATED)</td>
<td style="text-align: left;">5.*</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">17</td>
<td style="text-align: left;">STOMP MTP</td>
<td style="text-align: left;">6.*</td>
<td style="text-align: left;">Excludes 6.8 unless option 18 is
supported</td>
</tr>
<tr>
<td style="text-align: left;">18</td>
<td style="text-align: left;">STOMPHeartbeat:1 profile</td>
<td style="text-align: left;">6.8</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">19</td>
<td style="text-align: left;">WebSocket MTP</td>
<td style="text-align: left;">7.*</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">20</td>
<td style="text-align: left;">(removed)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">21</td>
<td style="text-align: left;">Discovery via DHCP Options</td>
<td style="text-align: left;">8.1, 8.2, 8.3</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">22</td>
<td style="text-align: left;">Discovery via mDNS</td>
<td style="text-align: left;">8.4, 8.5, 8.6, 8.7</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">23</td>
<td style="text-align: left;">Secure Message Exchange (TLS for USP
Record Integrity)</td>
<td style="text-align: left;">3.2, 3.3, 3.4, 3.5, 3.6, 3.7, 3.13</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">24</td>
<td style="text-align: left;">USP session context</td>
<td style="text-align: left;">2.6, 2.7, 2.8, 3.8, 3.9, 3.10, 3.11, 3.12,
3.13, 3.14, 3.15</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">25</td>
<td style="text-align: left;">Device.LocalAgent.AddCertificate()</td>
<td style="text-align: left;">9.2</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">26</td>
<td style="text-align: left;">Firmware:1 profile</td>
<td style="text-align: left;">9.3, 9.5, 9.6, 9.7</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">27</td>
<td style="text-align: left;">Firmware:1 profile (Activate)</td>
<td style="text-align: left;">9.4, 9.5</td>
<td style="text-align: left;">Supports Firmware:1 profile and
additionally supports the Activate() operation</td>
</tr>
<tr>
<td style="text-align: left;">28</td>
<td
style="text-align: left;">Device.LocalAgent.Request.{i}.Cancel()</td>
<td style="text-align: left;">9.8</td>
<td style="text-align: left;">Applies only if option 26 is
supported</td>
</tr>
<tr>
<td style="text-align: left;">29</td>
<td style="text-align: left;">(Removed)</td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">30</td>
<td style="text-align: left;">Device.DeviceInfo.BootFirmwareImage</td>
<td style="text-align: left;">9.10</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">31</td>
<td style="text-align: left;">The product supports at least one nested
multi-instance object</td>
<td style="text-align: left;">1.10, 1.71, 1.83</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">32</td>
<td style="text-align: left;">HTTP bulk data collection with JSON
encoding</td>
<td style="text-align: left;">10.1, 10.2, 10.5, 10.6, 10.7, 10.8,
10.9</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">33</td>
<td style="text-align: left;">HTTP bulk data collection with CSV
encoding</td>
<td style="text-align: left;">10.3, 10.4, 10.5, 10.6, 10.7, 10.8,
10.9</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">34</td>
<td style="text-align: left;">Bulk data collection via the Push!
Event</td>
<td style="text-align: left;">10.10, 10.11, 10.12</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">35</td>
<td style="text-align: left;">MQTT MTP, version 3.1.1</td>
<td style="text-align: left;">11.*</td>
<td style="text-align: left;">Excludes 11.4, 11.7, 11.8, 11.10, &amp;
11.15, MQTT 5.0 only tests</td>
</tr>
<tr>
<td style="text-align: left;">36</td>
<td style="text-align: left;">MQTT MTP, version 5.0</td>
<td style="text-align: left;">11.*</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td style="text-align: left;">37</td>
<td style="text-align: left;">TriggerAction</td>
<td style="text-align: left;">1.93, 1.94</td>
<td style="text-align: left;">Supports the
Device.LocalAgent.Subscription.{i}.TriggerAction and
Device.LocalAgent.Subscription.{i}.TriggerConfigSettings parameters</td>
</tr>
<tr>
<td style="text-align: left;">38</td>
<td style="text-align: left;">Command with input arguments</td>
<td style="text-align: left;">1.97</td>
<td style="text-align: left;">Supports a command that includes one or
more input arguments</td>
</tr>
<tr>
<td style="text-align: left;">39</td>
<td style="text-align: left;">Event with arguments</td>
<td style="text-align: left;">1.98</td>
<td style="text-align: left;">Supports an event that includes one or
more arguments</td>
</tr>
<tr>
<td style="text-align: left;">40</td>
<td
style="text-align: left;">Device.LocalAgent.ControllerTrust.SecuredRoles</td>
<td style="text-align: left;">2.27</td>
<td style="text-align: left;">Supports the use of the SecuredRole for
Secured Parameters</td>
</tr>
<tr>
<td style="text-align: left;">41</td>
<td style="text-align: left;">Bulk data collection over MQTT</td>
<td style="text-align: left;">10.13</td>
<td style="text-align: left;"></td>
</tr>
</tbody>
</table>
<h4 class="auto-hoverlink" data-info="header"
id="sec:elements-specified-in-the-test-procedure">Elements Specified in
the Test Procedure</h4>
<p>Many of the mandatory and conditional mandatory tests specify the
objects, parameters, or operations to be used for the test. If the
specific elements are not supported by the EUT, other elements that will
satisfy the test criteria MAY be used instead. If so, the test report
MUST include the alternate elements used.</p>
<h4 class="auto-hoverlink" data-info="header"
id="sec:required-eut-information-and-resources">Required EUT Information
and Resources</h4>
<p>In order to be able to perform the tests and create a report of the
results, the following must be provided concerning the Endpoint Under
Test:</p>
<ol type="1">
<li>The software and/or firmware version of the EUT.</li>
<li>The number of firmware banks available if the Firmware:1 profile is
supported.</li>
<li>A list of the feature IDs supported.</li>
<li>If the service elements specified in the tests are not supported,
provide a list of alternate elements used in the testing.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:clean-up-procedures">Clean-Up Procedures</h3>
<p>A number of tests that make changes to the EUT have procedures that
are not part of the validation portion of the test case. These
procedures are intended to “clean up” any changes that were made during
the test to ensure that the EUT is in a relatively known state from one
test case to the next. The most obvious example is using the Delete
message to remove any objects that were added as part of the procedure,
but the clean-up procedure may include any number of steps.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:universal-test-metrics">Universal Test Metrics</h2>
<p>Due to the nature of performative testing of protocol messages,
certain requirements in the specification are effectively tested every
time. Writing additional test cases for these metrics is unnecessary,
but the requirements must still be met by endpoint implementations.</p>
<ol type="1">
<li><p>The Endpoint ID of the Endpoint Under Test is valid (ARC.3,
ARC.4, ARC.5, and the requirements outlined in the <a
href="http://usp.technology/specification/architecture/#endpoint_identifier">authority-scheme
table</a>).</p></li>
<li><p>The USP records and USP messages of the Endpoint Under Test are
valid according to the usp-record.proto and usp-msg.proto schemas
(ENC.0, ENC.1).</p></li>
<li><p>The Path Names and Search Paths used in messages sent by the
Endpoint Under Test are valid according to <a
href="http://usp.technology/specification/architecture/#data_model_path_grammar">Data
Model Path Grammar</a> and TR-106 (ARC.7).</p></li>
<li><p>Path Names in messages originating from the EUT use instance
number addressing (R-MSG.3).</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:appropriate-error-codes">Appropriate Error Codes</h3>
<p>When test cases specify that the EUT include “an appropriate error
code”, the error code must be applicable to the USP message for which it
was triggered, as is documented in the <a
href="https://usp.technology/specification/index.html#sec:error-codes">Error
Codes table</a>.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notes-about-test-case-descriptions">Notes about test case
descriptions</h2>
<p>Each of the test cases below have the following sections:</p>
<p><strong>Purpose</strong> - The purpose describes the reasoning for
the test case, based on the normative requirements defined in USP.</p>
<p><strong>Functionality Tag</strong> - The functionality tag indicates
whether the test is mandatory or conditional mandatory. If it is the
latter, this section will list any additional Device:2 profiles
necessary to the performance of the test case.</p>
<p><strong>Test Setup</strong> - The test setup section indicates any
special prior conditions that must be configured before performing the
test.</p>
<p><strong>Test Procedure</strong> - The procedure indicates the steps,
in order, taken to perform the test.</p>
<p><strong>Test Metrics</strong> - The metrics indicate the required
behavior that must be observed to consider the test passed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:use-of-examples">Use of examples</h3>
<p>The test setup, procedure, and metrics in each test case may contain
examples of the data to be sent to or received from the EUT. In these
examples, elements that are to be filled with a known value dependent on
the protocol’s behavior are indicated with greater-than/less-than
brackets (&lt;for example&gt;), to indicate a variable. These examples
should not be taken literally.</p>
</section>
<section id="sec:messages-and-path-names"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">1 Messages and Path
Names</h1>
<ul>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-succeed">1.1
Add message with allow partial false, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-single-object-required-parameters-succeed">1.2
Add message with allow partial true, single object, required parameters
succeed</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-object-required-parameters-fail">1.3
Add message with allow partial false, single object, required parameters
fail</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-single-invalid-object">1.4
Add message with allow partial false, single invalid object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects">1.5
Add message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-with-an-invalid-object">1.6
Add message with allow partial false, multiple objects with an invalid
object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.7
Add message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-invalid-type-single-object">1.8
Add message with allow partial true, required parameters fail, invalid
type, single object</a></li>
<li><a
href="#sec:add-message-with-allow-partial-true-required-parameters-fail-multiple-objects">1.9
Add message with allow partial true, required parameters fail, multiple
objects</a></li>
<li><a href="#sec:add-message-with-unique-key-addressing-in-path">1.10
Add message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-pass">1.11
Set message with allow partial false, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameters-pass">1.12
Set message with allow partial true, required parameters pass</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects">1.13
Set message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-required-parameters-fail">1.14
Set message with allow partial false, required parameters fail</a></li>
<li><a
href="#sec:set-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.15
Set message with allow partial false, multiple objects, required
parameters fail in single object</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-required-parameter-fails-multiple-objects">1.16
Set message with allow partial true, required parameter fails, multiple
objects</a></li>
<li><a
href="#sec:set-message-with-allow-partial-true-non-required-parameter-fails-multiple-parameters">1.17
Set message with allow partial true, non-required parameter fails,
multiple parameters</a></li>
<li><a href="#sec:set-message-with-unique-key-addressing-in-path">1.18
Set message with unique key addressing in path</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-pass">1.19
Set message with wildcard search path, allow partial false, required
parameters pass</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-fail">1.20
Set message with wildcard search path, allow partial false, required
parameters fail</a></li>
<li><a
href="#sec:set-message-with-wildcard-search-path-allow-partial-true-required-parameters-fail">1.21
Set message with wildcard search path, allow partial true, required
parameters fail</a></li>
<li><a href="#sec:set-message-with-search-expression-search-path">1.22
Set message with search expression search path</a></li>
<li><a href="#sec:set-message-with-path-that-matches-no-objects">1.23
Set message with path that matches no objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-valid-object-instance">1.24
Delete message with allow partial false, valid object instance</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-object-instance-doesnt-exist">1.25
Delete message with allow partial false, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-invalid-object">1.26
Delete message with allow partial false, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects">1.27
Delete message with allow partial false, multiple objects</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-false-multiple-objects-invalid-object">1.28
Delete message with allow partial false, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-object-instance-doesnt-exist">1.29
Delete message with allow partial true, object instance doesn’t
exist</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-invalid-object">1.30
Delete message with allow partial true, invalid object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-invalid-object">1.31
Delete message with allow partial true, multiple objects, invalid
object</a></li>
<li><a
href="#sec:delete-message-with-allow-partial-true-multiple-objects-object-doesnt-exist">1.32
Delete message with allow partial true, multiple objects, object doesn’t
exist</a></li>
<li><a href="#sec:delete-message-with-unique-key-addressing">1.33 Delete
message with unique key addressing</a></li>
<li><a
href="#sec:delete-message-with-wildcard-search-path-valid-objects">1.34
Delete message with wildcard search path, valid objects</a></li>
<li><a
href="#sec:delete-message-with-search-expression-search-path">1.35
Delete message with search expression search path</a></li>
<li><a href="#sec:get-message-with-full-parameter-path">1.36 Get message
with full parameter path</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-same-object">1.37
Get message with multiple full parameter paths, same object</a></li>
<li><a
href="#sec:get-message-with-multiple-full-parameter-paths-different-objects">1.38
Get message with multiple full parameter paths, different
objects</a></li>
<li><a href="#sec:get-message-with-object-path">1.39 Get message with
object path</a></li>
<li><a href="#sec:get-message-with-object-instance-path">1.40 Get
message with object instance path</a></li>
<li><a href="#sec:get-message-with-invalid-parameter">1.41 Get message
with invalid parameter</a></li>
<li><a
href="#sec:get-message-with-invalid-parameter-and-valid-parameter">1.42
Get message with invalid parameter and valid parameter</a></li>
<li><a href="#sec:get-message-using-unique-key-addressing">1.43 Get
message using unique key addressing</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-full-parameter">1.44
Get message using wildcard search path on full parameter</a></li>
<li><a
href="#sec:get-message-using-wildcard-search-path-on-object-path">1.45
Get message using wildcard search path on object path</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-equivalence">1.46
Get message using search expression search path (equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-non-equivalence">1.47
Get message using search expression search path
(non-equivalence)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-greater-comparison">1.48
Get message using search expression search path (exclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-exclusive-lesser-comparison">1.49
Get message using search expression search path (exclusive lesser
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-greater-comparison">1.50
Get message using search expression search path (inclusive greater
comparison)</a></li>
<li><a
href="#sec:get-message-using-search-expression-search-path-inclusive-lesser-comparison">1.51
Get message using search expression search path (inclusive lesser
comparison)</a></li>
<li><a
href="#sec:notify---subscription-creation-using-value-change">1.52
Notify - Subscription creation using Value Change</a></li>
<li><a
href="#sec:notify---subscription-deletion-using-value-change">1.53
Notify - Subscription Deletion Using Value Change</a></li>
<li><a href="#sec:notification-retry-using-value-change">1.54
Notification Retry using Value Change</a></li>
<li><a href="#sec:subscription-expiration-using-value-change">1.55
Subscription Expiration using Value Change</a></li>
<li><a href="#sec:notification-retry-expiration-using-value-change">1.56
Notification Retry Expiration using Value Change</a></li>
<li><a href="#sec:objectcreation-notification">1.57 ObjectCreation
Notification</a></li>
<li><a href="#sec:objectdeletion-notification">1.58 ObjectDeletion
Notification</a></li>
<li><a href="#sec:event-notification-using-periodic">1.59 Event
Notification using Periodic!</a></li>
<li><a href="#sec:onboardrequest-notification">1.60 OnBoardRequest
Notification</a></li>
<li><a href="#sec:operate-message-using-reboot-with-send_resp-true">1.61
Operate message using Reboot() with send_resp true</a></li>
<li><a
href="#sec:operate-message-using-reboot-with-send_resp-false">1.62
Operate message using Reboot() with send_resp false</a></li>
<li><a
href="#sec:operate-message-using-input-arguments-deprecated-by-1.79">1.63
Operate message using input arguments (DEPRECATED by 1.79)</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-true">1.64
Asynchronous operation with send_resp true</a></li>
<li><a href="#sec:asynchronous-operation-with-send_resp-false">1.65
Asynchronous operation with send_resp false</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-true">1.66
GetInstances using a single object, first_level_only true</a></li>
<li><a
href="#sec:getinstances-using-a-single-object-first_level_only-false">1.67
GetInstances using a single object, first_level_only false</a></li>
<li><a href="#sec:getinstances-with-multiple-objects">1.68 GetInstances
with multiple objects</a></li>
<li><a href="#sec:deleted"><em>1.69 DELETED</em></a></li>
<li><a href="#sec:getinstances-with-wildcard-search-path">1.70
GetInstances with wildcard search path</a></li>
<li><a href="#sec:getinstances-with-search-expression-search-path">1.71
GetInstances with search expression search path</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-false-all-options">1.72
GetSupportedDM using a single object, first_level_only false, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-all-options">1.73
GetSupportedDM using a single object, first_level_only true, all
options</a></li>
<li><a
href="#sec:getsupporteddm-using-a-single-object-first_level_only-true-no-options">1.74
GetSupportedDM using a single object, first_level_only true, no
options</a></li>
<li><a
href="#sec:getsupporteddm-using-multiple-objects-first_level_only-true-all-options">1.75
GetSupportedDM using multiple objects, first_level_only true, all
options</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-all-options">1.76
GetSupportedDM on root object, all options</a></li>
<li><a href="#sec:getsupporteddm-on-unsupported-object">1.77
GetSupportedDM on unsupported object</a></li>
<li><a
href="#sec:removal-of-subscriptions-that-have-no-associated-controller">1.78
Removal of subscriptions that have no associated controller</a></li>
<li><a href="#sec:operate-message-using-input-arguments">1.79 Operate
message using input arguments</a></li>
<li><a href="#sec:getsupportedprotocol">1.80
GetSupportedProtocol</a></li>
<li><a href="#sec:automatic-unique-key-generation">1.81 Automatic unique
key generation</a></li>
<li><a href="#sec:get-message-with-unmatched-search-expression">1.82 Get
message with unmatched search expression</a></li>
<li><a
href="#sec:getinstances-message-with-unmatched-search-expression">1.83
GetInstances message with unmatched search expression</a></li>
<li><a href="#sec:notification---subscription-using-search-paths">1.84
Notification - Subscription using search paths</a></li>
<li><a
href="#sec:for-future-work-get-message-with-unresolved-instances---addressing-by-instance-number">1.85
(For future work) Get message with unresolved instances - addressing by
instance number</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-a-search-path">1.86
Get message with unresolved instances - using a search path</a></li>
<li><a
href="#sec:get-message-with-unresolved-instances---using-an-object-path">1.87
Get message with unresolved instances - using an object path</a></li>
<li><a href="#sec:add-message-fails-when-unique-key-is-invalid">1.88 Add
message fails when unique key is invalid</a></li>
<li><a href="#sec:get-message-using-max_depth">1.89 Get message using
max_depth</a></li>
<li><a
href="#sec:delete-message-with-search-expression-that-matches-no-objects">1.90
Delete message with search expression that matches no objects</a></li>
<li><a href="#sec:unknown-arguments-in-an-operate-message">1.91 Unknown
arguments in an Operate message</a></li>
<li><a href="#sec:agent-uses-default-values-for-operate-arguments">1.92
Agent uses default values for Operate arguments</a></li>
<li><a href="#sec:subscription-using-triggeraction-config">1.93
Subscription using TriggerAction Config</a></li>
<li><a href="#sec:subscription-using-triggeraction-notifyandconfig">1.94
Subscription using TriggerAction NotifyAndConfig</a></li>
<li><a href="#sec:add-message-with-search-expression">1.95 Add message
with search expression</a></li>
<li><a href="#sec:non-functional-unique-key-immutability">1.96
Non-functional Unique Key Immutability</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-commands">1.97
GetSupportedDM on root object, commands</a></li>
<li><a href="#sec:getsupporteddm-on-root-object-events">1.98
GetSupportedDM on root object, events</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-single-object-required-parameters-succeed">1.1
Add message with allow partial false, single object, required parameters
succeed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-1">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, and all required parameters to be set upon Object Creation
succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-1">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add1&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
       }
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifier of the created object as reported
by the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-metrics">Test
Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResp.</p></li>
<li><p>The AddResp contains a single CreatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains no parameter errors and 3 elements in the
unique key map: Alias, Recipient, and ID. Alternatively, the
OperationSuccess contains 2 elements in the unique key map if the Alias
parameter is not supported: Recipient, and ID.</p></li>
<li><p>The EUT creates the Subscription object.</p></li>
<li><p>The Subscription object’s values match the values set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-true-single-object-required-parameters-succeed">1.2
Add message with allow partial true, single object, required parameters
succeed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-2">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
true, and all required parameters to be set upon Object Creation
succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-1">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-2">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-1">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: true
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add2&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifier of the created object as reported
by the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-1">Test Metrics</h3>
<ol type="1">
<li><p>The EUT AddResp is valid.</p></li>
<li><p>The AddResp contains a single CreatedObjectResult that has an
OperationStatus of OperationSuccess. The OperationSuccess contains no
parameter errors and 3 elements in the unique key map: Alias, Recipient,
and ID. Alternatively, the OperationSuccess contains 2 elements in the
unique key map if the Alias parameter is not supported: Recipient, and
ID.</p></li>
<li><p>The EUT creates the Subscription object.</p></li>
<li><p>The Subscription object’s values match the values set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-single-object-required-parameters-fail">1.3
Add message with allow partial false, single object, required parameters
fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-3">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, and at least one required parameter fails, and only a single
object is set.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-2">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-3">Test
Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-2">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;InvalidValue&#39;
           required: true
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add3&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error message.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-2">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error message contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> that indicates the Enable parameter, and an
appropriate error code.</p></li>
<li><p>The EUT did not create a new Subscription object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-single-invalid-object">1.4
Add message with allow partial false, single invalid object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-4">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, and a single invalid object is set.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-3">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-4">Test
Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-3">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.InvalidObject.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add4&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error message.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-3">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error message contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> of ‘Device.LocalAgent.InvalidObject.’, and an
appropriate error code.</p></li>
<li><p>The EUT did not create a new Subscription object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-multiple-objects">1.5 Add
message with allow partial false, multiple objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-5">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, multiple objects are attempted, and all required parameters to be
set upon Object Creation succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-4">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-5">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-4">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add51&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
        }
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add52&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.EndpointID&#39;
           required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 1&gt;.&#39;
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 2&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
msg_id: &#39;&lt;msg_id&gt;&#39;
msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 1&gt;.&#39;
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 2&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-4">Test Metrics</h3>
<ol type="1">
<li><p>The EUT AddResp is valid.</p></li>
<li><p>The AddResp contains two CreatedObjectResults that each have an
OperationStatus of OperationSuccess. The OperationSuccess elements
contains no parameter errors and 3 elements in the unique key map:
Alias, Recipient, and ID. Alternatively, the OperationSuccess contains 2
elements in the unique key map if the Alias parameter is not supported:
Recipient, and ID.</p></li>
<li><p>The EUT creates the Subscription objects.</p></li>
<li><p>The first Subscription object’s values match the values set in
the <code>param_settings</code> element.</p></li>
<li><p>The second Subscription object’s values match the values set in
the <code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-multiple-objects-with-an-invalid-object">1.6
Add message with allow partial false, multiple objects with an invalid
object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-6">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, multiple objects are attempted, and one of the objects is
invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-5">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-6">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-5">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add61&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
        }
      create_objs {
        obj_path: &#39;Device.LocalAgent.InvalidObject.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add62&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.EndpointID&#39;
           required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-5">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error message contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> of ‘Device.LocalAgent.InvalidObject.’, and an
appropriate error code.</p></li>
<li><p>The EUT did not create a new Subscription object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.7
Add message with allow partial false, multiple objects, required
parameters fail in single object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-7">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
false, and at least one required parameter fails in one of multiple
objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-6">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-7">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-6">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;InvalidValue&#39;
           required: true
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add71&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
        }
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;true&#39;
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add72&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with the request path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-6">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error message contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> that indicates the Enable parameter, and an
appropriate error code.</p></li>
<li><p>The GetResp from the EUT does not contain a Subscription instance
with ID ‘add71’ or ‘add72’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-true-required-parameters-fail-invalid-type-single-object">1.8
Add message with allow partial true, required parameters fail, invalid
type, single object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-8">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
true, and at least one required parameter fails (with an invalid value)
in a single object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-7">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-8">Test
Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-7">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: true
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;InvalidValue&#39;
           required: true
         }
        param_settings {
           param: &#39;ID&#39;
           value: &#39;add8&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
           required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Send a Get message to the EUT with the request path of
‘Device.LocalAgent.Subscription.’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-7">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResp message.</p></li>
<li><p>The AddResp contains a single CreatedObjectResult that has an
OperationStatus that is an element of type OperationFailure. The
OperationFailure element contains an appropriate error code.</p></li>
<li><p>The GetResp from the EUT does not contain a Subscription instance
with ID ‘add8’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-allow-partial-true-required-parameters-fail-multiple-objects">1.9
Add message with allow partial true, required parameters fail, multiple
objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-9">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the <code>allow_partial</code> element is set to
true, and at least one required parameter fails in one of multiple
objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-8">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setup-9">Test
Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-8">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: true
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;add91&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.SoftwareVersion&#39;
          }
        }
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;add91&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.SoftwareVersion&#39;
          }
        param_settings {
            param: &#39;InvalidParameter&#39;
            value: &#39;IrrelevantValue&#39;
            required: true
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifier of the created object as reported
by the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-8">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResp message.</p></li>
<li><p>The AddResp contains two CreatedObjectResults.</p>
<ol type="a">
<li><p>One CreateObjectResult is an element of type OperationSuccess.
The OperationSuccess element contains no parameter errors and 3 elements
in the unique key map: Alias, Recipient, and ID. Alternatively, the
OperationSuccess contains 2 elements in the unique key map if the Alias
parameter is not supported: Recipient, and ID.</p></li>
<li><p>The other CreateObjectResult is an element of type
OperationFailure. The OperationFailure element contains an appropriate
error code.</p></li>
</ol></li>
<li><p>The EUT creates the first Subscription object, and does not
create the second Subscription object.</p></li>
<li><p>The Subscription object’s values match the values set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-unique-key-addressing-in-path">1.10 Add message
with unique key addressing in path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-10">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
an Add message when the Controller uses unique key addressing.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-9">Functionality Tag</h3>
<p>Conditional Mandatory (Product supports at least one nested
multi-instance object)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-10">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-9">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Controller.[EndpointID==&quot;&lt; EndpointID&gt;&quot;&amp;&amp;Alias==&quot;&lt;Alias if supported&gt;&quot;].BootParameter.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ParameterName&#39;
            value: &#39;Device.LocalAgent.SoftwareVersion&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifier of the created object as reported
by the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Controller.&lt;instance identifier of Controller&gt;.BootParameter.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Controller.&lt;instance identifier of Controller&gt;.BootParameter.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-9">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResp.</p></li>
<li><p>The AddResp contains a single CreatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains no parameter errors and 2 elements in the
unique key map: Alias and ParameterName. Alternatively, the
OperationSuccess contains one element in the unique key map if the Alias
parameter is not supported: ParameterName.</p></li>
<li><p>The EUT creates the BootParameter object.</p></li>
<li><p>The BootParameter object’s values match the values set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-false-required-parameters-pass">1.11
Set message with allow partial false, required parameters pass</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-11">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
false, and all required parameters to be updated succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-10">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-11">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-10">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-10">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains a single UpdatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdateInstanceResult, with the
<code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’, and a single
entry in the <code>updated_params</code> map containing ‘NotifRetry’ as
the key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-true-required-parameters-pass">1.12
Set message with allow partial true, required parameters pass</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-12">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
true, and all required parameters to be updated succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-11">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-12">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-11">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: true
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
  body {
    request {
      get {
        param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.NotifRetry&#39;
      }
    }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-11">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains a single UpdatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdateInstanceResult, with the
<code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’, and a single
entry in the <code>updated_params</code> map containing ‘NotifRetry’ as
the key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-false-multiple-objects">1.13 Set
message with allow partial false, multiple objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-13">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
false, and all required parameters to be updated succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-12">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-13">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT,
and the instance identifiers are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-12">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.NotifRetry&#39;
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-12">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains two UpdatedObjectResults that each have an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdateInstanceResult, with the
affected_path equal to ‘Device.LocalAgent.Subscription.&lt;instance
number&gt;.’, and a single entry in the <code>updated_params</code> map
containing ‘NotifRetry’ as the key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element for each object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-false-required-parameters-fail">1.14
Set message with allow partial false, required parameters fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-14">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
false, and a required parameter fails.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-13">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-14">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-13">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;InvalidParameter&#39;
         value: &#39;IrrelevantValue&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with a request path of
‘Device.LocalAgent.Subscription.&lt;instance identifier from test
setup&gt;.’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-13">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error.</p></li>
<li><p>The Error contains an appropriate error code and a single
ParamError element. The ParamError element contains a
<code>param_path</code> of ‘Device.LocalAgent.Subscription.&lt;instance
identifier&gt;.InvalidParameter’ and an appropriate error code.</p></li>
<li><p>The GetResp contains a single Subscription instance that does not
include a ‘InvalidParameter’ parameter.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-false-multiple-objects-required-parameters-fail-in-single-object">1.15
Set message with allow partial false, multiple objects, required
parameters fail in single object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-15">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
false, and required parameters in one of multiple objects fail.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-14">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-15">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT,
and the instance identifiers are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-14">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
         }
      }
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;InvalidParameter&#39;
         value: &#39;IrrelevantValue&#39;
         required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-14">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error.</p></li>
<li><p>The Error contains an appropriate error code and a single
ParamError element. The ParamError element contains a
<code>param_path</code> of ‘Device.LocalAgent.Subscription.&lt;instance
identifier&gt;.InvalidParameter’ and an appropriate error code.</p></li>
<li><p>The GetResp contains at least two Subscription instances, neither
of which contain a <code>InvalidParameter</code> parameter and the first
instance from the test setup does not have an updated
<code>NotifRetry</code> value.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-true-required-parameter-fails-multiple-objects">1.16
Set message with allow partial true, required parameter fails, multiple
objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-16">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
true, and a required parameter on one of multiple objects fails.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-15">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-16">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT,
and the instance identifiers are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-15">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: true
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;InvalidParameter&#39;
         value: &#39;IrrelevantValue&#39;
         required: true
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-15">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains two UpdatedObjectResults.</p>
<ol type="a">
<li><p>The first UpdatedObjectResult has an OperationStatus that is an
element of type OperationSuccess. The OperationSuccess contains a single
UpdatedInstanceResult, with the <code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’, and a single
entry in the <code>updated_params</code> map containing ‘NotifRetry’ as
the key.</p></li>
<li><p>The second UpdatedObjectResult has an OperationStatus that is an
element of type OperationFailure. The OperationFailure contains an
appropriate error code and a single UpdatedInstanceFailure element. The
UpdatedInstanceFailure has an <code>affected_path</code> with a value of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
single ParameterError element.</p></li>
<li><p>The ParameterError has a <code>param</code> element with a value
of ‘InvalidParameter’ and an appropriate error code.</p></li>
</ol></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element for the first object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-allow-partial-true-non-required-parameter-fails-multiple-parameters">1.17
Set message with allow partial true, non-required parameter fails,
multiple parameters</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-17">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the <code>allow_partial</code> element is set to
true, and one of multiple non-required parameters fail.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-16">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-17">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-16">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: true
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
       }
        param_settings {
         param: &#39;InvalidParameter&#39;
         value: &#39;IrrelevantValue&#39;
       }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-16">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains a single UpdatedObjectResult with an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdatedInstanceResult element.</p>
<ol type="a">
<li><p>The UpdatedInstanceResult <code>affected_path</code> is equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’.</p></li>
<li><p>The UpdatedInstanceResult has a single entry in the
<code>updated_params</code> map containing ‘NotifRetry’ as the
key.</p></li>
<li><p>The UpdatedInstanceResult has a single ParameterError element,
with the ‘param’ field set to ‘InvalidParameter’, and an appropriate
error code.</p></li>
</ol></li>
<li><p>The retrieved value of NotifRetry matches the value set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-unique-key-addressing-in-path">1.18 Set message
with unique key addressing in path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-18">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the Controller uses unique key addressing.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-17">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-18">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the unique keys and their values are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-17">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {

    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;unique key instance identifier from test setup&gt;.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-17">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains a single UpdatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdateInstanceResult, with the
<code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’, and a single
entry in the <code>updated_params</code> map containing ‘NotifRetry’ as
the key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-pass">1.19
Set message with wildcard search path, allow partial false, required
parameters pass</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-19">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the Controller uses a wildcard search path and the
requested updates succeed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-18">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-19">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-18">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.*.&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier from test setup&gt;.NotifRetry&#39;
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-18">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains an UpdatedObjectResults element that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains at least two UpdateInstanceResults, each with
the <code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’ of the
respective instance, and a single entry in the
<code>updated_params</code> map containing ‘NotifRetry’ as the
key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element for each object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-wildcard-search-path-allow-partial-false-required-parameters-fail">1.20
Set message with wildcard search path, allow partial false, required
parameters fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-20">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the Controller uses a wildcard search path,
<code>allow_partial</code> element is set to false, and required
parameters in multiple objects fail.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-19">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-20">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-19">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {

    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.*.&#39;
        param_settings {
         param: &#39;InvalidParameter&#39;
         value: &#39;IrrelevantValue&#39;
         required: true
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-19">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error.</p></li>
<li><p>The Error contains an appropriate error code and at least one
ParamError element. The ParamError element contains a
<code>param_path</code> of ‘Device.LocalAgent.Subscription.&lt;instance
identifier of relevant object&gt;.InvalidParameter’ and an appropriate
error code.</p></li>
<li><p>In the GetResp there are no Subscription instances with an
‘InvalidParameter’ parameter.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-wildcard-search-path-allow-partial-true-required-parameters-fail">1.21
Set message with wildcard search path, allow partial true, required
parameters fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-21">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the Controller uses a wildcard search path, the
<code>allow_partial</code> element is set to true, and a required
parameter on multiple objects fails.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-20">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-21">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-20">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: true
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.*.&#39;
        param_settings {
         param: &#39;Enable&#39;
         value: &#39;InvalidValue&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-20">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains an UpdatedObjectResults element.</p></li>
<li><p>The UpdatedObjectResults has an OperationStatus that is an
element of type OperationFailure. The OperationFailure contains an
appropriate error code and at least one UpdatedInstanceFailure elements.
The UpdatedInstanceFailure has an <code>affected_path</code> with a
value of ‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’
for the respective failed instance, and a single ParameterError element.
The ParameterError has a <code>param</code> element that indicates the
Enable parameter, and an appropriate error code.</p></li>
<li><p>The EUT has no Subscription objects that have an Enable parameter
set to ‘InvalidValue’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-search-expression-search-path">1.22 Set message
with search expression search path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-22">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the Controller uses a search path.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-21">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-22">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT
with a value for the NotifExpiration that is greater than 0.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-21">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.[NotifExpiration&gt;0].&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup&gt;.NotifRetry&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-21">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains at least one UpdatedObjectResult that has an
OperationStatus that is an element of type OperationSuccess. The
OperationSuccess contains a single UpdateInstanceResult, with the
<code>affected_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’, and a single
entry in the <code>updated_params</code> map containing ‘NotifRetry’ as
the key.</p></li>
<li><p>The retrieved value matches the value set in the
<code>param_settings</code> element.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:set-message-with-path-that-matches-no-objects">1.23 Set message
with path that matches no objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-23">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Set message when the requested path is a search path that does not
match any objects, returning an empty <code>oper_success</code>
element.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-22">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-23">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-22">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: true
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.[Recipient==&quot;InvalidValue&quot;].&#39;
        param_settings {
         param: &#39;NotifRetry&#39;
         value: &#39;&lt;Valid Value&gt;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a SetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-22">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a SetResp.</p></li>
<li><p>The SetResp contains one UpdatedObjectResult with an empty
<code>oper_success</code> element
(i.e. <code>oper_success {}</code>).</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-false-valid-object-instance">1.24
Delete message with allow partial false, valid object instance</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-24">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
false, and the object to be deleted is valid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-23">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-24">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that a Subscription object exists on the EUT, and the
instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-23">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-23">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains a single
<code>deleted_obj_response</code> with a <code>requested_path</code>
equal to ‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’
and an <code>oper_success</code> element, with one
<code>affected_path</code> element equal to the path name of the Deleted
object.</p></li>
<li><p>The GetResp does not contain the Subscription instance that was
deleted.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-false-object-instance-doesnt-exist">1.25
Delete message with allow partial false, object instance doesn’t
exist</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-25">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
false, and the object instance to be deleted does not exist.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-24">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-25">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned any existing
Subscription objects and their instance identifiers.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-24">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: false
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;non-existent instance identifier&gt;.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send an DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-24">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a DeleteResp containing an empty
<code>oper_success</code> element.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-false-invalid-object">1.26
Delete message with allow partial false, invalid object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-26">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
false, and the object to be deleted is invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-25">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-26">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-25">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
 }
 body {
   request {
     delete {
       allow_partial: false
       obj_paths: &#39;Device.LocalAgent.InvalidObject.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send an Error message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-25">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> of ‘Device.LocalAgent.InvalidObject.’, and an
appropriate error code.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-false-multiple-objects">1.27
Delete message with allow partial false, multiple objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-27">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
false, with multiple valid objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-26">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-27">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT,
and the instance identifiers are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-26">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: false
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;first instance identifier&gt;.&#39;
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;second instance identifier&gt;.&#39;
     }
   }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-26">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains two <code>deleted_obj_results</code>,
each with a <code>requested_path</code> equal to the
<code>obj_paths</code> of the Delete message, and an
<code>oper_success</code> element containing an
<code>affected_path</code> element equal to the path name of the deleted
object.</p></li>
<li><p>The GetResp does not contain the deleted Subscription
objects.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-false-multiple-objects-invalid-object">1.28
Delete message with allow partial false, multiple objects, invalid
object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-28">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
false, and one of the objects to be deleted is invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-27">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-28">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-27">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: false
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier.&gt;&#39;
       obj_paths: &#39;Device.LocalAgent.InvalidObject.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send an Error message.</p></li>
<li><p>Send a Get message to the EUT with a request path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-27">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message.</p></li>
<li><p>The Error contains an appropriate error code with the
<code>param_errs</code> element containing a single error with a
<code>param_path</code> of ‘Device.LocalAgent.InvalidObject.’, and an
appropriate error code.</p></li>
<li><p>The GetResp contains the Subscription that was not deleted by
step 1.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-true-object-instance-doesnt-exist">1.29
Delete message with allow partial true, object instance doesn’t
exist</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-29">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
true, and the object instance to be deleted does not exist.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-28">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-29">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-28">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: true
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;invalid instance identifier&gt;.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-28">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a DeleteResp containing an empty
<code>oper_success</code> element (i.e.,
<code>oper_success{}</code>).</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-true-invalid-object">1.30
Delete message with allow partial true, invalid object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-30">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
true, and the object is not valid in the Agent’s supported data
model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-29">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-30">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-29">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
 }
 body {
   request {
     delete {
       allow_partial: true
       obj_paths: &#39;Device.LocalAgent.InvalidObject.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-29">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains a single <code>deleted_obj_result</code>
message with a <code>requested_path</code> of
‘Device.LocalAgent.InvalidObject.’ and an <code>oper_failure</code>
element, with an appropriate error code.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-true-multiple-objects-invalid-object">1.31
Delete message with allow partial true, multiple objects, invalid
object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-31">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
true, and one of multiple objects is invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-30">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-31">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-30">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: true
       obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
       obj_paths: &#39;Device.LocalAgent.InvalidObject.&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-30">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains two <code>deleted_obj_results</code>
elements, one with an <code>oper_success</code> element, containing an
<code>affected_path</code> element with the value
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and the
other with an <code>oper_failure</code> element containing an
appropriate error code.</p></li>
<li><p>The GetResp does not contain the Subscription instance deleted in
step 1.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-allow-partial-true-multiple-objects-object-doesnt-exist">1.32
Delete message with allow partial true, multiple objects, object doesn’t
exist</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-32">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the <code>allow_partial</code> element is set to
true, and one of multiple objects does not exist in the Agent’s
instantiated data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-31">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-32">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-31">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
body {
  request {
    delete {
      allow_partial: true
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;invalid instance identifier&gt;.&#39;
      }
     }
    }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-31">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains two deleted_obj_results elements. One
contains an <code>oper_success</code> element with an
<code>affected_path</code> element listing
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’. The
second contains an empty <code>oper_success</code> element (i.e.,
<code>oper_success{}</code>).</p></li>
<li><p>The GetResp does not contain the Subscription instance deleted in
step 1.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-unique-key-addressing">1.33 Delete message
with unique key addressing</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-33">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the Controller uses unique key addressing.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-32">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-33">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Obtain the unique key values of the Device.LocalAgent. object
that correlates with the source of the test USP messages.</p></li>
<li><p>Ensure that at least one
Device.LocalAgent.Controller.{i}.BootParameter. object exists on the
EUT, and the instance identifier of the object is known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-32">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Controller.[EndpointID==&quot;&lt; EndpointID&gt;&quot;&amp;&amp;Alias==&quot;&lt;Alias if supported&gt;&quot;].BootParameter.&lt;instance identifier&gt;.&#39;
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Controller.&lt;instance ID&gt;.BootParameter.</code></p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-32">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains a single <code>deleted_obj_result</code>
with a requested path equal to the path specified in the
<code>obj_path</code> of the Delete message, containing an
<code>oper_success</code> element, with one <code>affected_path</code>
element equal to the path name of the Deleted object.</p></li>
<li><p>The <code>affected_path</code> element uses instance number
addressing.</p></li>
<li><p>The GetResp does not contain the BootParameter deleted in step
1.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-wildcard-search-path-valid-objects">1.34
Delete message with wildcard search path, valid objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-34">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the Controller uses a wildcard search to delete
multiple valid objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-33">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-34">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-33">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.*.&#39;
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Subscription.</code></p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-33">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains a single <code>deleted_obj_result</code>
with a requested path equal to ’Device.LocalAgent.Subscription.*.’ and
an <code>oper_success</code> element with one or more
<code>affected_path</code> elements equal to the path names of the
Deleted objects.</p></li>
<li><p>The GetResp does not contain any of the Subscription instances
deleted in step 1.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-search-expression-search-path">1.35 Delete
message with search expression search path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-35">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message when the Controller uses a search expression to delete
one or more valid objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-34">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-35">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the instance identifier of the Controller object that
represents the traffic generator is known by the traffic
generator.</p></li>
<li><p>Ensure that at least two
Device.LocalAgent.Controller.&lt;instance identifier&gt;.BootParameter.
objects exist on the EUT. At least one of these BootParameter objects
has a value of ‘false’ for its ‘Enable’ parameter, and at least one of
these BootParameter objects has a value of ‘true’ for its ‘Enable’
parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-34">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.BootParameter.[Enable==true].&#39;
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with a requested path of
<code>Device.LocalAgent.Controller.&lt;instance ID&gt;.BootParameter.</code>.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-34">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a DeleteResp.</p></li>
<li><p>The DeleteResp contains a single <code>deleted_obj_results</code>
element, with a <code>requested_path</code> equal to
‘Device.LocalAgent.Controller.&lt;instance
identifier&gt;.BootParameter.[Enable==true]’ and an
<code>oper_success</code> element with the <code>affected_path</code>
elements equal to the path names of the successfully Deleted
objects.</p></li>
<li><p>The BootParameter whose Enable parameter was equal to ‘false’ was
not deleted.</p></li>
<li><p>The GetResp does not contain any BootParameter instances where
<code>Enable==true</code>.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-full-parameter-path">1.36 Get message with full
parameter path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-36">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when a
single full parameter path is specified.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-35">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-36">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-35">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.EndpointID&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-35">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>req_path_results</code> has no errors, a
<code>requested_path</code> equal to ‘Device.LocalAgent.EndpointID’, and
contains a single <code>resolved_path_results</code> element. The
<code>resolved_path_results</code> element contains a
<code>resolved_path</code> equal to ‘Device.LocalAgent.’ and a single
<code>result_params</code> element with a key of ‘EndpointID’ and a
value equal to the EUT’s EndpointID.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-multiple-full-parameter-paths-same-object">1.37
Get message with multiple full parameter paths, same object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-37">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when
multiple full parameter paths are specified within the same object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-36">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-37">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-36">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.EndpointID&#39;
      param_paths: &#39;Device.LocalAgent.SoftwareVersion&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-36">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains two <code>req_path_results</code> elements.
The <code>requested_path_results</code> have no errors. Each contains a
single <code>resolved_path_results</code> element. One
<code>resolved_path_result</code> element contains a
<code>requested_path</code> equal to ‘Device.LocalAgent.EndpointID’, a
single <code>resolved_path</code> equal to ‘Device.LocalAgent.’, and a
single <code>result_params</code> element with a key of ‘EndpointID’ and
a value equal to the EUT EndpointID. The other
<code>resolved_path_result</code> element contains a
<code>requested_path</code> equal to
‘Device.LocalAgent.SoftwareVersion’, a single <code>resolved_path</code>
equal to ‘Device.LocalAgent.’, and a single <code>result_params</code>
element with a key of ‘SoftwareVersion’ with a valid value.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-multiple-full-parameter-paths-different-objects">1.38
Get message with multiple full parameter paths, different objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-38">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when
multiple full parameter paths are specified within multiple objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-37">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-38">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and its instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-37">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.EndpointID&#39;
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.Enable&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-37">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains two <code>req_path_results</code> elements.
The <code>requested_path_results</code> have no errors. Each contains a
single <code>resolved_path_results</code> element. One
<code>resolved_path_result</code> element contains a
<code>requested_path</code> equal to ‘Device.LocalAgent.EndpointID’, a
single <code>resolved_path</code> equal to ‘Device.LocalAgent.’, and a
single <code>result_params</code> element with a key of ‘EndpointID’ and
a value equal to the EUT EndpointID. The other
<code>resolved_path_result</code> element contains a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.Enable’, a
single <code>resolved_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
single <code>result_params</code> element with a key of ‘Enable’ with a
valid value.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-object-path">1.39 Get message with object
path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-39">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when an
object path is specified.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-38">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-39">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-38">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-38">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to ‘Device.LocalAgent.’, and a set of
<code>resolved_path_results</code> elements. One contains a
<code>resolved_path</code> of ‘Device.LocalAgent.’, and a number of
<code>result_params</code> elements contain keys and values of the
parameters of ‘Device.LocalAgent.’. Additional
<code>resolved_path_results</code> exist for each of the sub-objects of
Device.LocalAgent., with <code>result_params</code> containing the keys
and values of each sub-object’s parameters.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-object-instance-path">1.40 Get message with
object instance path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-40">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when a path
to an object instance is specified.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-39">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-40">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and its instance identifier is known by the traffic generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-39">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-39">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
single <code>resolved_path_results</code> element, with a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
series of <code>result_params</code> elements containing the keys and
values of the parameters of the instance.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-invalid-parameter">1.41 Get message with
invalid parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-41">Purpose</h3>
<p>The purpose of this test is to ensure the Agent can properly handle a
Get message when a single invalid parameter is requested.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-40">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-41">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-40">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.InvalidParameter&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-40">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has a
<code>requested_path</code> equal to
‘Device.LocalAgent.InvalidParameter’, and an appropriate error
code.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-invalid-parameter-and-valid-parameter">1.42 Get
message with invalid parameter and valid parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-42">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when both a
valid and invalid parameter are requested.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-41">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-42">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-41">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
       param_paths: &#39;Device.LocalAgent.EndpointID&#39;
       param_paths: &#39;Device.LocalAgent.InvalidParameter&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-41">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains two <code>req_path_results</code> elements.
One <code>requested_path_results</code> has no errors, and contains a
single <code>resolved_path_results</code> element. The
<code>resolved_path_results</code> element contains a
<code>requested_path</code> equal to ‘Device.LocalAgent.EndpointID’, a
single <code>resolved_path</code>equal to ‘Device.LocalAgent.’, and a
single <code>result_params</code> element with a key of ‘EndpointID’ and
a value equal to the EUT EndpointID. The other
<code>requested_path_results</code> has a <code>requested_path</code>
equal to ‘Device.LocalAgent.InvalidParameter’, and an appropriate error
code.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-unique-key-addressing">1.43 Get message using
unique key addressing</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-43">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses unique key addressing.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-42">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-43">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the unique keys and their values are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-42">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;unique key identifier&gt;.Enable&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-42">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.&lt;unique key identifier&gt;.Enable’,
and a single <code>resolved_path_results</code> element, with a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
result_params element containing a key of ‘Enable’ and a valid
value.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-wildcard-search-path-on-full-parameter">1.44
Get message using wildcard search path on full parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-44">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a wildcard to retrieve a single parameter from
multiple objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-43">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-44">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-43">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.*.Enable&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-43">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
’Device.LocalAgent.Subscription.*.Enable’, and at least two
<code>resolved_path_results</code> elements, each with a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
<code>result_params</code> element containing a key of ‘Enable’ and a
valid value.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-wildcard-search-path-on-object-path">1.45 Get
message using wildcard search path on object path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-45">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a wildcard to retrieve all parameters from multiple
object instances.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-44">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-45">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-44">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.*.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-44">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
’Device.LocalAgent.Subscription.*.’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each Subscription object.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-equivalence">1.46
Get message using search expression search path (equivalence)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-46">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path to retrieve objects that that
parameters that match a particular value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-45">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-46">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘true’
for its Enable parameter, and at least one should have a value of
‘false’ for its Enable parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-45">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[Enable==true].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-45">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[Enable==true].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each Subscription object where the Enable parameter
is ‘true’.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose Enable parameter is ‘false’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-non-equivalence">1.47
Get message using search expression search path (non-equivalence)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-47">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path that does not match a particular
value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-46">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-47">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘true’
for its Enable parameter, and at least one should have a value of
‘false’ for its Enable parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-46">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[Enable!=true].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-46">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[Enable!=true].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each subscription object where the Enable parameter
is ‘false’.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose Enable parameter is ‘true’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-exclusive-greater-comparison">1.48
Get message using search expression search path (exclusive greater
comparison)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-48">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path to retrieve objects that that
parameters that are greater than a particular value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-47">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-48">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘10’
for its NotifExpiration parameter, and at least one with a value of ‘20’
for its NotifExpiration parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-47">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[NotifExpiration&gt;10].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-47">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[NotifExpiration&gt;10].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each Subscription object where the NotifExpiration
parameter is greater than 10.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose NotifExpiration parameter is equal to or less than 10.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-exclusive-lesser-comparison">1.49
Get message using search expression search path (exclusive lesser
comparison)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-49">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path to retrieve objects that that
parameters that are less than a particular value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-48">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-49">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least two Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘10’
for its NotifExpiration parameter, and at least one with a value of ‘5’
for its NotifExpiration parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-48">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[NotifExpiration&lt;10].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-48">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[NotifExpiration&lt;10].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements contain keys and values of
the parameters of each Subscription object where the NotifExpiration
parameter is less than 10.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose NotifExpiration parameter is equal to or greater than 10.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-inclusive-greater-comparison">1.50
Get message using search expression search path (inclusive greater
comparison)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-50">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path to retrieve objects that that
parameters that are greater than or equal to a particular value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-49">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-50">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least three Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘10’
for its NotifExpiration parameter, at least one with a value of ‘20’ for
its NotifExpiration parameter, and at least one with a value of ‘5’ for
its NotifExpiration parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-49">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[NotifExpiration&gt;=10].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-49">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[NotifExpiration&gt;=10].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each Subscription object where the NotifExpiration
parameter is greater than or equal to 10.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose NotifExpiration parameter is less than 10.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-search-expression-search-path-inclusive-lesser-comparison">1.51
Get message using search expression search path (inclusive lesser
comparison)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-51">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model when the
requested path uses a search path to retrieve objects that that
parameters that are less than or equal to a particular value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-50">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-51">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least three Subscription objects exist on the EUT.
At least one of these Subscription objects should have a value of ‘10’
for its NotifExpiration parameter, at least one with a value of ‘20’ for
its NotifExpiration parameter, and at least one with a value of ‘5’ for
its NotifExpiration parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-50">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[NotifExpiration&lt;=10].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-50">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[NotifExpiration&lt;=10].’, and a set of
<code>resolved_path_results</code> elements. Each contains a
<code>resolved_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance identifier&gt;.’, and a
number of <code>result_params</code> elements containing keys and values
of the parameters of each Subscription object where the NotifExpiration
parameter is less than or equal to 10.</p></li>
<li><p>The keys of all <code>result_params</code> elements are relative
paths.</p></li>
<li><p>The EUT does not return any parameters from Subscription objects
whose NotifExpiration parameter is greater than 10.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notify---subscription-creation-using-value-change">1.52 Notify -
Subscription creation using Value Change</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-52">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will create
Subscriptions requested by the Controller, and notifies the Controller
when the conditions of the subscription are triggered. This test uses
the ValueChange event to exercise these functions, validating the
behavior of ValueChange in the process.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-51">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-52">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue52’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-51">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify52&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue52&#39;
          required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-51">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful AddResp.</p></li>
<li><p>The EUT sends a Notify message with a
<code>subscription_id</code> field equal to ‘Notify52’, and an event
element of <code>value_change</code> with a <code>param_path</code> of
‘Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode’ and a <code>param_value</code> of
‘TestValue52’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notify---subscription-deletion-using-value-change">1.53 Notify -
Subscription Deletion Using Value Change</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-53">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will remove and
terminate a Subscription when the Controller uses the Delete
message.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-52">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-53">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue53’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-52">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify53&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp, and store the instance
identifier of the Subscription object.</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue53&#39;
          required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
<li><p>Send a Delete message with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
<li><p>Repeat step 3, changing the value of ProvisioningCode to
‘notify53-2’.</p></li>
<li><p>Wait 20 seconds.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-52">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful DeleteResp.</p></li>
<li><p>The EUT does not send a Notify message based on the activity in
the ProvisioningCode parameter.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notification-retry-using-value-change">1.54 Notification Retry
using Value Change</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-54">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will attempt to
resend Notify messages when the NotifRetry parameter in a Subscription
object is set to true and the Controller does not send a NotifyResp.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-53">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-54">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue54’.</p></li>
<li><p>Ensure that the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.USPNotifRetryMinimumWaitInterval is set to its default
value (5).</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-53">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify54&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue54&#39;
          required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Do not send a NotifyResp to the EUT.</p></li>
<li><p>Wait 10 seconds to allow the EUT to send a Notify
message.</p></li>
<li><p>Do not send a NotifyResp to the EUT.</p></li>
<li><p>Wait 20 seconds to allow the EUT to send a Notify
message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-53">Test Metrics</h3>
<ol type="1">
<li><p>The EUT retries the Notify message.</p></li>
<li><p>The first retry occurs within 5-10 seconds. The second retry
occurs within 10-20 seconds.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:subscription-expiration-using-value-change">1.55 Subscription
Expiration using Value Change</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-55">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent removes a
Subscription from the Subscription table after its TimeToLive has
expired.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-54">Functionality Tag</h3>
<p>Conditionally Mandatory (Supports TimeToLive in
Device.LocalAgent.Subscription.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-55">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue55’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-54">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify55&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;TimeToLive&#39;
            value: &#39;20&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue55&#39;
          required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
<li><p>Wait 20 seconds.</p></li>
<li><p>Send a GetInstances message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
      msg_id: &#39;&lt;msg_id&gt;&#39;
      msg_type: GET_INSTANCES
    }
body {
      request {
        get_instances {
          obj_paths: &#39;Device.LocalAgent.Subscription.&#39;
        }
      }
    }</code></pre></li>
<li><p>Allow the EUT to send a GetInstancesResponse.</p></li>
<li><p>Repeat step 3 with a value of ‘TestValue55-2’.</p></li>
<li><p>Wait 10 seconds.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-54">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a Notify message after step 3.</p></li>
<li><p>The GetInstancesResponse does not list the instance of the
Subscription object created in step 1.</p></li>
<li><p>The EUT does not send a Notify message after step 9.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notification-retry-expiration-using-value-change">1.56
Notification Retry Expiration using Value Change</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-56">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will cease
attempts to retry Notify messages after an amount of time specified in
value of the NotifExpiration parameter in the Subscription object has
passed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-55">Functionality Tag</h3>
<p>Conditional Mandatory (supports Subscription.{i}.NotifExpiration
parameter).</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-56">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue56’.</p></li>
<li><p>Ensure that the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.USPNotifRetryMinimumWaitInterval is set to its default
value (5).</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-55">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify56&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;NotifExpiration&#39;
            value: &#39;20&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue56&#39;
          required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Do not send a NotifyResp to the EUT.</p></li>
<li><p>Wait 10 seconds to allow the EUT to send a Notify
message.</p></li>
<li><p>Do not send a NotifyResp to the EUT.</p></li>
<li><p>Wait 20 seconds to allow the EUT to send a Notify
message.</p></li>
<li><p>Do not send a Notify Response to the EUT.</p></li>
<li><p>Wait 30 seconds.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-55">Test Metrics</h3>
<ol type="1">
<li><p>The EUT retries the Notify message within 20 seconds.</p></li>
<li><p>The EUT does not retry the Notify message after 20
seconds.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:objectcreation-notification">1.57 ObjectCreation
Notification</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-57">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will send a
Notify message to the Controller when the Controller is Subscribed to
the ObjectCreation event.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-56">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-57">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-56">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify57&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ObjectCreation&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Subscription.&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify57-2&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-56">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful AddResp.</p></li>
<li><p>The EUT sends a Notify message with a
<code>subscription_id</code> field equal to ‘Notify57’, and an event
element of <code>obj_creation</code> with a <code>obj_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’ and a map
element of <code>unique_keys</code> with values of ‘ID, ’Notify57-2’ and
‘Recipient, Device.LocalAgent.Controller.&lt;instance
identifier&gt;.’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:objectdeletion-notification">1.58 ObjectDeletion
Notification</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-58">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will send a
Notify message to the Controller when the Controller is Subscribed to
the ObjectDeletion event.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-57">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-58">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that at least one Subscription object exists on the EUT,
and the unique keys and their values are known by the traffic
generator.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-57">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
            param: &#39;Enable&#39;
            value: &#39;true&#39;
          }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify58&#39;
          }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ObjectDeletion&#39;
          }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Subscription.&#39;
            required: true
          }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
          }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from test setup 2&gt;.&#39;
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp</p></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-57">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful AddResp.</p></li>
<li><p>The EUT sends a Notify message with a
<code>subscription_id</code> field equal to ‘Notify58’, and an event
element of <code>obj_deletion</code> with a <code>obj_path</code> of
‘Device.LocalAgent.Subscription.&lt;instance number&gt;.’</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:event-notification-using-periodic">1.59 Event Notification using
Periodic!</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-59">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will send a
Notify message to the Controller when the Controller is Subscribed to an
Event notification that correlates with an event defined in its
supported data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-58">Functionality Tag</h3>
<p>Conditional Mandatory (supports Controller:1 profile and
Device.LocalAgent.Controller.{i}.PeriodicNotifTime parameter)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-59">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-58">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
          allow_partial: false
            update_objs {
                obj_path: &#39;Device.LocalAgent.Controller.&lt;Controller ID&gt;.&#39;
                param_settings {
                    param: &#39;PeriodicNotifInterval&#39;
                    value: &#39;60&#39;
                }
                param_settings {
                    param: &#39;PeriodicNotifTime&#39;
                    value: &#39;2019-01-01T00:00:00Z&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
          allow_partial: false
          create_objs {
              obj_path: &#39;Device.LocalAgent.Subscription.&#39;
              param_settings {
                      param: &#39;Enable&#39;
                      value: &#39;true&#39;
                  }
              param_settings {
                      param: &#39;ID&#39;
                      value: &#39;sub-103&#39;
                  }
              param_settings {
                      param: &#39;NotifType&#39;
                      value: &#39;Event&#39;
                  }
              param_settings {
                      param: &#39;ReferenceList&#39;
                      value: &#39;Device.LocalAgent.Periodic!&#39;
                  }
              }
        }
    }
}</code></pre></li>
<li><p>Wait for a Notification from the EUT.</p></li>
<li><p>Wait for a Notification from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-58">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a SetResponse with an <code>oper_success</code> after
step 1.</li>
<li>The EUT sends an AddResponse with an <code>oper_success</code> after
step 2.</li>
<li>The EUT sends a Notification with an Periodic! event element.</li>
<li>A second Periodic event is sent by the EUT 60 (+/- 4) seconds after
the first.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:onboardrequest-notification">1.60 OnBoardRequest
Notification</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-60">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will send a
Notify message to the Controller when the Controller initiates a
SendOnBoardRequest() operation.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-59">Functionality Tag</h3>
<p>Conditional Mandatory (supports
Device.LocalAgent.Controller.{i}.SendOnBoardRequest() command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-60">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-59">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: OPERATE
}
body {
  request {
    operate {
      command: &#39;Device.LocalAgent.Controller.&lt;instance identifier of traffic generator&gt;.SendOnBoardRequest()&#39;
      command_key: &#39;test60&#39;
      send_resp: false
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-59">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a Notify message with (at minimum) a
<code>subscription_id</code> field set to an empty string, and an event
element of <code>on_board_req</code> with appropriate values for the
<code>oui</code>, <code>product_class</code>,
<code>serial_number</code>, and
<code>agent_supported_protocol_versions</code> fields.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:operate-message-using-reboot-with-send_resp-true">1.61 Operate
message using Reboot() with send_resp true</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-61">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message using the Reboot() operation as a trigger
when <code>send_resp</code> is true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-60">Functionality Tag</h3>
<p>Conditional Mandatory (supports Reboot:1 or any other command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-61">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-60">Test Procedure</h3>
<ol type="1">
<li>Send an Operate message to the EUT with the following
structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: OPERATE
}
body {
  request {
    operate {
      command: &#39;Device.Reboot()&#39;
      command_key: &#39;test61&#39;
      send_resp: true
    }
  }
}</code></pre>
<ol start="2" type="1">
<li><p>Allow the EUT to send an OperateResp</p></li>
<li><p>Allow the EUT to reboot.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-60">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an OperateResp message with a single
<code>operation_results</code> element containing an
<code>executed_command</code> of ‘Device.Reboot()’ and a
<code>req_output_args</code> element containing an empty
<code>output_args</code> element.</p></li>
<li><p>The EUT reboots and resumes connectivity with the test
system.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:operate-message-using-reboot-with-send_resp-false">1.62 Operate
message using Reboot() with send_resp false</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-62">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message using the Reboot() operation as a trigger
when <code>send_resp</code> is false.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-61">Functionality Tag</h3>
<p>Conditional Mandatory (supports Reboot:1 or any other command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-62">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-61">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: OPERATE
}
body {
  request {
    operate {
      command: &#39;Device.Reboot()&#39;
      command_key: &#39;test62&#39;
      send_resp: false
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to reboot.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-61">Test Metrics</h3>
<ol type="1">
<li>The EUT reboots and resumes connectivity with the test system.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:operate-message-using-input-arguments-deprecated-by-1.79">1.63
Operate message using input arguments (DEPRECATED by 1.79)</h2>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message with input arguments.</p>
<p><em>Note: as of TP-469 Amendment 1, this test has been deprecated to
sync with the deprecation of
Device.LocalAgent.Controller.{i}.ScheduleTimer() in Device:2.14. The
command was replaced with Device.ScheduleTimer() and is covered by test
1.79</em></p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-62">Functionality Tag</h3>
<p>Conditional Mandatory (supports
Device.LocalAgent.Controller.{i}.ScheduleTimer() command or at least one
operation that contains input arguments)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-63">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that a Subscription object exists on the EUT, subscribed to
the Timer! event.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-62">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.Controller.&lt;Controller instance&gt;.ScheduleTimer()&#39;
            command_key: &#39;test63&#39;
            send_resp: true
            input_args {
                key: &#39;DelaySeconds&#39;
                value: &#39;30&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send a Timer! event.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-62">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResp message with a single
<code>operation_results</code> element containing an executed_command of
‘Device.LocalAgent.Controller.&lt;Controller
instance&gt;.ScheduleTimer()’ and a <code>req_output_args</code> element
containing an empty <code>output_args</code> element.</li>
<li>The EUT sends a Notify message containing a Event message with
<code>obj_path</code> of ‘Device.LocalAgent.Controller.&lt;Controller
instance&gt;.ScheduleTimer()’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:asynchronous-operation-with-send_resp-true">1.64 Asynchronous
operation with send_resp true</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-63">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message where the operation is asynchronous and
<code>send_resp</code> is set to true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-63">Functionality Tag</h3>
<p>Conditional Mandatory (supports the TraceRoute:1 profile or at least
one other asynchronous operation)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-64">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that a Subscription object exists on the EUT that is
subscribed to the OperationComplete notification for the supported
asynchronous operation.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-63">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;&lt;supported async operation&gt;&#39;
            command_key: &#39;test64&#39;
            send_resp: true
            input_args {
               key: &#39;&lt;required input argument&gt;&#39;
               value: &#39;&lt;value&gt;&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an OperateResp message with an
<code>executed_command</code> which matches the command sent in the
Operate message.</p></li>
<li><p>Allow the EUT to send a Notify message with an inner
OperationComplete message with a <code>obj_path</code> element matching
the command sent in the Operate Message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-63">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResp message with a single
<code>operation_results</code> element containing an
<code>executed_command</code> matching the command sent in the Operate
message and a <code>req_obj_path</code> field containing a path name to
the Request object created by the EUT.</li>
<li>The EUT sends a Notify message with <code>obj_path</code> and
<code>command_name</code> forming the command sent in the Operate
message, and a <code>command_key</code> of ‘test64’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:asynchronous-operation-with-send_resp-false">1.65 Asynchronous
operation with send_resp false</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-64">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message where the operation is asynchronous and
<code>send_resp</code> is set to false.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-64">Functionality Tag</h3>
<p>Conditional Mandatory (supports the TraceRoute:1 profile or at least
one other asynchronous operation)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-65">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that a Subscription object exists on the EUT that is
subscribed to the OperationComplete notification for the supported
asynchronous operation.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-64">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;&lt;supported async operation&gt;&#39;
            command_key: &#39;test65&#39;
            send_resp: false
            input_args {
               key: &#39;&lt;required input argument&gt;&#39;
               value: &#39;&lt;value&gt;&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send a Notify message containing an
OperationComplete message with <code>obj_path</code> and
<code>command_name</code> forming the command sent in the Operate
message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-64">Test Metrics</h3>
<ol type="1">
<li>The EUT does not send an OperateResp message.</li>
<li>The EUT sends a Notify message containing an OperationComplete
message with <code>obj_path</code> and <code>command_name</code> forming
the command in the Operate message, and a <code>command_key</code> of
‘test65’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-using-a-single-object-first_level_only-true">1.66
GetInstances using a single object, first_level_only true</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-65">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetInstances message on a single object when first_level_only
is true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-65">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-66">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the Agent has at least one entry in the
Device.LocalAgent.Controller.{i}. table and supports at least one
multi-instance sub-object (e.g., .MTP.{i}., etc.)</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-65">Test Procedure</h3>
<ol type="1">
<li>Send a GetInstances message to the EUT with the following
structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_INSTANCES
}
body {
    request {
        get_instances {
            obj_paths: &#39;Device.LocalAgent.Controller.&#39;
            first_level_only: true
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-65">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetInstancesResp with one
<code>req_path_results</code> elements containing a
<code>requested_path</code> of ‘Device.LocalAgent.Controller.’ and at
least one <code>cur_insts</code> element.</li>
<li>All <code>instantiated_obj_path</code> elements in the
GetInstancesResp only contain ‘Device.LocalAgent.Controller.’
instances.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-using-a-single-object-first_level_only-false">1.67
GetInstances using a single object, first_level_only false</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-66">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetInstances message on a single object when
<code>first_level_only</code> is false.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-66">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-67">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the Agent has at least one entry in the
Device.LocalAgent.Controller.{i}. table and supports at least one
multi-instance sub-object (e.g., .MTP.{i}., etc.)</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-66">Test Procedure</h3>
<ol type="1">
<li>Send a GetInstances message to the EUT with the following
structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_INSTANCES
}
body {
    request {
        get_instances {
            obj_paths: &#39;Device.LocalAgent.Controller.&#39;
            first_level_only: false
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-66">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetInstancesResp with one
<code>req_path_results</code> elements containing a
<code>requested_path</code> of ‘Device.LocalAgent.Controller.’, and
lists all instances of the Controller object, plus any instances of all
sub-objects.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-with-multiple-objects">1.68 GetInstances with
multiple objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-67">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetInstances message on multiple objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-67">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-68">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-67">Test Procedure</h3>
<ol type="1">
<li>Send a GetInstances message to the EUT with the following
structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_INSTANCES
}
body {
    request {
        get_instances {
            obj_paths: &#39;Device.LocalAgent.Controller.&#39;
            obj_paths: &#39;Device.LocalAgent.MTP.&#39;
            first_level_only: true
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-67">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetInstancesResp with two
<code>req_path_results</code> elements containing a
<code>requested_path</code> of ‘Device.LocalAgent.Controller.’ and
‘Device.LocalAgent.MTP.’</li>
<li>Both <code>req_path_results</code> and each having at least one
<code>cur_insts</code> element.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header" id="sec:deleted"><em>1.69
DELETED</em></h2>
<p><em>Note: This test was formerly named “GetInstances with root
object” and was invalid. It has been removed from this version of the
test plan and exists only as a placeholder for numeric
consistency.</em></p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-with-wildcard-search-path">1.70 GetInstances with
wildcard search path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-68">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetInstances message when a wildcard search path is used.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-68">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-69">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-68">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetInstances message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_INSTANCES
}
body {
    request {
        get_instances {
            obj_paths: &#39;Device.LocalAgent.Controller.*.MTP.&#39;
            first_level_only: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-68">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetInstancesResp with at least one
<code>req_path_results</code> element containing a
‘Device.LocalAgent.Controller.{i}.MTP.’ instance.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-with-search-expression-search-path">1.71
GetInstances with search expression search path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-69">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetInstances message when a search expression search path is
used.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-69">Functionality Tag</h3>
<p>Conditional Mandatory (Supports least one nested multi-instance
object)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-70">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure there is at least one BootParameter for the Controller
instance used for testing.</li>
<li>Ensure the Alias of the Controller used for testing is known.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-69">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetInstances message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_INSTANCES
}

body {
    request {
        get_instances {
            obj_paths: &#39;Device.LocalAgent.Controller.[Alias==&quot;&lt;Controller alias&gt;&quot;].BootParameter.&#39;
            first_level_only: false
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-69">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetInstancesResp with at least one
<code>req_path_results</code> element containing a
‘Device.LocalAgent.Controller.&lt;Controller
instance&gt;.BootParameter.’ instance.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-using-a-single-object-first_level_only-false-all-options">1.72
GetSupportedDM using a single object, first_level_only false, all
options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-70">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetSupportedDM message using a single object, when
<code>first_level_only</code> is false and all options are true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-70">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-71">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-70">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.LocalAgent.&#39;
            first_level_only: false
            return_commands: true
            return_events: true
            return_params: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-70">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp.</li>
<li>Every <code>req_obj_results</code> element contains all parameters,
events, and commands below the specified partial path, plus the
supported data model information of all sub-objects.</li>
<li>Each SupportedParamResult field contains the
<code>param_name</code>, <code>access</code>, <code>value_type</code>,
and <code>value_change</code> fields with valid information, if the
element is a parameter.</li>
<li>Each SupportedCommandResult field contains the
<code>command_name</code> field, <code>command_type</code> field, and a
set of <code>input_arg_names</code> and <code>output_arg_names</code>
fields with valid information, if the element is a command.</li>
<li>Each SupportedEventResult field contains the <code>event_name</code>
field and a set of <code>arg_names</code> fields with valid information,
if the element is an event.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-using-a-single-object-first_level_only-true-all-options">1.73
GetSupportedDM using a single object, first_level_only true, all
options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-71">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetSupportedDM message using a single object, when
<code>first_level_only</code> is true and all options are true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-71">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-72">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-71">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.LocalAgent.&#39;
            first_level_only: true
            return_commands: true
            return_events: true
            return_params: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-71">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp containing
<code>req_object_results</code> elements for the specified object and
each immediate child object.</li>
<li>Only the <code>req_obj_results</code> element of the object
specified in <code>obj_paths</code> contains parameters, events, and
commands.</li>
<li>Each SupportedParamResult field contains the
<code>param_name</code>, <code>access</code>, <code>value_type</code>,
and <code>value_change</code> fields with valid information, if
applicable.</li>
<li>Each SupportedCommandResult field contains the
<code>command_name</code> field, <code>command_type</code> field, and a
set of <code>input_arg_names</code> and <code>output_arg_names</code>
fields with valid information, if applicable.</li>
<li>Each SupportedEventResult field contains the <code>event_name</code>
field and a set of <code>arg_names</code> fields with valid information,
if applicable.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-using-a-single-object-first_level_only-true-no-options">1.74
GetSupportedDM using a single object, first_level_only true, no
options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-72">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetSupportedDM message using a single object, when
<code>first_level_only</code> is true and all options are false.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-72">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-73">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-72">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.LocalAgent.&#39;
            first_level_only: true
            return_commands: false
            return_events: false
            return_params: false
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-72">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp containing
<code>req_object_results</code> elements for the specified object and
each immediate child object.</li>
<li>None of the <code>req_obj_results</code> elements contain any
commands, events, or params.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-using-multiple-objects-first_level_only-true-all-options">1.75
GetSupportedDM using multiple objects, first_level_only true, all
options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-73">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process a GetSupportedDM message using multiple objects, when
<code>first_level_only</code> is true and all options are true.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-73">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-74">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-73">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.LocalAgent.Controller.&#39;
            obj_paths: &#39;Device.LocalAgent.MTP.&#39;
            first_level_only: true
            return_commands: true
            return_events: true
            return_params: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-73">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp containing
<code>req_object_results</code> elements for the specified objects and
each immediate child object.</li>
<li>Only the <code>req_obj_results</code> element of the object
specified in <code>obj_paths</code> contains parameters, events, and
commands.</li>
<li>Each SupportedParamResult field contains the
<code>param_name</code>, <code>access</code>, <code>value_type</code>,
and <code>value_change</code> fields with valid information, if
applicable.</li>
<li>Each SupportedCommandResult field contains the
<code>command_name</code> field, <code>command_type</code> field, and a
set of <code>input_arg_names</code> and <code>output_arg_names</code>
fields with valid information, if applicable.</li>
<li>Each SupportedEventResult field contains the <code>event_name</code>
field and a set of <code>arg_names</code> fields with valid information,
if applicable.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-on-root-object-all-options">1.76 GetSupportedDM
on root object, all options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-74">Purpose</h3>
<p>The purpose of this test is to ensure the Agent will correctly
process a GetSupportedDM message when the requested path is the root of
the data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-74">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-75">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-74">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths:&#39;Device.&#39;
            first_level_only: false
            return_commands: true
            return_events: true
            return_params: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-74">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp message with one or more
<code>req_obj_results</code> specifying its entire supported data model,
listing commands, parameters, and events.</li>
<li>Each SupportedParamResult field contains the
<code>param_name</code>, <code>access</code>, <code>value_type</code>,
and <code>value_change</code> fields with valid information, if
applicable.</li>
<li>Each SupportedCommandResult field contains the
<code>command_name</code> field, <code>command_type</code> field, and a
set of <code>input_arg_names</code> and <code>output_arg_names</code>
fields with valid information, if applicable.</li>
<li>Each SupportedEventResult field contains the <code>event_name</code>
field and a set of <code>arg_names</code> fields with valid information,
if applicable.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-on-unsupported-object">1.77 GetSupportedDM on
unsupported object</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:procedure">Procedure</h3>
<p>The purpose of this test is to ensure the Agent will correctly
process a GetSupportedDM message when the requested path is an
unsupported object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-75">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-76">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-75">Test Procedure</h3>
<ol type="1">
<li>Send a GetSupportedDM to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths:&#39;Device.LocalAgent.UnsupportedObject.&#39;
            first_level_only: false
            return_commands: true
            return_events: true
            return_params: true
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-75">Test Metrics</h3>
<ol type="1">
<li>The EUT returns a GetSupportedDMResp with a single
<code>req_obj_results</code> with an appropriate error code.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:removal-of-subscriptions-that-have-no-associated-controller">1.78
Removal of subscriptions that have no associated controller</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-75">Purpose</h3>
<p>According to the Device.LocalAgent.Subscription.{i}.Recipient
parameter:</p>
<pre><code>The value MUST be the Path Name of the Controller instance that will receive the Notification associated with this Subscription. If the referenced object is deleted, this instance MUST also be deleted (so the parameter value will never be an empty string).</code></pre>
<p>This test validates that if a Controller is removed from the Agent’s
Device.LocalAgent.Controller.{i}. table, any associated Subscription
objects are also removed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-76">Functionality Tag</h3>
<p>Conditional Mandatory (supports Controller:1 profile with the ability
to create instances of the Device.LocalAgent.Controller. object)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-77">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the EUT has two Controller instances in its
Device.LocalAgent. Controller.{i}. table, and that both Controllers can
be simulated by the test equipment. Consider one to be the primary
Controller, and the other to be the secondary Controller. Record the
secondary Controller’s instance identifier.</p></li>
<li><p>Ensure that there is at least one Subscription object in the EUT
Device.LocalAgent.Subscription.{i}. table created by the secondary
Controller.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-76">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Controller.&lt;instance identifier of secondary Controller&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an DeleteResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-76">Test Metrics</h3>
<ol type="1">
<li>The Subscription table does not contain the Subscription object
outlined in test setup step 3.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:operate-message-using-input-arguments">1.79 Operate message
using input arguments</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-76">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
process an Operate message with input arguments.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-77">Functionality Tag</h3>
<p>Conditional Mandatory (supports Device.ScheduleTimer() command or at
least one operation that contains input arguments)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-78">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that a Subscription object exists on the EUT with NotifType
OperationComplete on Device.ScheduleTimer().</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-77">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: OPERATE
}
body {
  request {
      operate {
          command: &#39;Device.ScheduleTimer()&#39;
          command_key: &#39;test79&#39;
          send_resp: true
          input_args {
              key: &#39;DelaySeconds&#39;
              value: &#39;30&#39;
          }
      }
  }
}</code></pre></li>
<li><p>Wait at least 30 seconds.</p></li>
<li><p>Allow the EUT to send a Notify message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-77">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResp message with the
<code>req_obj_path</code> field, containing an Object Instance Path to
the Request Object created as a result of this asynchronous
operation.</li>
<li>The EUT sends a Notify message containing a valid OperationComplete
event, with a <code>command_name</code> of ‘ScheduleTimer()’, an
<code>obj_path</code> of ‘Device.’, and a <code>command_key</code> of
‘test79’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupportedprotocol">1.80 GetSupportedProtocol</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-77">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can learn the
supported USP protocol version(s) of the EUT.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-78">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-79">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-78">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedProtocol message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET_SUPPORTED_PROTO
}
body {
  request {
    get_supported_protocol {
      controller_supported_protocol_versions: &#39;&lt;comma-separated list of USP specification versions&gt;&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetSupportedProtocolResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-78">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetSupportedProtocolResponse.</p></li>
<li><p>The <code>agent_supported_protocol_versions</code> element
contains a comma-separated list of supported USP specification
versions.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:automatic-unique-key-generation">1.81 Automatic unique key
generation</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-78">Purpose</h3>
<p>The purpose of this test is to validate that the EUT assigns unique
keys which are not supplied in the Add message.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-79">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-80">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>If the EUT has a limit on the number of instances of the
Subscription object, ensure that the number of existing Subscription
object instances is less than the maximum supported.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-79">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
    request {
      add {
        allow_partial: false
          create_objs {
              obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                  }
                param_settings {
                    param: &#39;NotifType&#39;
                    value: &#39;ValueChange&#39;
                  }
                param_settings {
                    param: &#39;ReferenceList&#39;
                    value: &#39;Device.LocalAgent.SoftwareVersion&#39;
                  }
              }
          create_objs {
              obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                  param: &#39;Enable&#39;
                  value: &#39;true&#39;
                }
                param_settings {
                  param: &#39;NotifType&#39;
                  value: &#39;ValueChange&#39;
                }
                param_settings {
                  param: &#39;ReferenceList&#39;
                  value: &#39;Device.LocalAgent.EndpointID&#39;
                }
            }
        }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Clean-up: Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: DELETE
}
body {
  request {
    delete {
      allow_partial: false
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 1&gt;.&#39;
      obj_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier 2&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-79">Test Metrics</h3>
<ol type="1">
<li><p>The EUT AddResp is valid.</p></li>
<li><p>The AddResp contains two CreatedObjectResults that each have an
OperationStatus of OperationSuccess. The OperationSuccess elements
contains no parameter errors and 3 elements in the unique key map:
Alias, Recipient, and ID. The values of Alias and ID must differ between
the two CreatedObjectResults, and the values of Recipient must be
identical. Alternatively, the OperationSuccess contains 2 elements in
the unique key map if the Alias parameter is not supported: ‘Recipient’,
and ‘ID’. In this case the values of ID must differ between the two
CreatedObjectResults, and the values of Recipient must be
identical.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-unmatched-search-expression">1.82 Get message
with unmatched search expression</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-79">Purpose</h3>
<p>The purpose of this test is to verify that the EUT sends a successful
empty response when a Get request using a search expression returns no
objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-80">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-81">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that no Subscription objects exist on the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-80">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[Enable==true].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-80">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Subscription.[Enable==true].’, and an empty
<code>resolved_path_results</code> element (i.e.,
<code>resolved_path_results{}</code>).</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getinstances-message-with-unmatched-search-expression">1.83
GetInstances message with unmatched search expression</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-80">Purpose</h3>
<p>The purpose of this test is to verify that the EUT sends a successful
empty response when a GetInstances request using a search expression
returns no objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-81">Functionality Tag</h3>
<p>Conditional Mandatory (supports least one nested multi-instance
object)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-82">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-81">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetInstances message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET_INSTANCES
}
body {
  request {
    get_instances {
      obj_paths: &#39;Device.LocalAgent.Controller.[Alias==&quot;&lt;non-existent alias&gt;&quot;].BootParameter.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetInstancesResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-81">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetInstancesResp.</p></li>
<li><p>The GetInstancesResp contains a single
<code>req_path_results</code> element. The
<code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to
‘Device.LocalAgent.Controller.[Alias==“&lt;non-existent
alias&gt;”].BootParameter.’, and an empty <code>curr_insts</code>
element (i.e., <code>curr_insts{}</code>).</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:notification---subscription-using-search-paths">1.84
Notification - Subscription using search paths</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-81">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will create and
acknowledge Subscriptions containing a search path, and notifies the
Controller when the conditions of the subscription are triggered.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-82">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-83">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure there are at least 2 enabled BootParameter instances under
the Controller used for testing.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-82">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &quot;&lt;msg_id&gt;&quot;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &quot;Device.LocalAgent.Subscription.&quot;
        param_settings: {
            param: &quot;Enable&quot;
            value: &quot;true&quot;
        }
        param_settings: {
            param: &quot;ID&quot;
            value: &quot;notify84&quot;
        }
        param_settings: {
            param: &quot;NotifType&quot;
            value: &quot;ValueChange&quot;
        }
        param_settings: {
            param: &quot;ReferenceList&quot;
            value: &quot;Device.LocalAgent.Controller.&lt;instance identifier of Controller&gt;.BootParameter.*.Enable&quot;
            required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &quot;&lt;msg_id&gt;&quot;
  msg_type: SET
}

body {
  request {

    set {
      allow_partial: false
      update_objs {
        obj_path: &quot;Device.LocalAgent.Controller.&lt;instance identifier of Controller&gt;.BootParameter.&lt;valid BootParameter instance&gt;&quot;
        param_settings: {
         param: &quot;Enable&quot;
         value: &quot;false&quot;
         required: true
        }
      }
    }
  }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-82">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResp.</p></li>
<li><p>The EUT sends a notification for the created subscription
containing the BootParameter modified in step 3.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:for-future-work-get-message-with-unresolved-instances---addressing-by-instance-number">1.85
(For future work) Get message with unresolved instances - addressing by
instance number</h2>
<h4 class="auto-hoverlink" data-info="header"
id="sec:purpose-82">Purpose</h4>
<p>This test was left out of version 1.2 of this document. There is some
ambiguity in TR-369 Amendment 2 (USP 1.2) with regards to how paths that
use instance number addressing should be treated when they address
non-existant objects. This will be clarified in a future release.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-unresolved-instances---using-a-search-path">1.86
Get message with unresolved instances - using a search path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-83">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent successfully
responds to a Get request when the requested Instantiated Object Path is
valid but does not resolve to an existing object when using a search
path.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-83">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-84">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that no enabled Subscription objects exist on the
EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-83">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.[Enable==true].&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-83">Test Metrics</h3>
<ol type="1">
<li><p>The EUT’s sends a GetResp.</p></li>
<li><p>The GetResp contains no errors.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>resolved_path_results</code> element is empty
(i.e. <code>resolved_path_results{}</code>).</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-with-unresolved-instances---using-an-object-path">1.87
Get message with unresolved instances - using an object path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-84">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent successfully
responds to a Get request when the requested Instantiated Object Path is
valid but does not resolve to an existing object when using an Object
Path.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-84">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-85">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that no Subscription objects exist on the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-84">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&#39;
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-84">Test Metrics</h3>
<ol type="1">
<li><p>The EUT’s sends a GetResp.</p></li>
<li><p>The GetResp contains no errors.</p></li>
<li><p>The GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> element is empty
(i.e. <code>requested_path_results{}</code>).</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-fails-when-unique-key-is-invalid">1.88 Add message
fails when unique key is invalid</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-85">Purpose</h3>
<p>The purpose of this test is to validate that the EUT will deliver an
error after it receives an Add message that includes a unique key
parameter that is not required but is set to an invalid value.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-85">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-86">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-85">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
           param: &#39;Enable&#39;
           value: &#39;True&#39;
         }
        param_settings {
           param: &#39;Alias&#39;
           value: &#39;88InvalidAlias&#39;
         }
        param_settings {
           param: &#39;NotifType&#39;
           value: &#39;ValueChange&#39;
         }
        param_settings {
           param: &#39;ReferenceList&#39;
           value: &#39;Device.LocalAgent.SoftwareVersion&#39;
         }
        }
      }
    }
  }</code></pre></li>
<li><p>Allow the EUT to send an Error message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-85">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an Error message containing an appropriate error
code.</p></li>
<li><p>The EUT does not create the new Subscription object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:get-message-using-max_depth">1.89 Get message using
max_depth</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-86">Purpose</h3>
<p>The purpose of this test is to ensure the Controller can retrieve the
values of parameters in the Agent’s Instantiated Data Model using the
<code>max_depth</code> field to limit the tree depth of
<code>result_params</code>.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-86">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-87">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-86">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.&#39;
      max_depth: 1
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.&#39;
      max_depth: 2
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.&#39;
      max_depth: 0
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-86">Test Metrics</h3>
<ol type="1">
<li><p>The first GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to ‘Device.LocalAgent.’, and a set of
<code>resolved_path_results</code> elements. One contains a
<code>resolved_path</code> of ‘Device.LocalAgent.’, and a number of
<code>result_params</code> elements ONLY containing keys and values of
the parameters of ‘Device.LocalAgent.’. No additional
<code>resolved_path_results</code> elements are included.</p></li>
<li><p>The second GetResp contains a single
<code>req_path_results</code> element. The
<code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to ‘Device.LocalAgent.’, and a set of
<code>resolved_path_results</code> elements. One contains a
<code>resolved_path</code> of ‘Device.LocalAgent.’, and a number of
<code>result_params</code> elements contain keys and values of the
parameters of ‘Device.LocalAgent.’. Additional
<code>resolved_path_results</code> exist for each of the immediate-child
sub-objects of Device.LocalAgent., with <code>result_params</code>
containing the keys and values of each sub-object’s parameters.</p></li>
<li><p>The third GetResp contains a single <code>req_path_results</code>
element. The <code>requested_path_results</code> has no errors, has a
<code>requested_path</code> equal to ‘Device.LocalAgent.’, and a set of
<code>resolved_path_results</code> elements. One contains a
<code>resolved_path</code> of ‘Device.LocalAgent.’, and a number of
<code>result_params</code> elements contain keys and values of the
parameters of ‘Device.LocalAgent.’. Additional
<code>resolved_path_results</code> exist for each of the sub-objects of
Device.LocalAgent., and their sub-objects, with
<code>result_params</code> containing the keys and values of each
sub-object’s parameters.</p></li>
<li><p>The keys of all <code>result_params</code> elements are Relative
Paths.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:delete-message-with-search-expression-that-matches-no-objects">1.90
Delete message with search expression that matches no objects</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-87">Purpose</h3>
<p>The purpose of this test is to validate that the EUT properly handles
a Delete message using a search path that matches no objects.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-87">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-88">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that no Subscription objects exist in the Agent’s
Instantiated Data Model with the Enable parameter set to
‘false’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-87">Test Procedure</h3>
<ol type="1">
<li><p>Send a Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code> header {
   msg_id: &#39;&lt;msg_id&gt;&#39;
   msg_type: DELETE
  }
 body {
   request {
     delete {
       allow_partial: false
       obj_paths: &#39;Device.LocalAgent.Subscription.[Enable==false].&#39;
     }
   }
 }</code></pre></li>
<li><p>Allow the EUT to send an DeleteResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-87">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a DeleteResp containing an empty
<code>oper_success</code> element.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:unknown-arguments-in-an-operate-message">1.91 Unknown arguments
in an Operate message</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-88">Purpose</h3>
<p>The purpose of this test is to ensure the Agent ignores unknown
arguments that are included in an operate message, using
Device.ScheduleTimer() as an example.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-1">Functionality Tags</h3>
<p>Conditional Mandatory (supports Device.ScheduleTimer() command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-89">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-88">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.ScheduleTimer()&#39;
            send_resp: true
            input_args {
                key: &#39;DelaySeconds&#39;
                value: &#39;10&#39;
            }
            input_args {
                key: &#39;InvalidArgument&#39;
                value: &#39;2&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send an OperateResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-88">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a successful OperateResponse with ‘ScheduleTimer()’ in
the <code>executed_command</code> element.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-uses-default-values-for-operate-arguments">1.92 Agent uses
default values for Operate arguments</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-89">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will correctly
use default values for non-mandatory command arguments that include
defaults defined in the data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-88">Functionality Tag</h3>
<p>Conditional Mandatory (supports the TraceRoute:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-90">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-89">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.IP.Diagnostics.TraceRoute()&#39;
            command_key: &#39;test92&#39;
            send_resp: true
            input_args {
               key: &#39;Host&#39;
               value: &#39;&lt;remote host IP&gt;&#39;
            }
            input_args {
               key: &#39;ProtocolVersion&#39;
               value: &#39;Any&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an Operate Response message with an
<code>executed_command</code> which matches the command sent in the
Operate message.</p></li>
<li><p>Do not reply to the TraceRoute ICMP requests.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-89">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an OperateResp message with a single
<code>operation_results</code> element containing an
<code>executed_command</code> of ‘Device.IP.Diagnostics.TraceRoute()’
and a <code>req_obj_path</code> field containing a path name to the
Request object created by the EUT.</p></li>
<li><p>The EUT attempts a TraceRoute diagnostic against the supplied
host name. It retries 3 times within a 1% range of a 5000 millisecond
delay between each retry, which are the default values.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:subscription-using-triggeraction-config">1.93 Subscription using
TriggerAction Config</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-90">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will update its
configuration when the conditions of a subscription are fulfilled.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-89">Functionality Tag</h3>
<p>Conditional Mandatory (supports the
Device.LocalAgent.Subscription.{i}.TriggerAction and
Device.LocalAgent.Subscription.{i}.TriggerConfigSettings parameters)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-91">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue93’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-90">Test Procedure</h3>
<ol type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
          param: &#39;Enable&#39;
          value: &#39;true&#39;
        }
        param_settings {
          param: &#39;TriggerAction&#39;
          value: &#39;Config&#39;
        }
        param_settings {
            param: &#39;ID&#39;
            value: &#39;notify93&#39;
        }
        param_settings {
            param: &#39;NotifType&#39;
            value: &#39;ValueChange&#39;
        }
        param_settings {
            param: &#39;ReferenceList&#39;
            value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
            required: true
        }
        param_settings {
            param: &#39;NotifRetry&#39;
            value: &#39;true&#39;
        }
      }
    }
  }
}</code></pre>
<ol start="2" type="1">
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following
structure:</p></li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.&#39;
        param_settings {
          param: &#39;TriggerConfigSettings&#39;
          value: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.Enable=false&#39;
          required: true
        }
      }
    }
  }
}</code></pre>
<ol start="4" type="1">
<li>Send a Set message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue93&#39;
          required: true
        }
      }
    }
  }
}</code></pre>
<ol start="5" type="1">
<li>Send a Get message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.Enable&#39;
    }
  }
}</code></pre>
<ol start="6" type="1">
<li>Allow the EUT to send a GetResp.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-90">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful AddResp.</p></li>
<li><p>The EUT sends a GetResp that contains a result_params element
with a key of ‘Enable’ and a value set to ‘false’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:subscription-using-triggeraction-notifyandconfig">1.94
Subscription using TriggerAction NotifyAndConfig</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-91">Purpose</h3>
<p>The purpose of this test is to ensure that the Agent will update its
configuration and notify the Controller when the conditions of a
subscription are fulfilled.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-90">Functionality Tag</h3>
<p>Conditional Mandatory (supports the
Device.LocalAgent.Subscription.{i}.TriggerAction and
Device.LocalAgent.Subscription.{i}.TriggerConfigSettings parameters)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-92">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the traffic generator has learned the instance
identifier of the Device.LocalAgent.Controller. object that represents
the Controller simulated by the traffic generator.</p></li>
<li><p>Set the Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode to an arbitrary value that is not
‘TestValue94’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-91">Test Procedure</h3>
<ol type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
          param: &#39;Enable&#39;
          value: &#39;true&#39;
        }
        param_settings {
          param: &#39;TriggerAction&#39;
          value: &#39;NotifyAndConfig&#39;
        }
        param_settings {
          param: &#39;ID&#39;
          value: &#39;notify94&#39;
          }
        param_settings {
          param: &#39;NotifType&#39;
          value: &#39;ValueChange&#39;
        }
        param_settings {
          param: &#39;ReferenceList&#39;
          value: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.ProvisioningCode&#39;
          required: true
        }
        param_settings {
          param: &#39;NotifRetry&#39;
          value: &#39;true&#39;
        }
      }
    }
  }
}</code></pre>
<ol start="2" type="1">
<li><p>Allow the EUT to send an AddResp</p></li>
<li><p>Send a Set message to the EUT with the following
structure:</p></li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.&#39;
        param_settings {
          param: &#39;TriggerConfigSettings&#39;
          value: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.Enable=false&#39;
          required: true
        }
      }
    }
  }
}</code></pre>
<ol start="4" type="1">
<li>Send a Set message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Controller.&lt;instance identifier&gt;.&#39;
        param_settings {
          param: &#39;ProvisioningCode&#39;
          value: &#39;TestValue94&#39;
          required: true
        }
      }
    }
  }
}</code></pre>
<ol start="5" type="1">
<li><p>Allow the EUT to send a Notify message.</p></li>
<li><p>Send a NotifyResp to the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following
structure:</p></li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 2&gt;.Enable&#39;
    }
  }
}</code></pre>
<ol start="8" type="1">
<li>Allow the EUT to send a GetResp.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-91">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a successful AddResp.</p></li>
<li><p>The EUT sends a Notify message with a subscription_id field equal
to ‘Notify94’, and an event element of value_change with a param_path of
‘Device.LocalAgent.Controller.&lt;instance
identifier&gt;.ProvisioningCode’ and a param_value of
‘TestValue94’.</p></li>
<li><p>The EUT sends a GetResp that contains a result_params element
with a key of ‘Enable’ and a value set to ‘false’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:add-message-with-search-expression">1.95 Add message with search
expression</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-92">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly handles an Add
message that contains a search expression.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-91">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-93">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the EUT has at least two Controller instances in its
Device.LocalAgent.Controller.{i}. table.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-92">Test Procedure</h3>
<ol type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Controller.[Enable==true].BootParameter.&#39;
        param_settings {
          param: &#39;Enable&#39;
          value: &#39;true&#39;
        }
        param_settings {
          param: &#39;ParameterName&#39;
          value: &#39;Device.LocalAgent.SoftwareVersion&#39;
        }
      }
    }
  }
}</code></pre>
<ol start="2" type="1">
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Send a Get message to the EUT with the following
structure:</p></li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Controller.*.BootParameter.&#39;
    }
  }
}</code></pre>
<ol start="4" type="1">
<li>Allow the EUT to send a GetResp.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-92">Test Metrics</h3>
<ol type="1">
<li><p>The AddResp contains at least one CreatedObjectResult object that
has an OperationStatus that has an element of type
OperationSuccess.</p></li>
<li><p>The EUT sends a GetResp that contains the new BootParameter
object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:non-functional-unique-key-immutability">1.96 Non-functional
Unique Key Immutability</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-93">Purpose</h3>
<p>The purpose of this test is to ensure the EUT does not allow a
non-functional unique key to be changed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-92">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-94">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-93">Test Procedure</h3>
<ol type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}

body {
  request {
    add {
      allow_partial: false
      create_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&#39;
        param_settings {
          param: &#39;ID&#39;
          value: &#39;add96&#39;
        }
      }
    }
  }
}</code></pre>
<ol start="2" type="1">
<li>Send a Get message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance identifier&gt;.&#39;
    }
  }
}</code></pre>
<ol start="3" type="1">
<li>Send a Set message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance identifier from step 1&gt;.&#39;
        param_settings {
        param: &#39;ID&#39;
        value: &#39;add96-NEW&#39;
        required: true
        }
      }
    }
  }
}</code></pre>
<ol start="4" type="1">
<li>Allow the EUT to send an Error.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-93">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an Error indicating it did not allow a non-functional
unique key to be changed.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-on-root-object-commands">1.97 GetSupportedDM on
root object, commands</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-94">Purpose</h3>
<p>The purpose of this test is to ensure the EUT provides correctly
formatted input arguments for commands returned in GetSupportedDM
Resp.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-93">Functionality Tag</h3>
<p>Conditionally Mandatory (Supports a command that includes one or more
input arguments)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-95">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-94">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths:&#39;Device.&#39;
            first_level_only: false
            return_commands: true
            return_events: false
            return_params: false
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-94">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp message with one or more
<code>req_obj_results</code> specifying its entire supported data model,
listing only commands.</li>
<li>Each SupportedCommandResult field contains a
<code>command_name</code> field, an <code>input_arg_names</code> field,
an <code>output_arg_names</code> field, and a <code>command_type</code>
field.</li>
<li>The <code>command_type</code> field indicates if the command is
asynchronous or synchronous.</li>
<li>At least one <code>input_arg_fields</code> contains a list of one or
more input arguments. The input arguments are relative paths.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:getsupporteddm-on-root-object-events">1.98 GetSupportedDM on
root object, events</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-95">Purpose</h3>
<p>The purpose of this test is to ensure the EUT provides correctly
formatted fields for events returned in GetSupportedDM Resp.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-94">Functionality Tag</h3>
<p>Conditionally Mandatory (Supports an event that includes one or more
arguments)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-96">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-95">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths:&#39;Device.&#39;
            first_level_only: false
            return_commands: false
            return_events: true
            return_params: false
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-95">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResp message with one or more
<code>req_obj_results</code> specifying its entire supported data model,
listing only events.</li>
<li>Each SupportedEventResult field contains the <code>event_name</code>
field and an <code>arg_names</code> field.</li>
<li>At least one <code>arg_names</code> field contains a list of one or
more arguments. The arguments are relative paths.</li>
</ol>
</section>
<section id="sec:authentication-and-access-control-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">2 Authentication and
Access Control Test Cases</h1>
<ul>
<li><a
href="#sec:agent-does-not-accept-messages-from-its-own-endpoint-id">2.1
Agent does not accept messages from its own Endpoint ID</a></li>
<li><a
href="#sec:agent-rejects-messages-that-do-not-contain-its-to_id-in-the-usp-record">2.2
Agent rejects messages that do not contain its to_id in the USP
Record</a></li>
<li><a
href="#sec:agent-does-not-process-messages-without-s-certificate-information---deprecated">2.3
Agent does not process messages without ’s certificate information -
DEPRECATED</a></li>
<li><a
href="#sec:agent-rejects-messages-from-endpoint-ids-that-are-not-in-subjectaltname---deprecated">2.4
Agent rejects messages from Endpoint IDs that are not in subjectAltName
- DEPRECATED</a></li>
<li><a
href="#sec:agent-use-of-self-signed-certificates---deprecated">2.5 Agent
use of self-signed certificates - DEPRECATED</a></li>
<li><a href="#sec:connecting-without-absolute-time">2.6 Connecting
without absolute time</a></li>
<li><a
href="#sec:agent-ignores-unsigned-or-invalid-record-signatures">2.7
Agent ignores unsigned or invalid Record signatures</a></li>
<li><a href="#sec:agent-ignores-invalid-tls-certificate">2.8 Agent
ignores invalid TLS certificate</a></li>
<li><a href="#sec:use-of-the-untrusted-role">2.9 Use of the Untrusted
role</a></li>
<li><a href="#sec:adding-a-role">2.10 Adding a Role</a></li>
<li><a href="#sec:permissions---object-creation-allowed">2.11
Permissions - Object Creation Allowed</a></li>
<li><a href="#sec:permissions---object-creation-not-allowed">2.12
Permissions - Object Creation Not Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-allowed">2.13
Permissions - Object Deletion Allowed</a></li>
<li><a href="#sec:permissions---object-deletion-not-allowed">2.14
Permissions - Object Deletion Not Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-allowed">2.15
Permissions - Parameter Update Allowed</a></li>
<li><a href="#sec:permissions---parameter-update-not-allowed">2.16
Permissions - Parameter Update Not Allowed</a></li>
<li><a href="#sec:permissions---operation-allowed">2.17 Permissions -
Operation Allowed</a></li>
<li><a href="#sec:permissions---operation-not-allowed">2.18 Permissions
- Operation Not Allowed</a></li>
<li><a
href="#sec:permissions---value-change-notification-allowed-on-parameter">2.19
Permissions - Value Change Notification Allowed on Parameter</a></li>
<li><a
href="#sec:permissions---value-change-notification-not-allowed-on-parameter">2.20
Permissions - Value Change Notification Not Allowed on
Parameter</a></li>
<li><a href="#sec:permissions---overlapping-permissions">2.21
Permissions - Overlapping Permissions</a></li>
<li><a
href="#sec:using-get-when-no-read-permissions-are-available-on-some-parameters">2.22
Using Get when no read permissions are available on some
parameters</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-true-required-parameters-fail">2.23
Permissions - Add message with search path, allow partial true, required
parameters fail</a></li>
<li><a
href="#sec:permissions---add-message-with-search-path-allow-partial-false-required-parameters-fail">2.24
Permissions - Add message with search path, allow partial false,
required parameters fail</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-omitted">2.25
Permissions - Parameter within added object not allowed,
omitted</a></li>
<li><a
href="#sec:permissions---parameter-within-added-object-not-allowed-included">2.26
Permissions - Parameter within added object not allowed,
included</a></li>
<li><a href="#sec:use-of-securedrole">2.27 Use of SecuredRole</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-does-not-accept-messages-from-its-own-endpoint-id">2.1
Agent does not accept messages from its own Endpoint ID</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-96">Purpose</h3>
<p>The purpose of this test is to ensure the EUT does not respond to a
USP message when the <code>from_id</code> is the EUT endpoint ID.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-95">Functionality Tag</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-97">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps">Test
Steps</h3>
<ol type="1">
<li><p>Send a message to the EUT with the following record
structure:</p>
<pre data-filter="pbv" type="Record"><code>    to_id: &#39;&lt;EUT_ID&gt;&#39;
    from_id: &#39;&lt;EUT_ID&gt;&#39;

    session_context {
        # ...
    }</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-96">Test Metrics</h3>
<ol type="1">
<li>The EUT does not respond to the message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-rejects-messages-that-do-not-contain-its-to_id-in-the-usp-record">2.2
Agent rejects messages that do not contain its to_id in the USP
Record</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-97">Purpose</h3>
<p>The purpose of this test is to ensure the EUT does not respond to a
USP message when the USP record doesn’t contain a the EUT
<code>to_id</code>.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-2">Functionality Tags</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-98">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-1">Test
Steps</h3>
<ol type="1">
<li><p>Send a message to the EUT with the following record
structure:</p>
<pre data-filter="pbv" type="Record"><code>    to_id: &#39;&lt;invalid ID&gt;&#39;
    from_id: &#39;&lt;EUT_ID&gt;&#39;

    # ...
</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-97">Test Metrics</h3>
<ol type="1">
<li>The EUT does not respond to the USP message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-does-not-process-messages-without-s-certificate-information---deprecated">2.3
Agent does not process messages without ’s certificate information -
DEPRECATED</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-98">Purpose</h3>
<p>The purpose of this test is to ensure that the EUT doesn’t process a
USP message when the EUT does not possess the Controller’s certificate
information.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-3">Functionality Tags</h3>
<p>Deprecated</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-99">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Simulate a second Controller whose credentials are signed by an
untrusted certificate authority.</li>
<li>Ensure that the UntrustedRole feature is either unsupported or
disabled in the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-96">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message from the second simulated Controller to the
EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}

body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-98">Test Metrics</h3>
<ol type="1">
<li>Ensure the EUT does not respond to the Get message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-rejects-messages-from-endpoint-ids-that-are-not-in-subjectaltname---deprecated">2.4
Agent rejects messages from Endpoint IDs that are not in subjectAltName
- DEPRECATED</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-99">Purpose</h3>
<p>The purpose of this test is to ensure that the EUT rejects a message
from an Endpoint ID that doesn’t match the subjectAltName in the
provided certificate.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-4">Functionality Tags</h3>
<p>Deprecated</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-100">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-97">Test Procedure</h3>
<ol type="1">
<li>Send a Get message to the EUT using a certificate with a
subjectAltName that does not match the Controller’s Endpoint ID.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-99">Test Metrics</h3>
<ol type="1">
<li>The EUT does not respond to the Get message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-use-of-self-signed-certificates---deprecated">2.5 Agent
use of self-signed certificates - DEPRECATED</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-100">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can handle self-signed
certificates.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-5">Functionality Tags</h3>
<p>Deprecated</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-101">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the is configured to use a self-signed certificate and
Endpoint ID that the EUT has not seen.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-98">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT using a self-signed cert with the
following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-100">Test Metrics</h3>
<ol type="1">
<li>The EUT responds to the Get with a GetResponse containing a
‘Device.LocalAgent.ControllerTrust.{i}.Alias’ parameter.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:connecting-without-absolute-time">2.6 Connecting without
absolute time</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-101">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can communicate with a
Controller if it cannot obtain an absolute time.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-6">Functionality Tags</h3>
<p>Conditional Mandatory (Supports USP Session Context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-102">Test Setup</h3>
<ol type="1">
<li>The EUT is booted into a test environment where it cannot resolve
absolute time.</li>
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller is configured to use an expired
certificate.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-99">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header{
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-101">Test Metrics</h3>
<ol type="1">
<li>The EUT responds to the Get message with a GetResponse, ignoring the
expired dates on the certificate.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-ignores-unsigned-or-invalid-record-signatures">2.7 Agent
ignores unsigned or invalid Record signatures</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-102">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will ignore a USP
record when the signature field is invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-7">Functionality Tags</h3>
<p>Conditional Mandatory (Supports USP Session Context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-103">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-100">Test Procedure</h3>
<ol type="1">
<li>Send a Get message to the EUT with an invalid signature value.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-102">Test Metrics</h3>
<ol type="1">
<li>The EUT does not respond to the Get message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-ignores-invalid-tls-certificate">2.8 Agent ignores invalid
TLS certificate</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-103">Purpose</h3>
<p>The purpose of this test is to ensure the EUT rejects TLS connections
when an Endpoint’s TLS certificate is invalid.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-8">Functionality Tags</h3>
<p>Conditional Mandatory (Supports USP Session Context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-104">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the EUT has obtained an absolute time reference.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-101">Test Procedure</h3>
<ol type="1">
<li>Send a Get message to the EUT with an expired TLS certificate.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-103">Test Metrics</h3>
<ol type="1">
<li>The EUT doesn’t respond to the Get message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-the-untrusted-role">2.9 Use of the Untrusted role</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-104">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly assigns new a
Role of Untrusted.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-9">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-105">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-102">Test Procedure</h3>
<ol type="1">
<li><p>Using a secondary Controller, connect to the EUT and send an Get
message.</p></li>
<li><p>Using the primary trusted Controller send a Get message to the
EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-104">Test Metrics</h3>
<ol type="1">
<li>Ensure the
<code>Device.LocalAgent.Controller.&lt;secondary Controller instance&gt;.AssignedRole</code>
matches the value of
<code>Device.LocalAgent.ControllerTrust.UntrustedRole</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:adding-a-role">2.10 Adding a Role</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-105">Purpose</h3>
<p>The purpose of this test is to ensure that the Add message can be
used to add new Roles to the EUT data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-10">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-106">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-103">Test Procedure</h3>
<ol type="1">
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Name&#39;
                    value: &#39;Trusted&#39;
                }
            }
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-105">Test Metrics</h3>
<ol type="1">
<li>The EUT correctly sent an AddResponse with a new Role instance.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---object-creation-allowed">2.11 Permissions - Object
Creation Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-106">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to allow the creation of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-11">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-107">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-104">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
            }
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-106">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a oper_success element containing
a new Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in
step 1.</li>
<li>The EUT sends an AddResponse with a oper_success element containing
a new Device.LocalAgent.Subscription. object in step 2.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---object-creation-not-allowed">2.12 Permissions -
Object Creation Not Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-107">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to restrict the creation of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-12">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-108">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-105">Test Procedure</h3>
<ol type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre>
<ol start="2" type="1">
<li>Send an Add message to the EUT with the following structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
            }
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-107">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a oper_success element containing
a new Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in
step 1.</li>
<li>The EUT sends an Error containing type ‘7006’ - Permission
Denied.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---object-deletion-allowed">2.13 Permissions - Object
Deletion Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-108">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to allow the deletion of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-13">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-109">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is one or more Subscription object that can be
deleted.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-106">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: DELETE
}
body {
    request {
        delete {
            allow_partial: false
            obj_paths: &#39;Device.LocalAgent.Subscription.&lt;subscription to delete&gt;&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-108">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an DeleteResponse with a <code>oper_success</code>
element containing the Device.LocalAgent.Subscription. object in step
2.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---object-deletion-not-allowed">2.14 Permissions -
Object Deletion Not Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-109">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to restrict the deletion of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-14">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-110">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is one or more Subscription object that can be
deleted.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-107">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Delete message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: DELETE
}
body {
    request {
        delete {
            allow_partial: false
            obj_paths: &#39;Device.LocalAgent.Subscription.&lt;subscription to delete&gt;&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-109">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an Error containing type ‘7006’ - Permission
Denied.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---parameter-update-allowed">2.15 Permissions -
Parameter Update Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-110">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to allow the update of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-15">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-111">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is one or more Subscription object that can be
edited.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-108">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&lt;instance that can be edited&gt;.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            allow_partial: false
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance that can be edited&gt;.&#39;
                    param_settings {
                            param: &#39;Enable&#39;
                            value: &#39;&lt;negation of previous value&gt;&#39;
                            required: true
                        }
                }
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-110">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends a SetResponse with a <code>oper_success</code> element
containing Device.LocalAgent.Subscription.{i}.Enable in step 2.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---parameter-update-not-allowed">2.16 Permissions -
Parameter Update Not Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-111">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to restrict the update of a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-16">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-112">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is one or more Subscription object that can be
edited.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-2">Test
Steps</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.&lt;instance that can be edited&gt;.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            allow_partial: false
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Subscription.&lt;instance that can be edited&gt;.&#39;
                    param_settings {
                            param: &#39;Enable&#39;
                            value: &#39;&lt;negation of previous value&gt;&#39;
                            required: true
                        }
                }
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-111">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an Error containing type ‘7006’ - Permission
Denied.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---operation-allowed">2.17 Permissions - Operation
Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-112">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to allow the invocation of commands on a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-17">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-113">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-3">Test
Steps</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.Reboot()&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;r-x-&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.Reboot()&#39;
            send_resp: true
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-112">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an OperateResponse with a <code>req_output_args</code>
element in step 2.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---operation-not-allowed">2.18 Permissions -
Operation Not Allowed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-113">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to restrict the invocation of commands on a particular object.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-18">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-114">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-4">Test
Steps</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.Reboot()&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;r---&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.Reboot()&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-113">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with a <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an OperateResponse message containing a
<code>cmd_failure</code> element with an appropriate error code.</li>
</ol>
<p><em>NOTE: The behavior required in Metric 2 was updated in USP 1.4,
and was updated here to ensure that implementations seeking
certification would use the correct behavior. If an implementation using
USP 1.3 or earlier is tested against this test case, it MAY respond with
a USP Error Message instead.</em></p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---value-change-notification-allowed-on-parameter">2.19
Permissions - Value Change Notification Allowed on Parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-114">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to allow a Controller to subscribe to the ValueChange notification
of a particular parameter.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-19">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-115">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-5">Test
Steps</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.PeriodicNotifInterval&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw-n&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                        param: &#39;Enable&#39;
                        value: &#39;true&#39;
                    }
                param_settings {
                        param: &#39;NotifType&#39;
                        value: &#39;ValueChange&#39;
                    }
                param_settings {
                        param: &#39;ReferenceList&#39;
                        value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.PeriodicNotifInterval&#39;
                    }
            }
        }
    }
  }</code></pre></li>
<li><p>Send a Set message to the EUT, setting
Device.LocalAgent.Controller.&lt;Controller instance
id&gt;.PeriodicNotifInterval to a new value.</p></li>
<li><p>Wait for a Notification from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-114">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with an <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an AddResponse with an <code>oper_success</code>
element containing a new Device.LocalAgent.Subscription. object in step
2.</li>
<li>The EUT sends a SetResponse with an <code>oper_success</code>
element with the path ‘Device.LocalAgent.Controller.&lt;Controller
instance id&gt;.PeriodicNotifInterval’.</li>
<li>The EUT sends a Notify message with a <code>value_change</code>
element pointing to ‘Device.LocalAgent.Controller.&lt;Controller
instance&gt;.PeriodicNotifInterval’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---value-change-notification-not-allowed-on-parameter">2.20
Permissions - Value Change Notification Not Allowed on Parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-115">Purpose</h3>
<p>The purpose of this test is to ensure the EUT adheres to permissions
set to restrict a Controller from subscribing to the ValueChange
notification of a particular parameter.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-20">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-116">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-6">Test
Steps</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.PeriodicNotifInterval&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                        param: &#39;Enable&#39;
                        value: &#39;true&#39;
                    }
                param_settings {
                        param: &#39;NotifType&#39;
                        value: &#39;ValueChange&#39;
                    }
                param_settings {
                        param: &#39;ReferenceList&#39;
                        value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.PeriodicNotifInterval&#39;
                    }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Set message to the EUT, setting
Device.LocalAgent.Controller.&lt;Controller instance
id&gt;.PeriodicNotifInterval to a new value.</p></li>
<li><p>Wait 30 seconds.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-115">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse with an <code>oper_success</code>
element containing a new
Device.LocalAgent.ControllerTrust.Role.{i}.Permission. object in step
1.</li>
<li>The EUT sends an AddResponse with an <code>oper_success</code>
element containing a new Device.LocalAgent.Subscription. object in step
2.</li>
<li>The EUT sends a SetResponse with an <code>oper_success</code>
element with the path ‘Device.LocalAgent.Controller.&lt;Controller
instance id&gt;.PeriodicNotifInterval’.</li>
<li>The EUT does not send a Notify message with a value_change element
pointing to ‘Device.LocalAgent.Controller.&lt;Controller
instance&gt;.PeriodicNotifInterval’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---overlapping-permissions">2.21 Permissions -
Overlapping Permissions</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-116">Purpose</h3>
<p>The purpose of this test is to ensure the EUT allows for the creation
of Permission instances, and when Permissions overlap the EUT behaves
correctly.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-21">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-117">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is at least one BootParameter configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-109">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.&lt;Controller id&gt;.Role.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.BootParameter.&lt;boot parameter instance&gt;.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;----&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;&lt;lowest available value&gt;&#39;
                }
            }
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.&lt;Controller id&gt;.Role.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.BootParameter.&lt;boot parameter instance&gt;.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;&lt;value which is higher than the Order value set in the other Permission instance&gt;&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;Controller instance ID&gt;.BootParameter.&#39;
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.&lt;Controller id&gt;.Role.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.BootParameter.&lt;boot parameter instance&gt;.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;----&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;&lt;value which is higher than both Order values set in step 1&gt;&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;Controller instance ID&gt;.BootParameter.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-116">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse message after step 1. The message
contains two <code>oper_success</code> elements, one for each added
permission.</li>
<li>The EUT sends a GetResponse with a <code>result_params</code>
element containing parameters of the specified BootParameter
instance.</li>
<li>The EUT sends an AddResponse message after step 3. The message
contains an <code>oper_success</code> element.</li>
<li>The EUT sends a GetResponse that does not contain the specified
BootParameter instance.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:using-get-when-no-read-permissions-are-available-on-some-parameters">2.22
Using Get when no read permissions are available on some parameters</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-117">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly returns
parameters that are readable while ignoring parameters that do not have
read permissions.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-22">Functionality Tags</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile with at
least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-118">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the Controller used for testing has an assigned Role that is
writable.</li>
<li>Ensure there is at least one BootParameter configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-110">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                    obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller trust instance&gt;.Permission.&#39;
                    param_settings {
                        param: &#39;Enable&#39;
                        value: &#39;true&#39;
                    }
                    param_settings {
                        param: &#39;Targets&#39;
                        value: &#39;Device.LocalAgent.Controller.&lt;Controller instance ID&gt;.BootParameter.&lt;known instance&gt;.&#39;
                    }
                    param_settings {
                        param: &#39;Param&#39;
                        value: &#39;rw--&#39;
                    }
                    param_settings {
                        param: &#39;Obj&#39;
                        value: &#39;rwxn&#39;
                    }
                    param_settings {
                        param: &#39;InstantiatedObj&#39;
                        value: &#39;rwxn&#39;
                    }
                    param_settings {
                        param: &#39;CommandEvent&#39;
                        value: &#39;rwxn&#39;
                    }
                }
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller trust instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance ID&gt;.BootParameter.&lt;known instance&gt;.ParameterName&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;----&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;Controller instance ID&gt;.BootParameter.&lt;known instance&gt;.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-117">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an AddResponse message after step 1. The message
contains a <code>oper_success</code> element for the added
Permission.</li>
<li>The EUT sends a GetResponse with a <code>result_params</code>
element containing parameters of the specified BootParameter instance,
with the exception of the ‘ParameterName’ parameter.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---add-message-with-search-path-allow-partial-true-required-parameters-fail">2.23
Permissions - Add message with search path, allow partial true, required
parameters fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-118">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly handles an add
message with a search path with allow_partial set to true when some
objects fail to be added.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-96">Functionality Tag</h3>
<p>Conditionally Mandatory (supports the ControllerTrust:1 profile with
at least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-119">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure the Controller used for testing has an assigned Role that
is writable.</p></li>
<li><p>Ensure that the EUT has at least two Controller instances in its
Device.LocalAgent.Controller.{i}. table.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-111">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.BootParameter.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;1&#39;
                }
            }
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Second Controller id&gt;.BootParameter.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;1&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: true
            create_objs {
                obj_path: &#39;Device.LocalAgent.Controller.*.BootParameter&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-118">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResponse message after step 1. The message
contains two oper_success elements, one for each added
permission.</p></li>
<li><p>The AddResp in step 3 contains two CreatedObjectResults. One
CreateObjectResult is an element of type OperationSuccess. The
OperationSuccess element contains an instantiated_path element
containing the new BootParameter object under
Device.LocalAgent.Controller.&lt;Controller instance id&gt;.</p></li>
<li><p>The other CreateObjectResult is an element of type
OperationFailure. The OperationFailure element contains an err_code of
‘7006’, ‘Permission Denied’</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---add-message-with-search-path-allow-partial-false-required-parameters-fail">2.24
Permissions - Add message with search path, allow partial false,
required parameters fail</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-119">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly handles an add
message with a search path with allow_partial set to false when some
objects fail to be added.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-97">Functionality Tag</h3>
<p>Conditionally Mandatory (supports the ControllerTrust:1 profile with
at least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-120">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure the Controller used for testing has an assigned Role that
is writable.</p></li>
<li><p>Ensure that the EUT has at least two Controller instances in its
Device.LocalAgent.Controller.{i}. table.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-112">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Controller instance id&gt;.BootParameter.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;rw--&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;1&#39;
                }
            }
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Controller.&lt;Second Controller id&gt;.BootParameter.&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;2&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Controller.*.BootParameter&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an Error.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.*.BootParameter.&#39;
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-119">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResponse message after step 1. The message
contains two oper_success elements, one for each added
permission.</p></li>
<li><p>The EUT sends an Error message in step 3. The Error message
contains an err_code of 7006, ‘Permission Denied’, with the param_errs
element containing a single error with a param_path of
‘Device.LocalAgent.Controller.&lt;Secondary Controller
id&gt;.BootParameter’, and an err_code of 7006, ‘Permission
Denied’.</p></li>
<li><p>The EUT did not create any new BootParameter objects.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---parameter-within-added-object-not-allowed-omitted">2.25
Permissions - Parameter within added object not allowed, omitted</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-120">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly handles an add
message when a parameter within the added object cannot be written to
and the parameter is omitted from the Add message.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-98">Functionality Tag</h3>
<p>Conditionally Mandatory (supports the ControllerTrust:1 profile with
at least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-121">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure the Controller used for testing has an assigned Role that
is writable.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-113">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.*.Enable&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;1&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                    param: &#39;ID&#39;
                    value: &#39;add1&#39;
                }
                param_settings {
                    param: &#39;NotifType&#39;
                    value: &#39;ValueChange&#39;
                }
                param_settings {
                    param: &#39;ReferenceList&#39;
                    value: &#39;Device.LocalAgent.SoftwareVersion&#39;
                    required: true
                }
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Subscription.&lt;instance from step 3&gt;.Enable&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-120">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResponse with a oper_success element
containing a new Device.LocalAgent.ControllerTrust.Role.{i}.Permission.
object in step 1.</p></li>
<li><p>The EUT sends an AddResp message with an oper_success element
containing a new Device.LocalAgent.Subscription. object.</p></li>
<li><p>The EUT sends a GetResp with a value of “false” for the Enable
parameter of the new Subscription object.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:permissions---parameter-within-added-object-not-allowed-included">2.26
Permissions - Parameter within added object not allowed, included</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-121">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly handles an add
message when a parameter within the added object cannot be written to
and the parameter is included in the Add message.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-99">Functionality Tag</h3>
<p>Conditionally Mandatory (supports the ControllerTrust:1 profile with
at least one role that allows object creation, or supports writable
parameters in Device.LocalAgent.ControllerTrust.{i}.Role.{i}.)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-122">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure the Controller used for testing has an assigned Role that
is writable.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-114">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: false
            create_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.Role.&lt;Controller Role instance&gt;.Permission.&#39;
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
                param_settings {
                    param: &#39;Targets&#39;
                    value: &#39;Device.LocalAgent.Subscription.*.Enable&#39;
                }
                param_settings {
                    param: &#39;Param&#39;
                    value: &#39;r---&#39;
                }
                param_settings {
                    param: &#39;Obj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;InstantiatedObj&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;CommandEvent&#39;
                    value: &#39;rwxn&#39;
                }
                param_settings {
                    param: &#39;Order&#39;
                    value: &#39;1&#39;
                }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            allow_partial: true
            create_objs {
                obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                param_settings {
                    param: &#39;ID&#39;
                    value: &#39;add26&#39;
                    }
                param_settings {
                    param: &#39;NotifType&#39;
                    value: &#39;ValueChange&#39;
                }
                param_settings {
                    param: &#39;ReferenceList&#39;
                    value: &#39;Device.LocalAgent.SoftwareVersion&#39;
                    required: true
                }
                param_settings {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                    required: true
                }
            }
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResp.</p></li>
<li><p>Send a Get message to the EUT with the request path of
‘Device.LocalAgent.Subscription.’.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-121">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends an AddResponse with an oper_success element
containing a new Device.LocalAgent.ControllerTrust.Role.{i}.Permission.
object in step 1.</p></li>
<li><p>The AddResp contains a single CreatedObjectResult that has an
OperationStatus that is an element of type OperationFailure. The
OperationFailure element contains an err_code of ‘7006’ ‘Permission
Denied’.</p></li>
<li><p>The GetResp from the EUT does not contain a Subscription instance
with ID ‘add26’.</p></li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-securedrole">2.27 Use of SecuredRole</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-122">Purpose</h3>
<p>The purpose of this test is to ensure the EUT shares secured
parameters with a Controller which is assigned the SecuredRole.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-100">Functionality Tag</h3>
<p>Conditional Mandatory (supports the ControllerTrust:1 profile,
Device.LocalAgent.ControllerTrust.SecuredRoles, and a parameter with the
secured attribute)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-123">Test Setup</h3>
<ol type="1">
<li><p>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</p></li>
<li><p>Ensure that the EUT has two Controller instances in its
Device.LocalAgent.Controller.{i}. table, and that both Controllers can
be simulated by the test equipment. Consider one to be the primary
Controller, and the other to be the secondary Controller.</p></li>
<li><p>Ensure that the EUT supports a parameter with the secured
attribute. Ensure that the secondary Controller is assigned a Role that
can read the secured parameter. The Role is not added to the
Device.LocalAgent.ControllerTrust.SecuredRoles parameter.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-115">Test Procedure</h3>
<ol type="1">
<li><p>The secondary Controller sends a Get message to the EUT for the
secured parameter from test setup.</p></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            allow_partial: false
            update_objs {
                obj_path: &#39;Device.LocalAgent.ControllerTrust.&#39;
                param_settings {
                    param:  &#39;SecuredRoles&#39;
                    value: &#39;&lt;Role object from test setup&gt;&#39;
                    required: true
                }
            }
        }
    }
}</code></pre></li>
<li><p>The secondary Controller sends a Get message to the EUT for the
secured parameter from test setup.</p></li>
<li><p>Allow the EUT to send a GetResp.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-122">Test Metrics</h3>
<ol type="1">
<li><p>The EUT sends a GetResp that contains an empty string in place of
a value for the secured parameter when the Controller’s Role is not in
the SecuredRoles list.</p></li>
<li><p>The EUT sends a GetResp that contains the value for the secured
parameter when the Controller’s Role is in the SecuredRoles
list.</p></li>
</ol>
</section>
<section id="sec:usp-record-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">3 USP Record Test
Cases</h1>
<ul>
<li><a href="#sec:bad-request-outside-a-session-context">3.1 Bad request
outside a session context</a></li>
<li><a href="#sec:agent-verifies-non-payload-field-integrity">3.2 Agent
Verifies Non-Payload Field Integrity</a></li>
<li><a
href="#sec:agent-rejects-invalid-signature-starting-a-session-context">3.3
Agent rejects invalid signature starting a session context</a></li>
<li><a href="#sec:using-tls-for-usp-record-integrity">3.4 Using TLS for
USP Record Integrity</a></li>
<li><a href="#sec:failure-to-establish-tls">3.5 Failure to Establish
TLS</a></li>
<li><a
href="#sec:agent-does-not-accept-tls-renegotiation-for-e2e-message-exchange">3.6
Agent does not accept TLS renegotiation for E2E message
exchange</a></li>
<li><a href="#sec:use-of-x.509-certificates">3.7 Use of X.509
Certificates</a></li>
<li><a href="#sec:establishing-a-session-context">3.8 Establishing a
Session Context</a></li>
<li><a href="#sec:receipt-of-a-record-out-of-a-session-context">3.9
Receipt of a Record out of a Session Context</a></li>
<li><a href="#sec:session-context-expiration">3.10 Session Context
Expiration</a></li>
<li><a href="#sec:use-of-sequence-id-and-expected-id">3.11 Use of
Sequence ID and Expected ID</a></li>
<li><a href="#sec:preservation-of-usp-records">3.12 Preservation of USP
Records</a></li>
<li><a
href="#sec:agent-rejects-records-with-different-payload-security-than-the-established-context">3.13
Agent Rejects Records with Different Payload Security than the
Established Context</a></li>
<li><a href="#sec:use-of-retransmit_id">3.14 Use of
retransmit_id</a></li>
<li><a href="#sec:handling-duplicate-records">3.15 Handling Duplicate
Records</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:bad-request-outside-a-session-context">3.1 Bad request outside a
session context</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-123">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly responds to a
bad request outside a session context.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-23">Functionality Tags</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-124">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to not use a session context.</li>
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-116">Test Procedure</h3>
<ol type="1">
<li>Send a malformed USP Record to the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-123">Test Metrics</h3>
<ol type="1">
<li>The EUT either ignores the malformed record or sends a USP Record
Error.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-verifies-non-payload-field-integrity">3.2 Agent Verifies
Non-Payload Field Integrity</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-124">Purpose</h3>
<p>The purpose of this test is to ensure the EUT verifies the integrity
of the non-payload fields in a USP record.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-24">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-125">Test Setup</h3>
<ol type="1">
<li>Ensure the relevant equipment are configured to NOT provide
integrity protection at the MTP layer.</li>
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-117">Test Procedure</h3>
<ol type="1">
<li>Send a Get message to the EUT with a <code>payload_security</code>
of PLAINTEXT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-124">Test Metrics</h3>
<ol type="1">
<li>After the EUT receives the USP record, it exhibits the expected ‘bad
request’ behavior for the applicable MTP.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-rejects-invalid-signature-starting-a-session-context">3.3
Agent rejects invalid signature starting a session context</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-125">Purpose</h3>
<p>The purpose of this test is to ensure the EUT handles an attempt to
start a session context with an invalid <code>mac_signature</code>.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-25">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-126">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-118">Test Procedure</h3>
<ol type="1">
<li>Send a TLS ‘client hello’ to the EUT to begin a session context as
described in ‘<a
href="https://usp.technology/specification/e2e-message-exchange/">End to
End Message Exchange</a>’ in TR-369 with an invalid
<code>mac_signature</code>.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-125">Test Metrics</h3>
<ol type="1">
<li>After the EUT receives the USP record, it exhibits the expected ‘bad
request’ behavior for the applicable MTP.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:using-tls-for-usp-record-integrity">3.4 Using TLS for USP Record
Integrity</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-126">Purpose</h3>
<p>The purpose of this test is to ensure the EUT uses TLS to validate
the integrity of USP records when the <code>payload_security</code> is
TLS and the TLS handshake has completed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-26">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-127">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller are configured to secure the USP
record payload with TLS.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-119">Test Procedure</h3>
<ol type="1">
<li><p>Start a E2E session with the EUT using TLS to secure the
payload.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-126">Test Metrics</h3>
<ol type="1">
<li>In the GetResponse sent by the EUT, the <code>mac_signature</code>
in the USP Record secures the non-payload fields via the MAC
mechanism.</li>
<li>The <code>mac_signature</code> in the USP record sent by the EUT
validates the integrity of the non-payload fields.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:failure-to-establish-tls">3.5 Failure to Establish TLS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-127">Purpose</h3>
<p>The purpose of this test is to ensure the EUT behaves correctly when
the TLS session used to encapsulate the payload cannot be
established.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-27">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-128">Test Setup</h3>
<ol type="1">
<li>Configure the controller to use TLS12 as a
<code>payload_security</code>.</li>
<li>Ensure <code>PeriodicNotifInterval</code> is ‘60’, and the
controller used for testing is subscribed to Periodic Event
Notification.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-120">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.E2ESession.&#39;
        }
    }
}</code></pre></li>
<li><p>Attempt to establish a new secure session with the EUT using TLS
payload encapsulation.</p></li>
<li><p>Configure the controller to send TLS alerts during the TLS
handshake process.</p></li>
<li><p>Wait for the EUT to attempt to start a session with the
controller.</p></li>
<li><p>Allow the controller to send a TLS alert to the EUT and for the
session to terminate.</p></li>
<li><p>Configure the controller to not send a TLS alert.</p></li>
<li><p>Wait for the EUT to retry establishing a E2E session.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-127">Test Metrics</h3>
<ol type="1">
<li>After sending the client certificate to the EUT, the EUT sends a TLS
alert, terminating the session.</li>
<li>After step 5, the EUT waits before retrying the session in
accordance with the ‘SessionRetry’ parameters found in step 1.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-does-not-accept-tls-renegotiation-for-e2e-message-exchange">3.6
Agent does not accept TLS renegotiation for E2E message exchange</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-128">Purpose</h3>
<p>The purpose of this test is to ensure the EUT does not accept TLS
renegotiation. frames during a E2E message exchange.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-28">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-129">Test Setup</h3>
<ol type="1">
<li>Ensure both the EUT and the controller are configured to use TLS
payload security.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-121">Test Procedure</h3>
<ol type="1">
<li><p>Establish a E2E session with the EUT.</p></li>
<li><p>Send a request to renegotiate TLS in place of the
payload.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-128">Test Metrics</h3>
<ol type="1">
<li>Between sending the TLS renegotiation request and receiving the
GetResponse, the EUT either sends no records, or sends a TLS alert of
type <code>no_renegotiation(100)</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-x.509-certificates">3.7 Use of X.509 Certificates</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-129">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly uses X.509
certificates to authenticate other endpoints, and in turn provides a
X.509 certificate for the purpose of authentication.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-29">Functionality Tags</h3>
<p>‘Conditional Mandatory (supports Secure Message Exchange using TLS
for USP Record Integrity)’</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-130">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller are configured to use TLS payload
security.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-122">Test Procedure</h3>
<ol type="1">
<li><p>Configure the controller to provide a X.509 certificate with a
<code>subjectAltName</code> that does not match the controller’s USP
endpoint ID.</p></li>
<li><p>Attempt to start a session with the EUT and send a Get message
with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-129">Test Metrics</h3>
<ol type="1">
<li>During the TLS handshake the EUT provides a X.509 certificate with a
<code>subjectAltName</code> that matches the endpoint ID of the
EUT.</li>
<li>During the TLS handshake the EUT requests a X.509 certificate from
the controller.</li>
<li>The EUT rejects the controller’s certificate.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:establishing-a-session-context">3.8 Establishing a Session
Context</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-130">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can use a session
context to exchange USP messages.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-101">Functionality Tag</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-131">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
establish a connection and exchange USP messages.</li>
<li>Ensure at the start of the test there is no existing session context
between the EUT and controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-123">Test Procedure</h3>
<ol type="1">
<li><p>Start a session context with the EUT and send a Get message with
the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-130">Test Metrics</h3>
<ol type="1">
<li>After step 1, the EUT responds with a USP record containing a
session context, a <code>sequence_number</code> of 1 and a
<code>session_id</code> that matched the session identifier sent to the
EUT.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:receipt-of-a-record-out-of-a-session-context">3.9 Receipt of a
Record out of a Session Context</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-131">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly handles the
receiving of a USP record outside of a session context.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-30">Functionality Tags</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-132">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
establish a session and exchange USP messages.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-124">Test Procedure</h3>
<ol type="1">
<li><p>Start a session with the EUT using a session context.</p></li>
<li><p>Send a Get message to the EUT for <code>Device.DeviceInfo.</code>
using a USP Record with the following structure:</p>
<pre><code>Record {
      session_context {
        session_id: &lt;new_session_id&gt;
        sequence_id:  1
        expected_id:  1
        payload {
            #  ...
          }
        }
      }</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-131">Test Metrics</h3>
<ol type="1">
<li>The EUT sends the GetResponse in a USP Record using the new
<code>session_id</code> and a <code>sequence_id</code> of 1.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:session-context-expiration">3.10 Session Context Expiration</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-132">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly adheres to
the <code>SessionExpiration</code> parameter.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-31">Functionality Tags</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-133">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information
required to start a session and exchange USP records.</li>
<li>Ensure the controller is subscribed to Periodic! event.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-125">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.E2ESession.&#39;
                    param_settings {
                            param: &#39;SessionExpiration&#39;
                            value: &#39;60&#39;
                        }
                }
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.&#39;
                    param_settings {
                            param: &#39;PeriodicNotifInterval&#39;
                            value: &#39;10&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Wait for 3 Notify messages from the EUT containing a Periodic!
event.</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.E2ESession.&#39;
                    param_settings: {
                            param: &#39;SessionExpiration&#39;
                            value: &#39;5&#39;
                        }
                }
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.&#39;
                    param_settings {
                            param: &#39;PeriodicNotifInterval&#39;
                            value: &#39;10&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Wait for 3 Notify messages from the EUT containing a Periodic!
event.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-132">Test Metrics</h3>
<ol type="1">
<li>All three Notify messages received in step 2 use the same session
context.</li>
<li>None of the three Notify messages received in step 4 shared the same
session context.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-sequence-id-and-expected-id">3.11 Use of Sequence ID and
Expected ID</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-133">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly uses the
<code>sequence_id</code> and <code>expected_id</code> attributes found
in a session context.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-32">Functionality Tags</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-134">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
start a session and exchange USP messages.</li>
<li>Ensure the controller is not subscribed to any events on the
EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-126">Test Procedure</h3>
<ol type="1">
<li>Start a new session by sending a Get message to the EUT with
<code>sequence_id</code> and <code>expected_id</code> set to 1 for
‘Device.DeviceInfo.ModelNumber’.</li>
<li>Send a Get message to the EUT with the <code>sequence_id</code> and
<code>expected_id</code> set to 4 for
‘Device.DeviceInfo.SoftwareVersion’.</li>
<li>Send a Get message to the EUT with the <code>sequence_id</code> and
<code>expected_id</code> set to 2 for
‘Device.DeviceInfo.HardwareVersion’.</li>
<li>Send a Get message to the EUT with the <code>sequence_id</code> and
<code>expected_id</code> set to 3 for
‘Device.DeviceInfo.HardwareVersion’.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-133">Test Metrics</h3>
<ol type="1">
<li>After step 1, the EUT returns a GetResponse with a
<code>sequence_id</code> of 1 containing the parameter
‘Device.DeviceInfo.ModelNumber’.</li>
<li>The EUT buffers the Get message sent in step 2 and does not
immediately respond.</li>
<li>After step 3, The EUT sends a GetResponse with a
<code>sequence_id</code> of 2 containing the parameter
‘Device.DeviceInfo.HardwareVersion’.</li>
<li>After step 4, the EUT sends a GetResponse with a
<code>sequence_id</code> of 3 containing the parameter
‘Device.DeviceInfo.HardwareVersion’. The EUT then sends a GetResponse
for the buffered Get message from step 2 with a <code>sequence_id</code>
of 4 containing the parameter ‘Device.DeviceInfo.SoftwareVersion’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:preservation-of-usp-records">3.12 Preservation of USP
Records</h2>
<p>The purpose of this test is to ensure the EUT preserves a sent record
in the event the receiving endpoint requests a retransmission.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-33">Functionality Tags</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-135">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
start a session an exchange USP messages.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedures">Test Procedures</h3>
<ol type="1">
<li><p>Start a new session.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait 60 seconds.</p></li>
<li><p>Send a USP record to the EUT with a <code>retransmit_id</code>
set to the <code>expected_id</code> value in the record sent in step
1.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-134">Test Metrics</h3>
<ol type="1">
<li>The EUT sends the same GetResponse twice, once after step 2 and once
after step 4.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-rejects-records-with-different-payload-security-than-the-established-context">3.13
Agent Rejects Records with Different Payload Security than the
Established Context</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-134">Purpose</h3>
<p>The purpose of this test is to ensure the EUT does not accept USP
Records that have a different <code>payload_security</code> value than
the that of the established session context.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-34">Functionality Tags</h3>
<p>Conditional Mandatory (supports Secure Message Exchange using TLS for
USP Record Integrity)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-136">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
start a session and exchange USP messages.</li>
<li>Ensure the EUT and controller have the necessary information to
secure the USP record payload using TLS.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-127">Test Procedure</h3>
<ol type="1">
<li>Starts a session with the EUT using <code>payload_security</code>
TLS12.</li>
<li>After the session is established, send the following Get message for
any valid parameter using <code>payload_security</code> PLAINTEXT and a
plaintext payload.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-135">Test Metrics</h3>
<ol type="1">
<li>The EUT does not send a GetResponse.</li>
<li>The EUT starts a new session after step 2.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-retransmit_id">3.14 Use of retransmit_id</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-135">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly uses the
<code>retransmit_id</code> value in a USP record and adheres to the
related parameters in the data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-35">Functionality Tags</h3>
<p>Conditionality Mandatory (supports session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-137">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
start a session and exchange USP messages.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-128">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.E2ESession.&#39;
                    param_settings {
                            param: &#39;MaxRetransmitTries&#39;
                            value: &#39;2&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Wait for a SetResponse</p></li>
<li><p>Send a USP record with a <code>retransmit_id</code> set to the
value of the <code>sequence_id</code> found in the SetResponse in step
2.</p></li>
<li><p>Repeat steps 2 and 3 twice more.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-136">Test Metrics</h3>
<ol type="1">
<li>The first three SetResponse messages are sent in the same session
context.</li>
<li>On the third retransmit request, the EUT doesn’t send a SetResponse
and instead starts a new session with the controller.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:handling-duplicate-records">3.15 Handling Duplicate Records</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-136">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can correctly handle
receiving duplicate records.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-36">Functionality Tags</h3>
<p>Conditional Mandatory (supports USP session context)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-138">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT and controller have the necessary information to
start session and exchange USP messages.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-129">Test Procedure</h3>
<ol type="1">
<li>Start a session with the EUT.</li>
<li>Send a Get message to the EUT requesting a parameter that is known
to exist.</li>
<li>Retransmit the same USP record sent in step 2 to the EUT, using the
same non-payload USP record field values.</li>
<li>Repeat step 3 twice more.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-137">Test Metrics</h3>
<ol type="1">
<li>The EUT send only one GetResponse.</li>
</ol>
</section>
<section id="sec:general-mtp-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">4 General MTP Test
Cases</h1>
<ul>
<li><a href="#sec:use-of-x.509-certificates-at-the-mtp-layer">4.1 Use of
X.509 certificates at the MTP layer</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-x.509-certificates-at-the-mtp-layer">4.1 Use of X.509
certificates at the MTP layer</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-137">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can use X.509
certificates to secure communication at the MTP layer.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-37">Functionality Tags</h3>
<p>Mandatory</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-139">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the use of MTP layer encryption is enabled on the
EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-130">Test Procedure</h3>
<ol type="1">
<li>Send a GetSupportedProtocol message to the EUT with the following
structure:</li>
</ol>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_SUPPORTED_PROTO
}
body {
    request {
        get_supported_protocol {
            controller_supported_protocol_versions: &#39;&lt;comma separated list of test controller versions&gt;&#39;
        }
    }
}</code></pre>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-138">Test Metrics</h3>
<ol type="1">
<li>The EUT processes the certificate and establishes a secure TLS
connection at the MTP layer.</li>
</ol>
</section>
<section id="sec:coap-test-cases-deprecated"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">5 CoAP Test Cases
(DEPRECATED)</h1>
<ul>
<li><a href="#sec:mapping-a-usp-record-to-a-coap-message-deprecated">5.1
Mapping a USP Record to a CoAP message (DEPRECATED)</a></li>
<li><a
href="#sec:usp-records-that-exceed-coap-message-size-deprecated">5.2 USP
Records that exceed CoAP message size (DEPRECATED)</a></li>
<li><a href="#sec:successful-coap-exchange-deprecated">5.3 Successful
CoAP exchange (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---timeout-deprecated">5.4 Failed
CoAP exchange - timeout (DEPRECATED)</a></li>
<li><a href="#sec:failed-coap-exchange---invalid-method-deprecated">5.5
Failed CoAP Exchange - Invalid Method (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-content-format-deprecated">5.6
Failed CoAP Exchange - Invalid Content-Format (DEPRECATED)</a></li>
<li><a
href="#sec:failed-coap-exchange---invalid-usp-record-deprecated">5.7
Failed CoAP Exchange - Invalid USP Record (DEPRECATED)</a></li>
<li><a href="#sec:use-of-dtls-deprecated">5.8 Use of DTLS
(DEPRECATED)</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mapping-a-usp-record-to-a-coap-message-deprecated">5.1 Mapping a
USP Record to a CoAP message (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-138">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can properly use CoAP
to transport USP Records.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-38">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-140">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-131">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-139">Test Metrics</h3>
<ol type="1">
<li>The GetResponse is encapsulated in a CoAP message.</li>
<li>The CoAP message used transport the GetResponse uses
‘application/octet-stream’ for <code>Content-Format</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:usp-records-that-exceed-coap-message-size-deprecated">5.2 USP
Records that exceed CoAP message size (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-139">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly segments large
USP records and transports them using block encapsulation.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-39">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-141">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-132">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-140">Test Metrics</h3>
<ol type="1">
<li>The EUT sends the GetResponse message using multiple block
encapsulated CoAP messages.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:successful-coap-exchange-deprecated">5.3 Successful CoAP
exchange (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-140">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly sends a 2.04
Changed response to CoAP messages.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-40">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-142">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-133">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-141">Test Metrics</h3>
<ol type="1">
<li>After the transmission of the Get message the EUT sends a 2.04
Changed message.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:failed-coap-exchange---timeout-deprecated">5.4 Failed CoAP
exchange - timeout (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-141">Purpose</h3>
<p>The purpose of this test is to ensure the EUT behaves correctly when
a timeout occurs at the MTP layer when using CoAP.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-41">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-143">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-134">Test Procedure</h3>
<ol type="1">
<li><p>Configure the to not send 2.04 Changed responses to CoAP
messages</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse message from the EUT.</p></li>
<li><p>Prevent the Controller from sending a 2.04 Changed CoAP
response.</p></li>
<li><p>Wait for EUT to retry sending the GetResponse.</p></li>
<li><p>Allow the Controller to send a 2.04 Changed CoAP
response.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-142">Test Metrics</h3>
<ol type="1">
<li>The EUT attempts to retransmit the GetResponse message after not
receiving a 2.04 Changed from the Controller.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:failed-coap-exchange---invalid-method-deprecated">5.5 Failed
CoAP Exchange - Invalid Method (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-142">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly responds when
it receives a CoAP message with an invalid method.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-42">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-144">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
<li>The EUT the Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-135">Test Procedure</h3>
<ol type="1">
<li>Send a USP record to the EUT using a CoAP message with method code
<code>0x06</code>.</li>
<li>Wait up to 60 seconds for the EUT to send a CoAP response.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-143">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a reply to the CoAP message with an invalid method
code.</li>
<li>The EUT CoAP response uses code <code>4.05</code> to indicate an
invalid CoAP method.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:failed-coap-exchange---invalid-content-format-deprecated">5.6
Failed CoAP Exchange - Invalid Content-Format (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-143">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly responds to
CoAP messages that feature invalid Content-Format options.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-43">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-145">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-136">Test Procedure</h3>
<ol type="1">
<li>Send a USP record to the EUT using a CoAP message with
Content-Format option <code>0x113a</code>.</li>
<li>Wait up to 60 second for the EUT to respond.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-144">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a reply to the CoAP message with an invalid
Content-Format.</li>
<li>The EUT CoAP response uses code <code>4.15</code> to indicate an
invalid Content-Format.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:failed-coap-exchange---invalid-usp-record-deprecated">5.7 Failed
CoAP Exchange - Invalid USP Record (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-144">Purpose</h3>
<p>The purpose of this is to ensure the EUT properly responds to a CoAP
message containing a malformed USP record.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-44">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-146">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-137">Test Procedure</h3>
<ol type="1">
<li>Send a malformed USP record to the EUT in a CoAP message.</li>
<li>Wait up to 60 seconds for the EUT to send a CoAP reply.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-145">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a reply to the CoAP message with the malformed USP
record.</li>
<li>The EUT CoAP response uses code <code>4.00</code> to indicate the
USP record is invalid or not understandable.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-dtls-deprecated">5.8 Use of DTLS (DEPRECATED)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-145">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can establish secure
communication with another CoAP endpoint at the CoAP layer.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-45">Functionality Tags</h3>
<p>Conditional Mandatory (supports the CoAP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-147">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
<li>The EUT and Controller are configured to communicate over CoAP using
DTLS.</li>
<li>The EUT and Controller have the necessary information about one
another to establish an encrypted channel of communication.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-138">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-146">Test Metrics</h3>
<ol type="1">
<li>The Controller is able to establish a DTLS session with the
EUT.</li>
<li>The EUT established a DTLS session and sends a GetResponse.</li>
</ol>
</section>
<section id="sec:stomp-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">6 STOMP Test Cases</h1>
<ul>
<li><a href="#sec:support-of-required-profiles">6.1 Support of Required
Profiles</a></li>
<li><a href="#sec:stomp-session-establishment">6.2 STOMP session
establishment</a></li>
<li><a href="#sec:stomp-connection-retry">6.3 STOMP Connection
Retry</a></li>
<li><a
href="#sec:successful-usp-message-over-stomp-with-required-headers">6.4
Successful USP message over STOMP with required headers</a></li>
<li><a href="#sec:stomp-destination---provided-in-subscribe-dest">6.5
STOMP destination - provided in subscribe-dest</a></li>
<li><a href="#sec:stomp-destination---configured-in-usp-data-model">6.6
STOMP destination - configured in USP data model</a></li>
<li><a
href="#sec:stomp-destination---terminates-unconfigured-session">6.7
STOMP Destination - terminates unconfigured session</a></li>
<li><a href="#sec:use-of-stomp-heartbeat-mechanism">6.8 Use of STOMP
heartbeat mechanism</a></li>
<li><a href="#sec:error-handling---unprocessed-record">6.9 Error
Handling - Unprocessed Record</a></li>
<li><a href="#sec:agents-stomp-destination-is-changed">6.10 Agent’s
STOMP destination is changed</a></li>
<li><a href="#sec:stomp---use-of-tls">6.11 STOMP - Use of TLS</a></li>
<li><a href="#sec:stomp---use-of-connect-record">6.12 STOMP - Use of
Connect Record</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:support-of-required-profiles">6.1 Support of Required
Profiles</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-146">Purpose</h3>
<p>The purpose of this test is to ensure the EUT supports the required
STOMP profiles.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-46">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-148">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-139">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.STOMP.&#39;
            obj_paths: &#39;Device.LocalAgent.&#39;
            return_params: true
            first_level_only: false
        }
    }
}</code></pre></li>
<li><p>Wait for the GetSupportedDMResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-147">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResponse.</li>
<li>The GetSupportedDMResponse from the EUT contains the following
parameters: * Device.LocalAgent.Controller.{i}.MTP.{i}.STOMP.Reference *
Device.LocalAgent.Controller.{i}.MTP.{i}.STOMP.Destination *
Device.STOMP.ConnectionNumberOfEntries *
Device.STOMP.Connection.{i}.Alias * Device.STOMP.Connection.{i}.Enable *
Device.STOMP.Connection.{i}.Status * Device.STOMP.Connection.{i}.Host *
Device.STOMP.Connection.{i}.Port *
Device.STOMP.Connection.{i}.VirtualHost *
Device.STOMP.Connection.{i}.ServerRetryInitialInterval *
Device.STOMP.Connection.{i}.ServerRetryIntervalMultiplier *
Device.STOMP.Connection.{i}.ServerRetryMaxInterval</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp-session-establishment">6.2 STOMP session
establishment</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-147">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can properly start a
STOMP session.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-47">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-149">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use a STOMP server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-140">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the STOMP server and subscribe to a
destination.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-148">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a STOMP frame to the STOMP server to initiate the
STOMP session.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp-connection-retry">6.3 STOMP Connection Retry</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-148">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly enters a retry
state when it fails to connect to the STOMP server.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-48">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-150">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use a STOMP server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-141">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.STOMP.Connection.&#39;
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.Reboot()&#39;
        }
    }
}</code></pre></li>
<li><p>Disable the STOMP server.</p></li>
<li><p>Allow the EUT to attempt to start a STOMP session with the STOMP
server.</p></li>
<li><p>Reenable the STOMP server after the EUT fails to connect to the
STOMP server twice.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-149">Test Metrics</h3>
<ol type="1">
<li>The EUT retries connecting to the STOMP server within the
<code>ServerRetryInitialInterval</code> of the connection instance.</li>
<li>The EUT retries a second time in accordance with
<code>ServerRetryInitialInterval</code> and
<code>ServerRetryIntervalMultiplier</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:successful-usp-message-over-stomp-with-required-headers">6.4
Successful USP message over STOMP with required headers</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-149">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can communicate over
STOMP using the correct headers.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-49">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-151">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use a STOMP server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-142">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to send a GetResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-150">Test Metrics</h3>
<ol type="1">
<li>In the STOMP frame transporting the GetResponse the
<code>content-length</code> header is present and contains the length of
the included body of the message.</li>
<li>In the STOMP frame transporting the GetResponse the
<code>content-type</code> header is present and contains
<code>application/vnd.bbf.usp.msg</code>.</li>
<li>In the STOMP frame transporting the GetResponse the
<code>reply-to-dest</code> header is present and contains the STOMP
destination of the EUT.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp-destination---provided-in-subscribe-dest">6.5 STOMP
destination - provided in subscribe-dest</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-150">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correct subscribe to a
destination found in the <code>subscribe-dest</code> header in a
CONNECTED frame.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-50">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-152">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use a STOMP server that is part of
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-143">Test Procedure</h3>
<ol type="1">
<li><p>Configure the STOMP server to send an unused destination via the
<code>subscribe-dest</code> header in the CONNECTED frames.</p></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Allow the EUT to reconnect to the STOMP server.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.&#39;
        }
    }
}</code></pre></li>
<li><p>Allow the EUT to respond to the Get message.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-151">Test Metrics</h3>
<ol type="1">
<li>The EUT subscribes to the destination configured in step 1.</li>
<li>The STOMP frame containing the GetResponse has a
<code>reply-to-dest</code> header which matches the destination
configured in step 1.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp-destination---configured-in-usp-data-model">6.6 STOMP
destination - configured in USP data model</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-151">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can use the
<code>Device.LocalAgent.MTP.{i}.STOMP.Destination</code> parameter to
select a STOMP destination.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-51">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-steps-7">Test
Steps</h3>
<ol type="1">
<li>Ensure the EUT is configured to use a STOMP server that is part of
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-144">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                obj_path: &#39;Device.LocalAgent.MTP.&lt;active MTP instance&gt;.STOMP.&#39;
                param_settings {
                        param: &#39;Destination&#39;
                        value: &#39;&lt;new unused destination&gt;&#39;
                    }
            }
        }
    }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the STOMP server.</p></li>
<li><p>Allow the STOMP server to send a CONNECTED frame that does NOT
include the subscribe-dest field.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-152">Test Metrics</h3>
<ol type="1">
<li>The EUT subscribes to the destination configured in step 1.</li>
<li>The STOMP frame containing the GetResponse has a
<code>reply-to-dest</code> header which contains the STOMP destination
configured in step 1.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp-destination---terminates-unconfigured-session">6.7 STOMP
Destination - terminates unconfigured session</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-152">Purpose</h3>
<p>The purpose of this test is to ensure the EUT terminates a STOMP
session when no destination id configured.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-52">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-153">Test Setup</h3>
<ol type="1">
<li>The EUT is configured to use a STOMP server which exists in the test
environment.</li>
<li>Configure the STOMP server to not provide a
<code>subscribe-dest</code> header in the CONNECTED frame.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-145">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.LocalAgent.MTP.&lt;active MTP instance&gt;.STOMP.&#39;
                    param_settings {
                            param: &#39;Destination&#39;
                            value: &#39;&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to attempt to reconnect to the STOMP
server.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-153">Test Metrics</h3>
<ol type="1">
<li>The EUT terminates the STOMP session after the STOMP server sends a
CONNECTION to the EUT.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-stomp-heartbeat-mechanism">6.8 Use of STOMP heartbeat
mechanism</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-153">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can correctly
implements the STOMP heartbeat mechanism and the relevant parameters in
the data model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-53">Functionality Tags</h3>
<p>Conditional Mandatory (supports STOMPHeartbeat:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-154">Test Setup</h3>
<ol type="1">
<li>The EUT is configured to use a STOMP server which exists in the test
environment.</li>
<li>Ensure the STOMP server supports heartbeats.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-146">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.STOMP.Connection.&lt;STOMP server in use&gt;.&#39;
                    param_settings {
                            param: &#39;EnableHeartbeats&#39;
                            value: &#39;true&#39;
                        }
                    param_settings {
                            param: &#39;IncomingHeartbeat&#39;
                            value: &#39;10000&#39;
                        }
                    param_settings {
                            param: &#39;OutgoingHeartbeat&#39;
                            value: &#39;15000&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the STOMP server.</p></li>
<li><p>Wait for 60 seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-154">Test Metrics</h3>
<ol type="1">
<li>In the STOMP frame sent to the STOMP server during step 2, the
<code>heart-beat</code> header sent by the EUT contains ‘15000,
10000’.</li>
<li>After the EUT is connected to the STOMP server, the EUT sends
heartbeat messages every 15 seconds.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:error-handling---unprocessed-record">6.9 Error Handling -
Unprocessed Record</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-154">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will correctly send an
ERROR STOMP frame when a malformed USP record is received.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-54">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-155">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use a STOMP server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-147">Test Procedure</h3>
<ol type="1">
<li>Send a malformed USP record to the EUT.</li>
<li>Wait 60 seconds for the EUT to send a response.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-155">Test Metrics</h3>
<ol type="1">
<li>The EUT either ignores the malformed record or sends a USP Record
Error.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agents-stomp-destination-is-changed">6.10 Agent’s STOMP
destination is changed</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-155">Purpose</h3>
<p>The purpose of this test is to ensure that when the EUT destination
is altered it properly unsubscribes and subscribes to the new
destination.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-55">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-156">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use a STOMP server that exists in
the test environment.</li>
<li>Ensure the STOMP server is configured to not provide a destination
via the <code>subscribe-dest</code> header.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-148">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.LocalAgent.MTP.&lt;active MTP instance&gt;.STOMP.&#39;
                    param_settings {
                            param: &#39;Destination&#39;
                            value: &#39;&lt;new destination&gt;&#39;
                        }
                }
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-156">Test Metrics</h3>
<ol type="1">
<li>After the STOMP destination was changed the EUT sent an UNSUBSCRIBE
message message to the STOMP server.</li>
<li>After the EUT sent an UNSUBSCRIBE to the STOMP server it sent a
SUBSCRIBE message with the new destination to the STOMP server.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp---use-of-tls">6.11 STOMP - Use of TLS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-156">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can establish secure
STOMP communication via TLS.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-56">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-157">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to the use a STOMP server that exists
in the test environment.</li>
<li>Ensure the EUT and STOMP server are configured with the appropriate
certificates to communicate over TLS.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-149">Test Procedure</h3>
<ol type="1">
<li><p>Reboot the EUT</p></li>
<li><p>Wait for the EUT to reconnect to the STOMP server</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-157">Test Metrics</h3>
<ol type="1">
<li>All communication between the EUT and STOMP server after step 1 are
encrypted using TLS</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:stomp---use-of-connect-record">6.12 STOMP - Use of Connect
Record</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-157">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly sends a
Connect record after it has established a communications channel to the
controller.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-57">Functionality Tags</h3>
<p>Conditional Mandatory (supports the STOMP MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-158">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use a STOMP server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-150">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the STOMP server.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-158">Test Metrics</h3>
<ol type="1">
<li>After reconnecting to the STOMP server the EUT transmits a
STOMPConnectRecord to the test controller within 30 seconds.</li>
<li>The version in the received STOMPConnectRecord matches the expected
version.</li>
<li>The subscribed_destination string in the received STOMPConnectRecord
matches the destination the EUT is subscribed to.</li>
</ol>
</section>
<section id="sec:websocket-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">7 WebSocket Test
Cases</h1>
<ul>
<li><a href="#sec:session-establishment">7.1 Session
Establishment</a></li>
<li><a href="#sec:use-of-only-one-session">7.2 Use of only one
session</a></li>
<li><a href="#sec:agent-session-acceptance-from-controller">7.3 Agent
session acceptance from Controller</a></li>
<li><a href="#sec:closing-a-websocket-connection">7.4 Closing a
WebSocket Connection</a></li>
<li><a href="#sec:rejection-of-session-establishment---deprecated">7.5
Rejection of Session Establishment - DEPRECATED</a></li>
<li><a href="#sec:error-handling---unprocessed-records">7.6 Error
Handling - Unprocessed Records</a></li>
<li><a href="#sec:use-of-ping-and-pong-frames">7.7 Use of Ping and Pong
frames</a></li>
<li><a href="#sec:websocket-session-retry">7.8 WebSocket Session
Retry</a></li>
<li><a href="#sec:use-of-tls">7.9 Use of TLS</a></li>
<li><a href="#sec:websocket---use-of-connect-record">7.10 WebSocket -
Use of Connect Record</a></li>
<li><a
href="#sec:websocket-response-does-not-include-bbf-usp-protocol">7.11
Websocket response does not include bbf-usp-protocol</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:session-establishment">7.1 Session Establishment</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-158">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can establish a session
using WebSocket as the MTP.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-58">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-159">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket and to communicate to
the controller that exists in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-151">Test Procedure</h3>
<ol type="1">
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the controller.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse from the EUT</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-159">Test Metrics</h3>
<ol type="1">
<li>The EUT is able to establish a WebSocket connection to the
controller</li>
<li>The EUT sends a GetResponse to the Get message sent in step 3</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-only-one-session">7.2 Use of only one session</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-159">Purpose</h3>
<p>The purpose of this test is to ensure the EUT maintains only one
WebSocket connection to a controller at a time.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-59">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP with requirement
R-WS.6)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-160">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket and to communicate to
the controller that exists in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-152">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT using the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Attempt to open a second WebSocket connection to the
EUT.</p></li>
<li><p>Send the Get message outlined in step 1 over the new
connection.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-160">Test Metrics</h3>
<ol type="1">
<li>Either the first WebSocket connection closes when the second is
opened, or the second connection is rejected.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:agent-session-acceptance-from-controller">7.3 Agent session
acceptance from Controller</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-160">Purpose</h3>
<p>This test has been DEPRECATED as of version 1.0.1 of this test
plan.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-60">Functionality Tags</h3>
<p>N/A</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-161">Test Setup</h3>
<p>N/A</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-153">Test Procedure</h3>
<p>N/A</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-161">Test Metrics</h3>
<p>N/A</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:closing-a-websocket-connection">7.4 Closing a WebSocket
Connection</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-161">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly implements
the procedure to close a WebSocket connection.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-61">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-162">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket.</li>
<li>Ensure there is an active WebSocket connection between the EUT and
the controller that was initiated by the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-154">Test Procedure</h3>
<ol type="1">
<li>Send a <code>Close</code> WebSocket control frame to the EUT.</li>
<li>Wait for the EUT to close the underlying TCP session.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-162">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a WebSocket Close frame.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:rejection-of-session-establishment---deprecated">7.5 Rejection
of Session Establishment - DEPRECATED</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:deprecation-notice">Deprecation Notice</h3>
<p>This test was deprecated in TP-469 Issue 1 Amendment 3 due to the
deprecation of R-WS.10a in TR-369 Issue 1 Amendment 3.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-162">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will correctly reject
WebSocket sessions.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-62">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-163">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket.</li>
<li>Configure the controller to reject WebSocket connections from the
EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-155">Test Procedure</h3>
<ol type="1">
<li>Configure the controller to not include the
<code>Sec-WebSocket-Protocol</code> when opening new WebSocket
connections.</li>
<li>Reboot the EUT</li>
<li>Attempt to start a WebSocket connection to the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-163">Test Metrics</h3>
<ol type="1">
<li>The EUT rejects the WebSocket connection with the missing
<code>Sec-WebSocket-Protocol</code> header.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:error-handling---unprocessed-records">7.6 Error Handling -
Unprocessed Records</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-163">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly closes the
WebSocket connection when a malformed USP Record is received.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-63">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-164">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket</li>
<li>Ensure there is an active WebSocket connection between the EUT and
controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-156">Test Procedure</h3>
<ol type="1">
<li>Send a malformed USP record to the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-164">Test Metrics</h3>
<ol type="1">
<li>After step 1 the EUT closes the WebSocket connection with a
WebSocket <code>Close</code> control frame containing status code
1003.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-ping-and-pong-frames">7.7 Use of Ping and Pong
frames</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-164">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly uses
<code>Ping</code> and <code>Pong</code> control frames to keep the
WebSocket session alive.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-64">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-165">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket</li>
<li>Ensure there is an active WebSocket session between the EUT and the
Controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-157">Test Procedure</h3>
<ol type="1">
<li>Send a <code>Ping</code> control frame to the EUT.</li>
<li>Wait up to 60 seconds for a <code>Pong</code> control frame from the
EUT.</li>
<li>Send a <code>Pong</code> control frame to the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-165">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a <code>Pong</code> control frame in response to the
<code>Ping</code> control frame.</li>
<li>The EUT doesn’t terminate the WebSocket connection after receiving
an unsolicited <code>Pong</code> control frame.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:websocket-session-retry">7.8 WebSocket Session Retry</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-165">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will correctly attempt
to reestablish a WebSocket session if a session is unexpectedly
closed.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-65">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-166">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket.</li>
<li>Ensure there is an active WebSocket connection between the EUT and
controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-158">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;test controller instance&gt;.MTP.&lt;active MTP instance&gt;.&#39;
        }
    }
}</code></pre></li>
<li><p>Configure the controller to reject new WebSocket
connections.</p></li>
<li><p>Terminate the underlying TCP connection on the existing WebSocket
connection.</p></li>
<li><p>Wait for the EUT to attempt to establish a WebSocket
connection.</p></li>
<li><p>Configure the controller to accept new WebSocket
connections.</p></li>
<li><p>Wait for the EUT to attempt to establish a WebSocket
connection.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-166">Test Metrics</h3>
<ol type="1">
<li>The EUT attempts to start a new WebSocket connection in conformance
with the <code>SessionRetryMinimumWaitInterval</code> parameter.</li>
<li>The EUT makes a second attempt to start a new WebSocket connection
in conformance with the <code>SessionRetryMinimumWaitInterval</code> and
<code>SessionRetryIntervalMultiplier</code> parameters.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header" id="sec:use-of-tls">7.9
Use of TLS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-166">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can establish and use a
secure WebSocket connection.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-66">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-167">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use WebSocket.</li>
<li>Ensure the EUT and controller both have the required certificates to
secure a websocket connection.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-159">Test Procedure</h3>
<ol type="1">
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to connect to the controller.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for GetResponse from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-167">Test Metrics</h3>
<ol type="1">
<li>The EUT starts a WebSocket connection with the controller using
TLS.</li>
<li>The EUT sends a GetResponse in step 4.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:websocket---use-of-connect-record">7.10 WebSocket - Use of
Connect Record</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-167">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly sends a
Connect Record after it has established a WebSocket connection to the
Controller.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-67">Functionality Tags</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-168">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to connect to the test controller using
WebSocket.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-160">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the test controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-168">Test Metrics</h3>
<ol type="1">
<li>After reconnecting to the test controller the EUT transmits a
WebSocketConnectRecord to the test controller within 30 seconds.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:websocket-response-does-not-include-bbf-usp-protocol">7.11
Websocket response does not include bbf-usp-protocol</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-168">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly processes a
Websocket response that does not contain the bbf-usp-protocol Websocket
Extension.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tag-102">Functionality Tag</h3>
<p>Conditional Mandatory (supports the WebSocket MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-169">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to connect to the test controller using
WebSocket.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-161">Test Procedure</h3>
<ol type="1">
<li><p>Configure the controller to not include ‘bbf-usp-protocol’ in its
Sec-WebSocket-Extensions header when opening new WebSocket
connections.</p></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Attempt to start a WebSocket connection to the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a GetResponse from the EUT</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-169">Test Metrics</h3>
<ol type="1">
<li><p>The EUT is able to establish a WebSocket connection to the
controller.</p></li>
<li><p>The EUT sends a GetResponse to the Get message sent in step
4.</p></li>
</ol>
</section>
<section id="sec:discovery-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">8 Discovery Test
Cases</h1>
<ul>
<li><a href="#sec:dhcp-discovery---agent-request-requirements">8.1 DHCP
Discovery - Agent Request Requirements</a></li>
<li><a
href="#sec:dhcp-discovery---agent-handling-of-received-options">8.2 DHCP
Discovery - Agent handling of received options</a></li>
<li><a href="#sec:dhcp-discovery---fqdn-leads-to-dns-query">8.3 DHCP
Discovery - FQDN Leads to DNS Query</a></li>
<li><a href="#sec:mdns">8.4 mDNS</a></li>
<li><a href="#sec:mdns-and-message-transfer-protocols">8.5 mDNS and
Message Transfer Protocols</a></li>
<li><a href="#sec:dns---dns-record-requirements">8.6 DNS - DNS Record
Requirements</a></li>
<li><a href="#sec:mdns-request-response">8.7 mDNS request
response</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:dhcp-discovery---agent-request-requirements">8.1 DHCP Discovery
- Agent Request Requirements</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-169">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly requests
controller information via DHCP. <em>Note: this test can be run over
DHCPv4 or DHCPv6, depending on the deployment model of the EUT.</em></p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-68">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via DHCP Options)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-170">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to request controller DHCP
information.</li>
<li>Ensure the EUT is configured to acquire an address via DHCP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-162">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to request an address via DHCP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-170">Test Metrics</h3>
<ol type="1">
<li>The EUT includes a Vendor Class option with Enterprise Number 3561
and vendor-class-data “usp” in the DHCP request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:dhcp-discovery---agent-handling-of-received-options">8.2 DHCP
Discovery - Agent handling of received options</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-170">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can properly handle the
USP options provided by a DHCP server.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-69">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via DHCP Options)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-171">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to request controller DHCP
information</li>
<li>Ensure the EUT is configured to acquire an address via DHCP.</li>
<li>Ensure the EUT ProvisioningCode parameter is set to a value other
than that which will be set during the test procedure.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-163">Test Procedure</h3>
<ol type="1">
<li><p>Configure the DHCP server to provide a null terminated
provisioning code.</p></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to request an address via DHCP.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Controller.&lt;test controller instance&gt;.&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the GetResponse from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-171">Test Metrics</h3>
<ol type="1">
<li>The ProvisioningCode parameter found in the GetResponse matches the
provisioning code configured on the DHCP server.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:dhcp-discovery---fqdn-leads-to-dns-query">8.3 DHCP Discovery -
FQDN Leads to DNS Query</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-171">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly uses DNS to
retrieve additional controller information upon receiving a FQDN of a
controller.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-70">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via DHCP Options)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-172">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to request controller information via
DHCP.</li>
<li>Ensure the EUT is configured to acquire an address via DHCP.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-164">Test Procedure</h3>
<ol type="1">
<li>Configure the DHCP server to provide a controller URL with a
FQDN.</li>
<li>Reboot the EUT.</li>
<li>Wait for the EUT to request an address.</li>
<li>Wait for the EUT to query the DNS with the FQDN.</li>
<li>Wait for the EUT to connect to the controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-172">Test Metrics</h3>
<ol type="1">
<li>After the EUT receives a FQDN in the DHCP Offer, the EUT uses DNS to
retrieve additional information about the controller.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header" id="sec:mdns">8.4
mDNS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-172">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly implements
mDNS.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-71">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via mDNS, supports the
Reboot:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-173">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT has mDNS enabled.</li>
<li>Ensure the controller exists on the same network as the EUT.</li>
<li>Ensure that the EUT has the Controller’s URL, which contains
“.local.” is preconfigured on the EUT.</li>
<li>Ensure that a Subscription exists for the Boot! event on the EUT
with the test Controller as the Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-165">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to send a mDNS request for the FQDN.</li>
<li>Allow the controller to respond to the mDNS request.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-173">Test Metrics</h3>
<ol type="1">
<li>After the EUT receives a FQDN via DHCP containing “.local.” the EUT
uses mDNS to resolve it.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mdns-and-message-transfer-protocols">8.5 mDNS and Message
Transfer Protocols</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-173">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly advertises
the MTP it supports.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-72">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via mDNS)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-174">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT has mDNS enabled.</li>
<li>Ensure the Controller exists on the same network as the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-166">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to acquire an address.</li>
<li>Wait for the EUT to send an unsolicited mDNS response.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-174">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an unsolicited multicast DNS response containing
correct SRV and TXT records that convey the DNS-SD Service Instance Name
for each supported MTP.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:dns---dns-record-requirements">8.6 DNS - DNS Record
Requirements</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-174">Purpose</h3>
<p>The purpose of this test is to ensure the EUT provides valid DNS-SD
records.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-73">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via mDNS)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-175">Test Setup</h3>
<ol type="1">
<li>Ensure mDNS is enabled on the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-167">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to acquire a new address.</li>
<li>Wait for to the EUT to send a multicast mDNS advertisement.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-175">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a multicast mDNS advertisement containing a TXT record
for every supported MTP.</li>
<li>Every TXT record in the mDNS advertisement has a “path” and “name”
attribute.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mdns-request-response">8.7 mDNS request response</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-175">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will respond to mDNS
requests.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-74">Functionality Tags</h3>
<p>Conditional Mandatory (supports discovery via mDNS)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-176">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to listen for mDNS requests.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-168">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Send an mDNS query to the multicast domain that includes the
EUT.</li>
<li>Wait for an mDNS response from the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-176">Test Metrics</h3>
<ol type="1">
<li>The EUT responds to the mDNS query with the proper information.</li>
</ol>
</section>
<section id="sec:functionality-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">9 Functionality Test
Cases</h1>
<ul>
<li><a href="#sec:use-of-the-timer-event-deprecated-by-9.11">9.1 Use of
the Timer! Event (DEPRECATED by 9.11)</a></li>
<li><a href="#sec:use-of-device.localagent.addcertificate">9.2 Use of
Device.LocalAgent.AddCertificate()</a></li>
<li><a
href="#sec:upgraded-the-agents-firmware---autoactivate-enabled">9.3
Upgraded the Agent’s Firmware - Autoactivate enabled</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-immediate">9.4
Upgrading the Agent’s Firmware - Using TimeWindow, Immediate</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---using-timewindow-anytime">9.5
Upgrading the Agent’s Firmware - Using TimeWindow, AnyTime</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---validated-firmware">9.6
Upgrading the Agent’s Firmware - Validated Firmware</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---download-to-active-bank">9.7
Upgrading the Agent’s Firmware - Download to Active Bank</a></li>
<li><a
href="#sec:upgrading-the-agents-firmware---cancelling-a-request-using-the-cancel-command">9.8
Upgrading the Agent’s Firmware - Cancelling a request using the Cancel()
command</a></li>
<li><a href="#sec:adding-a-new-controller---onboardrequest">9.9 Adding a
New Controller - OnBoardRequest</a></li>
<li><a href="#sec:use-of-the-boot-event-and-bootparameters">9.10 Use of
the Boot! event and BootParameters</a></li>
<li><a href="#sec:use-of-the-timer-event">9.11 Use of the Timer!
Event</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-the-timer-event-deprecated-by-9.11">9.1 Use of the Timer!
Event (DEPRECATED by 9.11)</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-176">Purpose</h3>
<p>The purpose of this test is to ensure the Timer! event can be
configured, and the EUT correctly triggers the event.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-75">Functionality Tags</h3>
<p>Conditional Mandatory (supports
Device.LocalAgent.Controller.{i}.ScheduleTimer() command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-177">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-169">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.Controller.&lt;Controller ID&gt;.ScheduleTimer()&#39;
            input_args {
                key: &#39;DelaySeconds&#39;
                value: &#39;60&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a Notification.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-177">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResponse with ‘ScheduleTimer()’ in the
<code>executed_command</code> element.</li>
<li>The EUT sends a Notify message with an <code>event</code> element
containing Timer!</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-device.localagent.addcertificate">9.2 Use of
Device.LocalAgent.AddCertificate()</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-177">Purpose</h3>
<p>The purpose of this test is to ensure the AddCertificate() operation
on the EUT functions correctly.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-76">Functionality Tags</h3>
<p>Conditional Mandatory (supports Device.LocalAgent.AddCertificate()
command)</p>
<h3 class="auto-hoverlink" data-info="header" id="sec:test-setups">Test
Setups</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Have an alternate certificate that the EUT hasn’t seen.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-170">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.AddCertificate()&#39;
            send_resp: true
            input_args {
                key: &#39;Alias&#39;
                value: &#39;addedCert&#39;
            }
            input_args {
                key: &#39;Certificate&#39;
                value: &#39;&lt;new certificate&gt;&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Reconfigure the Controller to use the new certificate.</p></li>
<li><p>Reestablish a connection to the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Certificate.&#39;
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.Certificate.&lt;cert instance&gt;.Delete()&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-178">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResponse after step 1.</li>
<li>The EUT accepts the connection after the Controller has been
reconfigured to use the new certificate.</li>
<li>The EUT returns a GetResponse after step 4 which contains an
instance with an Alias which matches the certificate added in step
1.</li>
<li>The EUT sends an OperateResponse after step 5.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgraded-the-agents-firmware---autoactivate-enabled">9.3
Upgraded the Agent’s Firmware - Autoactivate enabled</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-178">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can download firmware
and automatically activate it using the AutoActivate parameter.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-77">Functionality Tags</h3>
<p>Conditional Mandatory (supports Firmware:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-178">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the EUT has a Subscription to the TransferComplete! and
Boot! events with the Recipient being the Controller instance used for
testing.</li>
<li>Ensure that the EUT has a Subscription instance for the
OperationComplete notification with a NotifType equal to
‘OperationComplete’ and a ReferenceList that matches the path of the
‘Download()’ command with the Controller used for testing set as the
Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-171">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command:  &#39;Device.DeviceInfo.FirmwareImage.&lt;inactive instance&gt;.Download()&#39;
            input_args {
                key: &#39;AutoActivate&#39;
                value: &#39;true&#39;
            }
            input_args {
                key: &#39;URL&#39;
                value: &#39;&lt;firmware URL&gt;&#39;
            }
            input_args {
                key: &#39;Username&#39;
                value: &#39;&lt;optional username&gt;&#39;
            }
            input_args {
                key: &#39;Password&#39;
                value:&#39;&lt;optional password&gt;&#39;
            }
            input_args {
                key: &#39;FileSize&#39;
                value: &#39;&lt;file size&gt;&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a Notification</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-179">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a Notify message after step 1 containing a
<code>oper_complete</code> element with a <code>command_name</code> of
‘Download()’</li>
<li>The EUT sends a Notify message with a TransferComplete! event.</li>
<li>The EUT sends a Notify message with a Boot! event, with the
‘FirmwareUpdated’ argument set to true.</li>
<li>The EUT sends a GetResponse message after step 3 which shows that
Device.DeviceInfo.ActiveFirmwareImage matches the FirmwareImage instance
on which the Download() operation was called; also that
Device.DeviceInfo.SoftwareVersion matches the expected version.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgrading-the-agents-firmware---using-timewindow-immediate">9.4
Upgrading the Agent’s Firmware - Using TimeWindow, Immediate</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-179">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can activate a firmware
image when a TimeWindow object is used with Immediately mode.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-78">Functionality Tags</h3>
<p>Conditional Mandatory (supports Firmware:1 profile with Activate()
operation)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-179">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the EUT has a FirmwareImage instance containing inactive
firmware.</li>
<li>Ensure the EUT has a Subscription instance for Boot! with the
Controller used for testing set as the Recipient.</li>
<li>Ensure that the EUT has a Subscription instance for the
OperationComplete notification with a NotifType equal to
‘OperationComplete’ and a ReferenceList that matches the path of the
‘Activate()’ command with the Controller used for testing set as the
Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-172">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &quot;Device.DeviceInfo.FirmwareImage.&lt;instance&gt;.Activate()&quot;
            input_args: {
                key: &#39;TimeWindow.1.Start&#39;
                value: &#39;1&#39;
            }
            input_args: {
                key: &#39;TimeWindow.1.End&#39;
                value: &#39;100&#39;
            }
            input_args: {
                key: &#39;TimeWindow.1.Mode&#39;
                value: &#39;Immediately&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for Notify message from the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.SoftwareVersion&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-180">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a Notify message within 5 seconds with an
OperationComplete element with a <code>command_name</code> of
‘Activate()’.</li>
<li>The EUT sends a Notify message with a Boot! event and a
FirmwareUpdated argument set to true.</li>
<li>The EUT responds to the Get message with a GetResponse containing a
SoftwareVersion element with the expected software version.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgrading-the-agents-firmware---using-timewindow-anytime">9.5
Upgrading the Agent’s Firmware - Using TimeWindow, AnyTime</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-180">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can activate a firmware
image when a TimeWindow instance used with the AnyTime mode.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-79">Functionality Tags</h3>
<p>Conditionally Mandatory (implements Firmware:1 and Activate()
operation)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-180">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the EUT has a FirmwareImage instance containing inactive
firmware.</li>
<li>Ensure the EUT has a Subscription to the Boot! event with the
Controller used for testing set as the Recipient.</li>
<li>Ensure that the EUT has a Subscription instance for the
OperationComplete notification with a NotifType equal to
‘OperationComplete’ and a ReferenceList that matches the path of the
‘Activate()’ command with the Controller used for testing set as the
Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-173">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.DeviceInfo.FirmwareImage.&lt;inactive instance&gt;.Activate()&#39;
            input_args: {
                key: &#39;TimeWindow.1.Start&#39;
                value: &#39;0&#39;
            }
            input_args: {
                key: &#39;TimeWindow.1.End&#39;
                value: &#39;120&#39;
            }
            input_args: {
                key: &#39;TimeWindow.1.Mode&#39;
                value: &#39;AnyTime&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for a Notify message from the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.SoftwareVersion&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-181">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a Notify message within 2 minutes after step 1.</li>
<li>The Notify message has a OperationComplete element.</li>
<li>The EUT sends a Notify message with a Boot! event and a
FirmwareUpdated argument set to true.</li>
<li>The EUT sends a GetResponse after step 3 with a SoftwareVersion
parameter that matches the expected version.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgrading-the-agents-firmware---validated-firmware">9.6
Upgrading the Agent’s Firmware - Validated Firmware</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-181">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can validate the
integrity of downloaded firmware.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-80">Functionality Tags</h3>
<p>Conditional Mandatory (supports Firmware:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-181">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the EUT has Subscriptions to the TransferComplete! event
notification with the Controller used for testing set as the
Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-174">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following structure
using an invalid checksum:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.DeviceInfo.FirmwareImage.&lt;inactive slot&gt;.Download()&#39;
            input_args {
                key: &#39;URL&#39;
                value: &#39;&lt;firmware URL&gt;&#39;
            }
            input_args {
                key: &#39;CheckSumAlgorithm&#39;
                value: &#39;SHA-1&#39;
            }
            input_args {
                key: &#39;CheckSum&#39;
                value: &#39;&lt;invalid checksum&gt;&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for a Notify message from the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo.FirmwareImage.&lt;previously used instance&gt;.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-182">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a Notify message with a TransferComplete! event.</li>
<li>The EUT sends a Get response with a Status parameter of
ValidationFailed.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgrading-the-agents-firmware---download-to-active-bank">9.7
Upgrading the Agent’s Firmware - Download to Active Bank</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-182">Purpose</h3>
<p>The purpose of this test is to ensure the EUT is capable downloading
and installing new firmware for EUTs that may support only the active
firmware bank.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-81">Functionality Tags</h3>
<p>Conditional Mandatory (supports Firmware:1 profile)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-182">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that the EUT has a Subscription to the TransferComplete!
event with the recipient being the instance used for testing.</li>
<li>Ensure the EUT has a Subscription to the Boot! event and the
Controller used for testing is set as the Recipient.</li>
<li>Record the number of firmware banks the EUT supports.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-175">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.DeviceInfo.FirmwareImage.&lt;active firmware slot&gt;.Download()&#39;
            input_args {
                key: &#39;URL&#39;
                value: &#39;&lt;firmware URL&gt;&#39;
            }
            input_args {
                key: &#39;AutoActivate&#39;
                value: &#39;true&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for a Notify message from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-183">Test Metrics</h3>
<p>If the EUT supports only one firmware bank: 1. The EUT sends a Notify
message with a TransferComplete! event. 2. the EUT sends a Notify
message with a Boot! event and a FirmwareUpdated argument set to
true.</p>
<p>If the EUT supports multiple firmware banks: 3. The EUT may send an
error indicating that downloading to an active firmware slot is not
allowed. 4. If the EUT did not send an error message in Test Metric 3,
the EUT sends a Notify message with a TransferComplete! event. 5. If the
EUT did not send an error message in Test Metric 3, the EUT sends a
Notify message with a Boot! event and a FirmwareUpdated argument set to
true.</p>
<h2 class="auto-hoverlink" data-info="header"
id="sec:upgrading-the-agents-firmware---cancelling-a-request-using-the-cancel-command">9.8
Upgrading the Agent’s Firmware - Cancelling a request using the Cancel()
command</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-183">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can correctly cancel a
Download() operation.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-82">Functionality Tags</h3>
<p>Conditional Mandatory (supports Firmware:1 profile and
Device.LocalAgent.Request.{i}.Cancel() operation)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-183">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure the EUT has inactive firmware in one of FirmwareImage
slots.</li>
<li>Ensure the EUT has a subscription to the Boot! event with the
Controller used for testing set as the Recipient.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-176">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.DeviceInfo.FirmwareImage.&lt;valid instance&gt;.Activate()&#39;
            input_args {
                key: &#39;TimeWindow.1.Start&#39;
                value: &#39;120&#39;
            }
            input_args {
                key: &#39;TimeWindow.1.End&#39;
                value: &#39;500&#39;
            }
            input_args {
                key: &#39;TimeWindow.1.Mode&#39;
                value: &#39;AnyTime&#39;
            }
            send_resp: true
        }
    }
}</code></pre></li>
<li><p>Send an message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.Request.&lt;returned in step 1&gt;.Cancel()&#39;
        }
    }
}</code></pre></li>
<li><p>Wait up to 500 seconds for a Boot! event from the EUT.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.LocalAgent.Request.&#39;
        }
    }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-184">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a OperationResponse after step 1 with a
<code>executed_command</code> element of ‘Activate()’ and a
<code>req_obj_path</code> referencing an entry in the
Device.LocalAgent.Request table.</li>
<li>The EUT never sends a Boot! event.</li>
<li>In the GetResponse from the EUT after step 4, the Request instance
is either non-existent or the Status parameter of the relevant request
is either Cancelled or Cancelling.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:adding-a-new-controller---onboardrequest">9.9 Adding a New
Controller - OnBoardRequest</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-184">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can handle the manual
adding of a new Controller.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-83">Functionality Tags</h3>
<p>Conditional Mandatory (supports Controller:1 profile with the ability
to create instances of the Device.LocalAgent.Controller. object,
supports SendOnBoardRequest())</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-184">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>A valid role instance is configured on the EUT for use with the new
certificate.</li>
<li>A valid certificate instance is configured on the EUT</li>
<li>A secondary Controller is configured and ready to communicate with
another endpoint.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-177">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure.</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            create_objs {
                obj_path: &#39;Device.LocalAgent.Controller.&#39;
                param_settings {
                        param: &#39;Alias&#39;
                        value: &#39;usp-111-Controller&#39;
                    }
                param_settings {
                        param: &#39;EndpointID&#39;
                        value: &#39;&lt;new Controller endpoint ID&gt;&#39;
                    }
                param_settings {
                        param: &#39;Enable&#39;
                        value: &#39;true&#39;
                    }
                param_settings {
                        param: &#39;AssignedRole&#39;
                        value: &#39;&lt;valid role instance&gt;&#39;
                    }
            }
        }
    }
}</code></pre></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
          create_objs {
            obj_path: &#39;Device.LocalAgent.Controller.&lt;new Controller instance&gt;.MTP.&#39;
            param_settings: {
                    param: &#39;Enable&#39;
                    value: &#39;true&#39;
                }
            param_settings: {
                    param: &#39;Protocol&#39;
                    value: &#39;&lt;supported MTP&gt;&#39;
                }
           }
              #  .
              #  .
              #  &lt;further parameters to configure supported MTP&gt;
              #  .
              #  .
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.LocalAgent.Controller.&lt;new instance&gt;.SendOnBoardRequest()&#39;
        }
    }
}</code></pre></li>
<li><p>Allow the secondary Controller to receive the OnBoardRequest()
and send a NotifyResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-185">Test Metrics</h3>
<ol type="1">
<li>The EUT is able to start a session with the secondary
Controller.</li>
<li>The EUT sends a Notify message to the secondary Controller
containing an OnBoardRequest element.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-the-boot-event-and-bootparameters">9.10 Use of the Boot!
event and BootParameters</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-185">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly triggers the
Boot! event and correctly includes the configured BootParameters.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-84">Functionality Tags</h3>
<p>Conditional Mandatory (supports Reboot:1 profile, supports
Device.DeviceInfo.BootFirmwareImage)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-185">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-178">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
            create_objs {
                    obj_path: &#39;Device.LocalAgent.Subscription.&#39;
                    param_settings {
                            param: &#39;NotifType&#39;
                            value: &#39;Event&#39;
                        }
                    param_settings {
                            param: &#39;ReferenceList&#39;
                            value: &#39;Device.Boot!&#39;
                        }
                    param_settings {
                            param: &#39;Enable&#39;
                            value: &#39;true&#39;
                        }
                }
            create_objs {
                    obj_path: &#39;Device.LocalAgent.Controller.&lt;Controller instance&gt;.BootParameter.&#39;
                    param_settings {
                            param: &#39;Enable&#39;
                            value: &#39;true&#39;
                        }
                    param_settings {
                            param: &#39;ParameterName&#39;
                            value: &#39;Device.DeviceInfo.BootFirmwareImage&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.Reboot()&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for a Notify message from the EUT.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-186">Test Metrics</h3>
<ol type="1">
<li>After step 2 the EUT sends a Notify message with an event element
containing a ParameterMap argument with
‘Device.DeviceInfo.BootFirmwareImage’</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-of-the-timer-event">9.11 Use of the Timer! Event</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-186">Purpose</h3>
<p>The purpose of this test is to ensure the Timer! event can be
configured, and the EUT correctly triggers the event.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-85">Functionality Tags</h3>
<p>Conditional Mandatory (supports Device.ScheduleTimer() command)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-186">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that a Subscription object exists on the EUT with NotifType
OperationComplete on Device.ScheduleTimer().</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-179">Test Procedure</h3>
<ol type="1">
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.ScheduleTimer()&#39;
            send_resp: true
            input_args {
                key: &#39;DelaySeconds&#39;
                value: &#39;60&#39;
            }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a Notification.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-187">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an OperateResponse with ScheduleTimer() in the
executed_command element.</li>
<li>The EUT sends an OperationComplete Notify message with an event
element containing ScheduleTimer().</li>
</ol>
</section>
<section id="sec:bulk-data-collection-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">10 Bulk Data Collection
Test Cases</h1>
<ul>
<li><a href="#sec:use-bulkdata-collection-using-http-and-json">10.1 Use
BulkData collection using HTTP and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-json">10.2 Use
BulkData collection using HTTPS and JSON</a></li>
<li><a href="#sec:use-bulkdata-collection-using-http-and-csv">10.3 Use
BulkData collection using HTTP and CSV</a></li>
<li><a href="#sec:use-bulkdata-collection-using-https-and-csv">10.4 Use
BulkData collection using HTTPS and CSV</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-uri-parameters">10.5
Use BulkData collection using HTTP with URI Parameters</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-https-with-uri-parameters">10.6
Use BulkData collection using HTTPS with URI Parameters</a></li>
<li><a href="#sec:bulkdata-collection-retry-mechanism-over-http">10.7
BulkData collection retry mechanism over HTTP</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-wildcard-parameter">10.8
Use BulkData collection using HTTP with wildcard parameter</a></li>
<li><a
href="#sec:use-bulkdata-collection-using-http-with-object-path">10.9 Use
BulkData collection using HTTP with Object Path</a></li>
<li><a href="#sec:use-bulkdata-collection-push-event">10.10 Use BulkData
collection Push event</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-wildcard-path">10.11
Use BulkData collection Push event with Wildcard path</a></li>
<li><a
href="#sec:use-bulkdata-collection-push-event-with-object-path">10.12
Use BulkData collection Push event with Object path</a></li>
<li><a href="#sec:use-bulkdata-collection-over-mqtt">10.13 Use BulkData
collection over MQTT</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-http-and-json">10.1 Use BulkData
collection using HTTP and JSON</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-187">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports JSON BulkData
collection over HTTP.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-86">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols, “JSON” ∈ Device.BulkData.EncodingTypes)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-187">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is configured
to support receiving JSON BulkData transfers.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-180">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;JSON&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-188">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTP endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the BulkData transfer is JSON and is well formed
(parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-https-and-json">10.2 Use BulkData
collection using HTTPS and JSON</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-188">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports JSON BulkData
collection over HTTPS.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-87">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols, “JSON” ∈ Device.BulkData.EncodingTypes)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-188">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTPS endpoint that is accessible by the EUT is configured
to support receiving JSON BulkData transfers.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-181">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;JSON&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-189">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTPS endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the BulkData transfer is JSON and is well formed
(parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-http-and-csv">10.3 Use BulkData
collection using HTTP and CSV</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-189">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports CSV BulkData
collection over HTTP.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-88">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols, “CSV” ∈ Device.BulkData.EncodingTypes)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-189">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is configured
to support receiving CSV BulkData transfers.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-182">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;CSV&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-190">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTP endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the BulkData transfer is CSV and is well formed
(parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-https-and-csv">10.4 Use BulkData
collection using HTTPS and CSV</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-190">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports CSV BulkData
collection over HTTPS.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-89">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols, “CSV” ∈ Device.BulkData.EncodingTypes)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-190">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTPS endpoint that is accessible by the EUT is configured
to support receiving CSV BulkData transfers.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-183">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;CSV&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-191">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTPS endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the BulkData transfer is CSV and is well formed
(parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-http-with-uri-parameters">10.5 Use
BulkData collection using HTTP with URI Parameters</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-191">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection over HTTP with extra URI parameters</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-90">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-191">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is
configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-184">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;Supported Encoding type&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.HTTP.RequestURIParameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-192">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTP endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The EUT includes the EUT UpTime encoded into the URI using the name
‘UpTime’</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are also encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-https-with-uri-parameters">10.6
Use BulkData collection using HTTPS with URI Parameters</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-192">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection over HTTPS with extra URI parameters</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-91">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-192">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTPS endpoint that is accessible by the EUT is
configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-185">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;Supported Encoding type&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of https endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.HTTP.RequestURIParameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-193">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTPS endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The EUT includes the EUT UpTime encoded into the URI using the name
‘UpTime’</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are also encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:bulkdata-collection-retry-mechanism-over-http">10.7 BulkData
collection retry mechanism over HTTP</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-193">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection retry mechanism.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-92">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-193">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is
configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-186">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;Supported Encoding type&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
          param_settings {
               param: &#39;HTTP.RetryEnable&#39;
               value: &#39;true&#39;
           }
          param_settings {
               param: &#39;HTTP.RetryMinimumWaitInterval&#39;
               value: &#39;5&#39;
           }
          param_settings {
               param: &#39;HTTP.RetryIntervalMultiplier&#39;
               value: &#39;2000&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Disable the HTTP BulkData collection endpoint.</p></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to attempt to send a BulkData transfer.</p></li>
<li><p>Wait for 13 seconds for the EUT to retry the BulkData
transfer.</p></li>
<li><p>Wait for 23 seconds for the EUT to retry the BulkData
transfer.</p></li>
<li><p>Enable the HTTP BulkData collection endpoint</p></li>
<li><p>Wait for 43 seconds for the EUT to retry the BulkData
transfer.</p></li>
<li><p>Wait for the EUT to send a BulkData transfer</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-194">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTP endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The EUT retries sending the BulkData transfer 3 times with each time
occurring within the expected retry interval.</li>
<li>The EUT does not attempt to retry the BulkData transfer after
receiving a positive response in step 9.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are encoded as URI parameters in each request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-http-with-wildcard-parameter">10.8
Use BulkData collection using HTTP with wildcard parameter</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-194">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection over HTTP with a wildcarded parameter</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-93">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-194">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is
configured.</li>
<li>Ensure there are at least 2 BootParameters configured for the test
controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-187">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;Supported Encoding type&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;Enabled&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.Controller.*.BootParameter.*.Enable&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-195">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTP endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>Ensure at least two “Enable” are in the BulkData transfer with the
parameter names matching the following expression:
<code>Enabled\.[1-9][0-9]*\.[1-9][0-9]*</code></li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are also encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-using-http-with-object-path">10.9 Use
BulkData collection using HTTP with Object Path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-195">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection over HTTP with an Object Path</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-94">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “HTTP” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-195">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a HTTP endpoint that is accessible by the EUT is
configured.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-188">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;HTTP&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;Supported Encoding type&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;HTTP.URL&#39;
               value: &#39;&lt;URL of http endpoint&gt;&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;TestController&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.Controller.&lt;controller instance&gt;.&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-196">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData
transfers to the HTTPS endpoint within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>Ensure that all the parameters included in the BulkData transfer
match <code>TestController.&lt;parameter&gt;</code> and that all
expected parameters are present.</li>
<li>Ensure the Manufacturer OUI, Product Class and Serial Number or the
USP Endpoint ID are also encoded as URI parameters in the request.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-push-event">10.10 Use BulkData
collection Push event</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-196">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection via the Push event.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-95">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “USPEventNotif” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-196">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-189">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;USPEventNotif&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;JSON or CSV&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.LocalAgent.Subscription.&#39;
          param_settings {
               param: &#39;NotifType&#39;
               value: &#39;Event&#39;
           }
          param_settings {
               param: &#39;ReferenceList&#39;
               value: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Push!&#39;
           }
          param_settings {
               param: &#39;Enable&#39;
               value: &#39;true&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-197">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData transfer
Push! events to the controller within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the Data parameter in the Push! notification is well
formed (parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-push-event-with-wildcard-path">10.11 Use
BulkData collection Push event with Wildcard path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-197">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection via the Push event using a wildcard path.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-96">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “USPEventNotif” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-197">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure that there are at least 2 BootParameters configured for the
test Controller.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-190">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;USPEventNotif&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;JSON or CSV&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;Enabled&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.Controller.*.BootParameter.*.Enable&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.LocalAgent.Subscription.&#39;
          param_settings {
               param: &#39;NotifType&#39;
               value: &#39;Event&#39;
           }
          param_settings {
               param: &#39;ReferenceList&#39;
               value: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Push!&#39;
           }
          param_settings {
               param: &#39;Enable&#39;
               value: &#39;true&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-198">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData transfer
Push! events to the controller within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the Data parameter in the Push! notification is well
formed (parsable).</li>
<li>The BulkData transfer contains at least 2 parameters, one for each
of the configured BootParameters and the name of the parameters match
the expected name <code>Enabled\.[1-9][0-9]*\.[1-9][0-9]*</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-push-event-with-object-path">10.12 Use
BulkData collection Push event with Object path</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-198">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection via the Push event using an object path.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-97">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “USPEventNotif” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-198">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-191">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;USPEventNotif&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;JSON or CSV&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;Controller&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.LocalAgent.Controller.&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.LocalAgent.Subscription.&#39;
          param_settings {
               param: &#39;NotifType&#39;
               value: &#39;Event&#39;
           }
          param_settings {
               param: &#39;ReferenceList&#39;
               value: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Push!&#39;
           }
          param_settings {
               param: &#39;Enable&#39;
               value: &#39;true&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-199">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT sent 2 BulkData transfer
Push! events to the controller within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the Data parameter in the Push! notification is well
formed (parsable).</li>
<li>The BulkData transfer contains at parameters with names using the
prefix “Controller”.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:use-bulkdata-collection-over-mqtt">10.13 Use BulkData collection
over MQTT</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-199">Purpose</h3>
<p>The purpose of this test is to verify that EUT supports BulkData
collection via MQTT.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-98">Functionality Tags</h3>
<p>Conditional Mandatory (supports BulkDataColl:1, “MQTT” ∈
Device.BulkData.Protocols)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-199">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP Records to each other.</li>
<li>Ensure a MQTT endpoint that is accessible by the EUT is enabled in
the test environment.</li>
<li>Ensure there is a Device.MQTT.Client. entry in the EUT’s data model
for the MQTT endpoint mentioned in step 2 of the test setup.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-192">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&#39;
          param_settings {
               param: &#39;Protocol&#39;
               value: &#39;MQTT&#39;
           }
          param_settings {
               param: &#39;EncodingType&#39;
               value: &#39;&lt;JSON or CSV&gt;&#39;
           }
          param_settings {
               param: &#39;ReportingInterval&#39;
               value: &#39;max(60, Device.BulkData.MinReportingInterval)&#39;
           }
          param_settings {
               param: &#39;MQTT.Reference&#39;
               value: &#39;&lt;MQTT.Client instance from step 3 of test setup&gt;&#39;
           }
          param_settings {
               param: &#39;MQTT.PublishTopic&#39;
               value: &#39;mqtt-bulkdata&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Allow the EUT to send an AddResponse</p></li>
<li><p>Record the instance identifiers of the created objects as
reported by the EUT.</p></li>
<li><p>Send a Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: ADD
}
body {
  request {
    add {
      allow_partial: false
      create_objs {
          obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.Parameter.&#39;
          param_settings {
               param: &#39;Name&#39;
               value: &#39;UpTime&#39;
           }
          param_settings {
               param: &#39;Reference&#39;
               value: &#39;Device.DeviceInfo.UpTime&#39;
           }
        }
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}
body {
  request {
    set {
        allow_partial: false
        update_objs {
            obj_path: &#39;Device.BulkData.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
        update_objs {
            obj_path: &#39;Device.BulkData.Profile.&lt;instance identifier&gt;.&#39;
            param_settings {
              param: &#39;Enable&#39;
              value: &#39;true&#39;
            }
          }
    }
  }
}</code></pre></li>
<li><p>Wait up to 130 (<code>(ReportingInterval * 2) + 10</code>)
seconds</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-200">Test Metrics</h3>
<ol type="1">
<li>After enabling the BulkData profile the EUT published 2 BulkData
transfers to the MQTT server using using the configured topic within 130
(<code>(ReportingInterval * 2) + 10</code>) seconds.</li>
<li>The encoding of the Data parameter in the MQTT frame notification is
well formed (parsable).</li>
<li>The BulkData transfer contains the one parameter configured in step
4 and the name of the parameter matches the expected name ‘UpTime’.</li>
</ol>
</section>
<section id="sec:mqtt-test-cases"
class="auto-hoverlink new-section hidden" data-info="header">
<h1 class="auto-hoverlink" data-info="header">11 MQTT Test Cases</h1>
<ul>
<li><a href="#sec:support-of-required-mqtt-profiles">11.1 Support of
Required MQTT Profiles</a></li>
<li><a
href="#sec:mqtt-session-establishment-using-a-connect-packet">11.2 MQTT
session establishment using a CONNECT packet</a></li>
<li><a href="#sec:mqtt-use-of-tls">11.3 MQTT Use of TLS</a></li>
<li><a href="#sec:mqtt-5.0-clientid">11.4 MQTT 5.0 ClientID</a></li>
<li><a href="#sec:mqtt-clientid-persistence">11.5 MQTT ClientID
Persistence</a></li>
<li><a href="#sec:mqtt-message-retry">11.6 MQTT Message Retry</a></li>
<li><a href="#sec:mqtt-keep-alive">11.7 MQTT Keep Alive</a></li>
<li><a href="#sec:mqtt-subscribe-packet">11.8 MQTT SUBSCRIBE
Packet</a></li>
<li><a href="#sec:mqtt-new-subscription">11.9 MQTT New
Subscription</a></li>
<li><a href="#sec:mqtt-no-topic-in-connack">11.10 MQTT No Topic in
CONNACK</a></li>
<li><a href="#sec:mqtt-failure-to-subscribe">11.11 MQTT Failure to
Subscribe</a></li>
<li><a href="#sec:mqtt-publish-packet">11.12 MQTT PUBLISH
Packet</a></li>
<li><a href="#sec:mqtt-qos">11.13 MQTT QoS</a></li>
<li><a href="#sec:mqtt-reply-to-topic">11.14 MQTT Reply to
Topic</a></li>
<li><a href="#sec:mqtt-5.0-content-type">11.15 MQTT 5.0 Content
Type</a></li>
<li><a href="#sec:mqtt-connection-retry">11.16 MQTT Connection
Retry</a></li>
<li><a href="#sec:mqtt---use-of-connect-record">11.17 MQTT - Use of
Connect Record</a></li>
</ul>
<h2 class="auto-hoverlink" data-info="header"
id="sec:support-of-required-mqtt-profiles">11.1 Support of Required MQTT
Profiles</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-200">Purpose</h3>
<p>The purpose of this test is to ensure the EUT supports the required
MQTT profiles.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-99">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-200">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT and test equipment have the necessary
information to send and receive USP records to each other.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-193">Test Procedure</h3>
<ol type="1">
<li><p>Send a GetSupportedDM message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET_SUPPORTED_DM
}
body {
    request {
        get_supported_dm {
            obj_paths: &#39;Device.MQTT.&#39;
            obj_paths: &#39;Device.LocalAgent.&#39;
            return_params: true
            first_level_only: false
        }
    }
}</code></pre></li>
<li><p>Wait for the GetSupportedDMResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-201">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetSupportedDMResponse.</li>
<li>The GetSupportedDMResponse from the EUT contains all required
parameters in the MQTTClientCon:1, MQTTClientSubscribe:1, MQTTAgent:1,
and MQTTController:1 data model profiles. The parameter
<code>Device.MQTT.Client.{i}.MessageRetryTime</code> is not required to
be supported for EUTs that only implement MQTT version 5.0.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-session-establishment-using-a-connect-packet">11.2 MQTT
session establishment using a CONNECT packet</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-201">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can properly start an
MQTT session using an MQTT CONNECT packet.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-100">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-201">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
<li>Ensure that the EUT data model is configured with
<code>.MQTT.Client.{i}.Username</code>,
<code>.MQTT.Client.{i}.Password</code> values.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-194">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the MQTT server.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-202">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT CONNECT packet to the MQTT server.<br />
</li>
<li>The MQTT CONNECT packet Version is either 5.0 or 3.1.1.</li>
<li>If the EUT uses MQTT 5.0, the MQTT CONNECT packet contains a User
Property name-value pair with name of “usp-endpoint-id” and value of the
EUT USP Endpoint ID.</li>
<li>The EUT includes User Name and Password fields in the MQTT CONNECT
packet.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-use-of-tls">11.3 MQTT Use of TLS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-202">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can establish secure
MQTT communication via TLS.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-101">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-202">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
<li>Ensure the EUT and MQTT server are configured with the appropriate
certificates to communicate over TLS.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-195">Test Procedure</h3>
<ol type="1">
<li><p>Reboot the EUT</p></li>
<li><p>Wait for the EUT to reconnect to the MQTT server</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-203">Test Metrics</h3>
<ol type="1">
<li>All communication between the EUT and MQTT server after step 1 are
encrypted using TLS 1.2 or later.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-5.0-clientid">11.4 MQTT 5.0 ClientID</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-203">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly sets the
ClientID field in MQTT packets.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-102">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP, version 5.0)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-203">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-196">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: SET
}

body {
  request {
    set {
      allow_partial: false
      update_objs {
        obj_path: &#39;Device.​MQTT.​Client.&lt;active MQTT client instance&gt;.&#39;
        param_settings {
         param: &#39;ClientID&#39;
         value: &#39;&#39;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the MQTT server.</p></li>
<li><p>The MQTT server sends an MQTT CONNACK packet with an Assigned
Client Identifier.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.​MQTT.​Client.&lt;active MQTT client instance&gt;.ClientID&#39;
    }
  }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-204">Test Metrics</h3>
<ol type="1">
<li>The EUT MQTT CONNECT packet must include a ClientID set to an empty
string.</li>
<li>The retrieved value of ClientID matches the Assigned Client
Identifier from step 4.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-clientid-persistence">11.5 MQTT ClientID Persistence</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-204">Purpose</h3>
<p>The purpose of this test is to ensure the MQTT ClientID field
persists after successful connection with an MQTT server.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-103">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-204">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-197">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.​MQTT.​Client.&lt;active MQTT client instance&gt;.ClientID&#39;
    }
  }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the MQTT server.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-205">Test Metrics</h3>
<ol type="1">
<li>The EUT uses the same ClientID in the subsequent MQTT CONNECT
packet.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-message-retry">11.6 MQTT Message Retry</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-205">Purpose</h3>
<p>The purpose of this test is to ensure the EUT properly enters a retry
state when it fails to connect to the MQTT server.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-104">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-205">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that is part of
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-198">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.MQTT.Client.&#39;
        }
    }
}</code></pre></li>
<li><p>Send an Operate message to the EUT with the following
structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: OPERATE
}
body {
    request {
        operate {
            command: &#39;Device.Reboot()&#39;
        }
    }
}</code></pre></li>
<li><p>Disable the MQTT server.</p></li>
<li><p>Allow the EUT to attempt to start an MQTT session with the MQTT
server.</p></li>
<li><p>Reenable the MQTT server after the EUT fails to connect to the
MQTT server twice.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-206">Test Metrics</h3>
<ol type="1">
<li>The EUT retries connecting to the MQTT server within the
<code>ConnectRetryTime</code> of the connection instance.</li>
<li>The EUT retries a second time in accordance with
<code>ConnectRetryTime</code> and
<code>ConnectRetryIntervalMultiplier</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-keep-alive">11.7 MQTT Keep Alive</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-206">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can correctly implement
the MQTT keep alive mechanism and the relevant parameters in the data
model.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-105">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP, version 5.0)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-206">Test Setup</h3>
<ol type="1">
<li>The EUT is configured to use an MQTT server which exists in the test
environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-199">Test Procedure</h3>
<ol type="1">
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: SET
}
body {
    request {
        set {
            update_objs {
                    obj_path: &#39;Device.​MQTT.​Client.​&lt;active MQTT client instance&gt;.&#39;
                    param_settings {
                            param: &#39;KeepAliveTime&#39;
                            value: &#39;60&#39;
                        }
                }
        }
    }
}</code></pre></li>
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the MQTT server.</p></li>
<li><p>The MQTT server sends an MQTT CONNACK packet with a Keep Alive
value of 30 seconds.</p></li>
<li><p>Wait 45 seconds.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-207">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT CONNECT packet on boot with the Keep Alive
property set to 60 seconds.</li>
<li>The EUT sends an MQTT PINGREQ packet within 45 seconds of the last
MQTT message. This represents 1.5 times the Keep Alive value.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-subscribe-packet">11.8 MQTT SUBSCRIBE Packet</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-207">Purpose</h3>
<p>The purpose of this test is to ensure the EUT includes the correct
fields in an MQTT SUBSCRIBE packet.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-106">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP, version 5.0)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-207">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-200">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the MQTT server.</li>
<li>The MQTT server sends an MQTT CONNACK packet containing a User
Property of subscribe-topic.</li>
<li>For an EUT using MQTT 5.0, the MQTT CONNACK packet contains a
Response Information property.</li>
<li>Wait for the EUT to send an MQTT SUBSCRIBE packet.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-208">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT CONNECT packet to the MQTT server. If the EUT
uses MQTT 5.0, the Request Response Information property must be set to
1.</li>
<li>The EUT sends an MQTT SUBSCRIBE packet to the MQTT server. The MQTT
SUBSCRIBE packet includes the subscribe-topic sent in step 3.</li>
<li>If the EUT uses MQTT 5.0, the MQTT SUBSCRIBE packet includes the
Response Information property sent in step 4.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-new-subscription">11.9 MQTT New Subscription</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-208">Purpose</h3>
<p>The purpose of this test is to ensure the EUT sends an MQTT SUBSCRIBE
packet when a new <code>Device.MQTT.Client.{i}.Subscription.{i}.</code>
object is added.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-107">Functionality Tags</h3>
<p>Conditional Mandatory (supports MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-208">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-209">Test Metrics</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
          allow_partial: false
          create_objs {
              obj_path: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&#39;
              param_settings {
                      param: &#39;Enable&#39;
                      value: &#39;true&#39;
                  }
              param_settings {
                      param: &#39;Topic&#39;
                      value: &#39;&lt;newTopic-11-9 OR newTopic-11-9/# for USP Agents using MQTT version 3.1.1&gt;&#39;
                  }
              }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send an MQTT SUBSCRIBE packet.</p></li>
<li><p>The MQTT server sends an MQTT SUBACK packet indicating the QoS
level that was granted for the subscription.</p></li>
<li><p>Send a Get message with topic <code>newTopic-11-9</code> with the
following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&lt;instance identifier from step 1&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Send a Set message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &quot;&lt;msg_id&gt;&quot;
  msg_type: SET
}

body {
  request {

    set {
      allow_partial: false
      update_objs {
        obj_path: &quot;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&lt;instance identifier from step 1&gt;&quot;
        param_settings: {
         param: &quot;Enable&quot;
         value: &quot;false&quot;
         required: true
        }
      }
    }
  }
}</code></pre></li>
<li><p>The MQTT Server sends an MQTT UNSUBACK packet indicating
success.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-210">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT SUBSCRIBE packet that includes the new Topic
from step 1.</li>
<li>The EUT sends a GetResp for the Subscription.</li>
<li>The EUT sends an MQTT UNSUBSCRIBE packet for the configured Topic
after Enable is set to false.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-no-topic-in-connack">11.10 MQTT No Topic in CONNACK</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-209">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will disconnect from
the MQTT server if it receives no subscribe-topic.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-108">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP, version 5.0)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-209">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
<li>Ensure that all instances of
<code>Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.</code>
are removed from the EUT.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-201">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to reconnect to the MQTT server.</li>
<li>The MQTT server sends an MQTT CONNACK packet that does not include a
subscribe-topic User Property.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-211">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT DISCONNECT packet to the MQTT server.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-failure-to-subscribe">11.11 MQTT Failure to Subscribe</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-210">Purpose</h3>
<p>The purpose of this test is to ensure the EUT will disconnect from
the MQTT server if it is unable to subscribe to a Topic.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-109">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-210">Test Setup</h3>
<ol type="1">
<li>Ensure that the EUT is configured to use an MQTT server that exists
in the test environment.</li>
<li>Ensure that the EUT is configured to send a
Device.LocalAgent.Periodic! event to the Controller every 60 seconds
through the Device.
LocalAgent.Controller.&lt;i&gt;.PeriodicNotifInterval parameter.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-202">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to send an MQTT SUBSCRIBE packet.</li>
<li>The MQTT server sends an MQTT SUBACK packet that includes an error
for each Topic in the SUBSCRIBE packet.</li>
<li>Wait 120 seconds.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-212">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT DISCONNECT packet to the MQTT server.</li>
<li>The EUT does not publish a USP record to the MQTT server for any
Topic in the MQTT SUBSCRIBE packet.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-publish-packet">11.12 MQTT PUBLISH Packet</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-211">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can send a properly
formatted an MQTT PUBLISH packet.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-110">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-211">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-203">Test Procedure</h3>
<ol type="1">
<li><p>Reboot the EUT.</p></li>
<li><p>Wait for the EUT to reconnect to the MQTT server.</p></li>
<li><p>The MQTT server sends a CONNACK packet.</p></li>
<li><p>For an EUT using MQTT 5.0, the CONNACK packet contains a Response
Information property.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-213">Test Metrics</h3>
<ol type="1">
<li>The EUT sends an MQTT PUBLISH packet containing a GetResponse.</li>
<li>If the EUT uses MQTT 5.0, the Response Topic is set to the Response
Information property from step 4.</li>
<li>If the EUT uses MQTT 3.1.1, the “reply to” is included after
<code>/reply-to=</code> at the end of the PUBLISH Topic Name, with any
<code>/</code> character in the Topic replaced by <code>%2F</code>.</li>
<li>If the EUT uses MQTT 5.0, the Content Type property is set to
<code>usp.msg</code></li>
</ol>
<h2 class="auto-hoverlink" data-info="header" id="sec:mqtt-qos">11.13
MQTT QoS</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-212">Purpose</h3>
<p>The purpose of this test is to ensure the EUT supports at least MQTT
QoS levels 0 and 1.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-111">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-212">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-204">Test Procedure</h3>
<ol type="1">
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
          allow_partial: false
          create_objs {
              obj_path: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&#39;
              param_settings {
                      param: &#39;Enable&#39;
                      value: &#39;true&#39;
                  }
              param_settings {
                      param: &#39;Topic&#39;
                      value: &#39;&lt;newTopic-11-13-QoS0 OR newTopic-11-13-QoS0/# for USP Agents using MQTT version 3.1.1&gt;&#39;
                  }
              }
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send an MQTT SUBSCRIBE packet.</p></li>
<li><p>The MQTT server sends an MQTT SUBACK packet indicating a QoS
level of 0 for the subscription.</p></li>
<li><p>Send an Add message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: ADD
}
body {
    request {
        add {
          allow_partial: false
          create_objs {
              obj_path: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&#39;
              param_settings {
                      param: &#39;Enable&#39;
                      value: &#39;true&#39;
                  }
              param_settings {
                      param: &#39;Topic&#39;
                      value: &#39;newTopic-11-13-QoS1&#39;
                  }
              param_settings {
                      param: &#39;QoS&#39;
                      value: &#39;1&#39;
                  }
              }
        }
    }
}</code></pre></li>
<li><p>The MQTT server sends an MQTT SUBACK packet indicating a QoS
level of 1 for the subscription.</p></li>
<li><p>Send a Get message with topic ‘newTopic-11-13-QoS0’ to the EUT
with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&lt;instance from step 1&gt;.&#39;
    }
  }
}</code></pre></li>
<li><p>Send a Get message with topic ‘newTopic-11-13-QoS1’ to the EUT
with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
  msg_id: &#39;&lt;msg_id&gt;&#39;
  msg_type: GET
}
body {
  request {
    get {
      param_paths: &#39;Device.MQTT.Client.&lt;active MQTT client instance&gt;.Subscription.&lt;instance from step 4&gt;.&#39;
    }
  }
}</code></pre></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-214">Test Metrics</h3>
<ol type="1">
<li>The EUT sends a GetResp for the Get message sent to topic
‘newTopic-11-13-QoS0’.</li>
<li>The EUT sends a GetResp for the Get message sent to topic
‘newTopic-11-13-QoS1’.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-reply-to-topic">11.14 MQTT Reply to Topic</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-213">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can process and set the
“reply to” Topic in MQTT PUBLISH packets.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-112">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-213">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-205">Test Procedure</h3>
<ol type="1">
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-215">Test Metrics</h3>
<ol type="1">
<li>If the EUT uses MQTT 5.0, the EUT must send an MQTT PUBLISH packet
that includes a GetResponse. The Topic Name must be set to the “reply
to” Topic from the controller’s MQTT PUBLISH packet Response Topic
property. The EUT must include a Response Topic property that has a
“reply to” Topic set.</li>
<li>If the EUT uses MQTT 3.1.1, the EUT must send an MQTT PUBLISH packet
that includes a GetResponse. The Topic must be set to the reply to topic
at the end of the Topic Name in the Controller’s MQTT PUBLISH packet.
All instances of <code>%2F</code> must be replaced by <code>/</code> in
the Topic Name. The EUT must set a reply to topic by including it at the
end of the Topic Name after <code>/reply-to=</code> and replacing all
instances of <code>/</code> with <code>%2F</code>.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-5.0-content-type">11.15 MQTT 5.0 Content Type</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-214">Purpose</h3>
<p>The purpose of this test is to ensure the EUT can accept valid values
of the MQTT Content Type property.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-113">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP, version 5.0)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-214">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-206">Test Procedure</h3>
<ol type="1">
<li><p>Configure the Controller to include an MQTT Content Type property
of <code>usp.msg</code> in its MQTT packets.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse.</p></li>
<li><p>Configure the Controller to include an MQTT Content Type property
of <code>application/vnd.bbf.usp.msg</code> in its MQTT
packets.</p></li>
<li><p>Send a Get message to the EUT with the following structure:</p>
<pre data-filter="pbv" type="Msg"><code>header {
    msg_id: &#39;&lt;msg_id&gt;&#39;
    msg_type: GET
}
body {
    request {
        get {
            param_paths: &#39;Device.DeviceInfo&#39;
        }
    }
}</code></pre></li>
<li><p>Wait for the EUT to send a GetResponse.</p></li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-216">Test Metrics</h3>
<ol type="1">
<li>The EUT must send a GetResponse for both Get messages, indicating
that it processed the Controller’s MQTT PUBLISH packets.</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt-connection-retry">11.16 MQTT Connection Retry</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-215">Purpose</h3>
<p>The purpose of this test is to ensure the EUT retries its connection
with the MQTT server after the server terminates the connection.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-114">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-215">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-207">Test Procedure</h3>
<ol type="1">
<li>Send an MQTT DISCONNECT packet to the EUT.</li>
<li>Allow the EUT to start a new MQTT session with the MQTT server.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-217">Test Metrics</h3>
<ol type="1">
<li>The EUT retries connecting to the MQTT server between
ConnectRetryTime of the connection instance and
ConnectRetryTime*(ConnectRetryIntervalMultiplier/1000).</li>
</ol>
<h2 class="auto-hoverlink" data-info="header"
id="sec:mqtt---use-of-connect-record">11.17 MQTT - Use of Connect
Record</h2>
<h3 class="auto-hoverlink" data-info="header"
id="sec:purpose-216">Purpose</h3>
<p>The purpose of this test is to ensure the EUT correctly sends a
Connect record after it has established a communications channel to the
controller.</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:functionality-tags-115">Functionality Tags</h3>
<p>Conditional Mandatory (supports the MQTT MTP)</p>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-setup-216">Test Setup</h3>
<ol type="1">
<li>Ensure the EUT is configured to use an MQTT server that exists in
the test environment.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-procedure-208">Test Procedure</h3>
<ol type="1">
<li>Reboot the EUT.</li>
<li>Wait for the EUT to establish an MQTT session with the MQTT
server.</li>
</ol>
<h3 class="auto-hoverlink" data-info="header"
id="sec:test-metrics-218">Test Metrics</h3>
<ol type="1">
<li>After reconnecting to the MQTT server, the EUT transmits an
MQTTConnectRecord within 30 seconds. The EUT includes the MQTTVersion
field set to the correct MQTT version and the subscribed_topic field set
to a Topic that the EUT is subscribed to.</li>
</ol>
</section>
    <div style="clear: both;"></div>
    <nav id="NAVBOT" role="doc-toc">
<p><p><a href="#sec:cover-page">Cover Page</a> | <a
href="#sec:test-setup">Test Setup</a> | <a
href="#sec:messages-and-path-names">1 Messages and Path Names</a> | <a
href="#sec:authentication-and-access-control-test-cases">2
Authentication and Access Control Test Cases</a> | <a
href="#sec:usp-record-test-cases">3 USP Record Test Cases</a> | <a
href="#sec:general-mtp-test-cases">4 General MTP Test Cases</a> | <a
href="#sec:coap-test-cases-deprecated">5 CoAP Test Cases
(DEPRECATED)</a> | <a href="#sec:stomp-test-cases">6 STOMP Test
Cases</a> | <a href="#sec:websocket-test-cases">7 WebSocket Test
Cases</a> | <a href="#sec:discovery-test-cases">8 Discovery Test
Cases</a> | <a href="#sec:functionality-test-cases">9 Functionality Test
Cases</a> | <a href="#sec:bulk-data-collection-test-cases">10 Bulk Data
Collection Test Cases</a> | <a href="#sec:mqtt-test-cases">11 MQTT Test
Cases</a></p>
    </nav>
    <footer class="site-footer">
      <span class="site-footer-owner">
        USP is developed and maintained
        by <a href="https://www.broadband-forum.org">The Broadband Forum</a>.
        &copy; The Broadband Forum 2025</a>. All Rights Reserved.
      </span>
      <span class="site-footer-credits">
        This page was generated by <a href="https://pandoc.org">pandoc</a>
        and <a href="https://pages.github.com">GitHub Pages</a>.
        View the <a href="https://github.com/BroadbandForum/usp-test">specification
source on GitHub</a>.
        <span class="release"></span>
      </span>
    </footer>
  </section>
</body>
</html>
